import{f as P,a as S,d as Q}from"../chunks/B5mZLFLJ.js";import{i as xe}from"../chunks/D6vZkVq1.js";import{c as Tt,o as Ct}from"../chunks/ZXQmN4nw.js";import{k as Ae,h as oe,a8 as Nt,a7 as Mt,e as At,d as zt,g as t,P as Ke,f as Ft,i as It,j as $e,l as ze,u as me,an as Ut,n as Xe,o as Qe,q as Rt,aq as et,F as Ot,m as V,aw as je,ax as Fe,aa as Ve,ay as Be,az as Ye,aA as Bt,ad as Ht,aB as Pt,a6 as $t,aC as He,aD as jt,ak as Vt,aE as tt,L as Yt,aF as Zt,p as he,aG as at,b as p,B as qt,aH as rt,c as v,s as _,r as d,aI as Ue,t as de,a as ge,x as Wt,at as Ze,$ as Gt}from"../chunks/KKiNGECp.js";import{s as te,e as G,d as Jt,h as Kt,r as Xt}from"../chunks/CxMWnzkG.js";import{i as j}from"../chunks/BOZlHw2i.js";import{r as ce,s as st,b as fe,a as Qt,c as ea,B as ue}from"../chunks/DX3MR-9l.js";import{g as nt}from"../chunks/TU0YPFzo.js";import{p as Re,b as ta}from"../chunks/ZEJ93B6U.js";function qe(r,e){return e}function aa(r,e,a,n){for(var o=[],s=e.length,l=0;l<s;l++)Bt(e[l].e,o,!0);var u=s>0&&o.length===0&&a!==null;if(u){var m=a.parentNode;Ht(m),m.append(a),n.clear(),ie(r,e[0].prev,e[s-1].next)}Pt(o,()=>{for(var i=0;i<s;i++){var g=e[i];u||(n.delete(g.k),ie(r,g.prev,g.next)),$t(g.e,!u)}})}function Oe(r,e,a,n,o,s=null){var l=r,u={flags:e,items:new Map,first:null},m=(e&tt)!==0;if(m){var i=r;l=oe?Ae(Nt(i)):i.appendChild(Mt())}oe&&At();var g=null,Y=!1,y=Ke(()=>{var L=a();return Ot(L)?L:L==null?[]:et(L)});zt(()=>{var L=t(y),h=L.length;if(Y&&h===0)return;Y=h===0;let O=!1;if(oe){var B=Ft(l)===It;B!==(h===0)&&(l=$e(),Ae(l),ze(!1),O=!0)}if(oe){for(var F=null,Z,H=0;H<h;H++){if(me.nodeType===8&&me.data===Ut){l=me,O=!0,ze(!1);break}var x=L[H],T=n(x,H);Z=ot(me,u,F,null,x,T,H,o,e,a),u.items.set(T,Z),F=Z}h>0&&Ae($e())}oe||ra(L,u,l,o,e,n,a),s!==null&&(h===0?g?Xe(g):g=Qe(()=>s(l)):g!==null&&Rt(g,()=>{g=null})),O&&ze(!0),t(y)}),oe&&(l=me)}function ra(r,e,a,n,o,s,l){var re,se,M,U;var u=(o&Zt)!==0,m=(o&(He|Be))!==0,i=r.length,g=e.items,Y=e.first,y=Y,L,h=null,O,B=[],F=[],Z,H,x,T;if(u)for(T=0;T<i;T+=1)Z=r[T],H=s(Z,T),x=g.get(H),x!==void 0&&((re=x.a)==null||re.measure(),(O??(O=new Set)).add(x));for(T=0;T<i;T+=1){if(Z=r[T],H=s(Z,T),x=g.get(H),x===void 0){var le=y?y.e.nodes_start:a;h=ot(le,e,h,h===null?e.first:h.next,Z,H,T,n,o,l),g.set(H,h),B=[],F=[],y=h.next;continue}if(m&&sa(x,Z,T,o),(x.e.f&Fe)!==0&&(Xe(x.e),u&&((se=x.a)==null||se.unfix(),(O??(O=new Set)).delete(x))),x!==y){if(L!==void 0&&L.has(x)){if(B.length<F.length){var N=F[0],C;h=N.prev;var J=B[0],q=B[B.length-1];for(C=0;C<B.length;C+=1)We(B[C],N,a);for(C=0;C<F.length;C+=1)L.delete(F[C]);ie(e,J.prev,q.next),ie(e,h,J),ie(e,q,N),y=N,h=q,T-=1,B=[],F=[]}else L.delete(x),We(x,y,a),ie(e,x.prev,x.next),ie(e,x,h===null?e.first:h.next),ie(e,h,x),h=x;continue}for(B=[],F=[];y!==null&&y.k!==H;)(y.e.f&Fe)===0&&(L??(L=new Set)).add(y),F.push(y),y=y.next;if(y===null)continue;x=y}B.push(x),h=x,y=x.next}if(y!==null||L!==void 0){for(var I=L===void 0?[]:et(L);y!==null;)(y.e.f&Fe)===0&&I.push(y),y=y.next;var ee=I.length;if(ee>0){var ae=(o&tt)!==0&&i===0?a:null;if(u){for(T=0;T<ee;T+=1)(M=I[T].a)==null||M.measure();for(T=0;T<ee;T+=1)(U=I[T].a)==null||U.fix()}aa(e,I,ae,g)}}u&&Yt(()=>{var $;if(O!==void 0)for(x of O)($=x.a)==null||$.apply()}),Ve.first=e.first&&e.first.e,Ve.last=h&&h.e}function sa(r,e,a,n){(n&He)!==0&&Ye(r.v,e),(n&Be)!==0?Ye(r.i,a):r.i=a}function ot(r,e,a,n,o,s,l,u,m,i){var g=(m&He)!==0,Y=(m&jt)===0,y=g?Y?V(o,!1,!1):je(o):o,L=(m&Be)===0?l:je(l),h={i:L,v:y,k:s,a:null,e:null,prev:a,next:n};try{return h.e=Qe(()=>u(r,y,L,i),oe),h.e.prev=a&&a.e,h.e.next=n&&n.e,a===null?e.first=h:(a.next=h,a.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function We(r,e,a){for(var n=r.next?r.next.e.nodes_start:a,o=e?e.e.nodes_start:a,s=r.e.nodes_start;s!==n;){var l=Vt(s);o.before(s),s=l}}function ie(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function na(r,e,a){var n=r==null?"":""+r;return n===""?null:n}function lt(r,e,a,n,o,s){var l=r.__className;if(oe||l!==a||l===void 0){var u=na(a);(!oe||u!==r.getAttribute("class"))&&(u==null?r.removeAttribute("class"):r.className=u),r.__className=a}return s}function oa(r){return function(...e){var a=e[0];return a.preventDefault(),r==null?void 0:r.apply(this,e)}}var la=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),ia=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),ca=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),da=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),va=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),ua=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),fa=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),pa=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),ha=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),ga=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),ma=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),_a=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),xa=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),ya=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),wa=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),ba=P('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><input type="checkbox" class="w-5 h-5 text-green-600 rounded border-gray-300 focus:ring-green-500"/></td></tr>'),ka=P('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No employees found</h3></div>'),Da=P('<div class="overflow-x-auto"><table class="min-w-full text-sm text-left text-gray-700 bg-white"><thead class="bg-gray-100 text-xs text-gray-500 uppercase"><tr><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Employee no. <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Date hired <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Cost center</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Name <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Position title</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Rank</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Department <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Last day <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Mark as Processed</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table> <!></div>');function Sa(r,e){he(e,!1);const a=V();let n=Re(e,"employees",24,()=>[]),o=Re(e,"onstatustoggle",8),s=V(""),l=V("asc");function u(f){t(s)==f?p(l,t(l)==="asc"?"desc":"asc"):(p(s,f),p(l,"asc"))}function m(f){return f?new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function i(f){f.processed_date_time,o()&&o()({detail:{employee:f}})}at(()=>(qt(n()),t(s),t(l)),()=>{p(a,[...n()].sort((f,D)=>{if(!t(s))return 0;let K=f[t(s)],X=D[t(s)];if(t(s)==="date_hired"||t(s)==="last_day"){const we=new Date(K||"1900-01-01"),pe=new Date(X||"1900-01-01");return we<pe?t(l)==="asc"?-1:1:we>pe?t(l)==="asc"?1:-1:0}const w=String(K||""),A=String(X||"");return w<A?t(l)==="asc"?-1:1:w>A?t(l)==="asc"?1:-1:0}))}),rt(),xe();var g=Da(),Y=v(g),y=v(Y),L=v(y),h=v(L),O=v(h),B=_(v(O)),F=v(B);{var Z=f=>{var D=la();S(f,D)},H=(f,D)=>{{var K=w=>{var A=ia();S(w,A)},X=w=>{var A=ca();S(w,A)};j(f,w=>{t(s)==="employee_no"&&t(l)==="desc"?w(K):w(X,!1)},D)}};j(F,f=>{t(s)==="employee_no"&&t(l)==="asc"?f(Z):f(H,!1)})}d(B),d(O),d(h);var x=_(h),T=v(x),le=_(v(T)),N=v(le);{var C=f=>{var D=da();S(f,D)},J=(f,D)=>{{var K=w=>{var A=va();S(w,A)},X=w=>{var A=ua();S(w,A)};j(f,w=>{t(s)==="date_hired"&&t(l)==="desc"?w(K):w(X,!1)},D)}};j(N,f=>{t(s)==="date_hired"&&t(l)==="asc"?f(C):f(J,!1)})}d(le),d(T),d(x);var q=_(x,2),I=v(q),ee=_(v(I)),ae=v(ee);{var re=f=>{var D=fa();S(f,D)},se=(f,D)=>{{var K=w=>{var A=pa();S(w,A)},X=w=>{var A=ha();S(w,A)};j(f,w=>{t(s)==="name"&&t(l)==="desc"?w(K):w(X,!1)},D)}};j(ae,f=>{t(s)==="name"&&t(l)==="asc"?f(re):f(se,!1)})}d(ee),d(I),d(q);var M=_(q,3),U=v(M),$=_(v(U)),W=v($);{var c=f=>{var D=ga();S(f,D)},b=(f,D)=>{{var K=w=>{var A=ma();S(w,A)},X=w=>{var A=_a();S(w,A)};j(f,w=>{t(s)==="department"&&t(l)==="desc"?w(K):w(X,!1)},D)}};j(W,f=>{t(s)==="department"&&t(l)==="asc"?f(c):f(b,!1)})}d($),d(U),d(M);var k=_(M),E=v(k),z=_(v(E)),R=v(z);{var ne=f=>{var D=xa();S(f,D)},ve=(f,D)=>{{var K=w=>{var A=ya();S(w,A)},X=w=>{var A=wa();S(w,A)};j(f,w=>{t(s)==="last_day"&&t(l)==="desc"?w(K):w(X,!1)},D)}};j(R,f=>{t(s)==="last_day"&&t(l)==="asc"?f(ne):f(ve,!1)})}d(z),d(E),d(k),Ue(2),d(L),d(y);var ye=_(y);Oe(ye,7,()=>t(a),f=>f.employee_no,(f,D)=>{var K=ba(),X=v(K),w=v(X,!0);d(X);var A=_(X),we=v(A,!0);d(A);var pe=_(A),ft=v(pe,!0);d(pe);var De=_(pe),pt=v(De,!0);d(De);var Se=_(De),ht=v(Se,!0);d(Se);var Ee=_(Se),gt=v(Ee,!0);d(Ee);var Le=_(Ee),mt=v(Le,!0);d(Le);var Te=_(Le),_t=v(Te,!0);d(Te);var Ce=_(Te),Ne=v(Ce),xt=v(Ne,!0);d(Ne),d(Ce);var Pe=_(Ce),Me=v(Pe);ce(Me),d(Pe),d(K),de((yt,wt,bt,kt,Dt,St,Et,Lt)=>{te(w,yt),te(we,wt),te(ft,bt),te(pt,kt),te(ht,Dt),te(gt,St),te(mt,Et),te(_t,Lt),lt(Ne,1,`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t(D).processed_date_time?"bg-[#CFEED8] text-[#1E9F37]":"bg-[#FED9DA] text-[#D7313E]"}`),te(xt,t(D).processed_date_time?"Processed":"Unprocessed"),st(Me,t(D).processed_date_time!==null)},[()=>String(t(D).employee_no||""),()=>m(t(D).date_hired),()=>String(t(D).cost_center||""),()=>String(t(D).name||""),()=>String(t(D).position_title||""),()=>String(t(D).rank||""),()=>String(t(D).department||""),()=>m(t(D).last_day)],Ke),G("change",Me,()=>i(t(D))),S(f,K)}),d(ye),d(Y);var ke=_(Y,2);{var ut=f=>{var D=ka();S(f,D)};j(ke,f=>{t(a).length===0&&f(ut)})}d(g),G("click",h,()=>u("employee_no")),G("click",x,()=>u("date_hired")),G("click",q,()=>u("name")),G("click",M,()=>u("department")),G("click",k,()=>u("last_day")),S(r,g),ge()}function Ea(r,e,a,n){var o;p(e,""),a(),(o=t(n))==null||o.focus()}var La=P('<div class="absolute inset-y-0 right-0 pr-3 flex items-center"><button class="text-gray-400 hover:text-gray-600 focus:outline-none transition-colors" aria-label="Clear search"><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ta=P('<div class="relative flex-1 min-w-[200px] max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-3xl"/> <!></div>');function Ca(r,e){he(e,!0);let a=Ze(""),n=Ze(void 0);function o(){var i;(i=e.onsearch)==null||i.call(e,{searchTerm:t(a)})}Wt(()=>{o()});var s=Ta(),l=_(v(s),2);ce(l),l.__input=o,ta(l,i=>p(n,i),()=>t(n));var u=_(l,2);{var m=i=>{var g=La(),Y=v(g);Y.__click=[Ea,a,o,n],d(g),S(i,g)};j(u,i=>{t(a)&&i(m)})}d(s),fe(l,()=>t(a),i=>p(a,i)),S(r,s),ge()}Jt(["input","click"]);const it=6e4,ct=36e5,Ge=Symbol.for("constructDateFrom");function dt(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&Ge in r?r[Ge](e):r instanceof Date?new r.constructor(e):new Date(e)}function Je(r,e){return dt(r,r)}function Na(r,e){const a=()=>dt(e==null?void 0:e.in,NaN),o=Fa(r);let s;if(o.date){const i=Ia(o.date,2);s=Ua(i.restDateString,i.year)}if(!s||isNaN(+s))return a();const l=+s;let u=0,m;if(o.time&&(u=Ra(o.time),isNaN(u)))return a();if(o.timezone){if(m=Oa(o.timezone),isNaN(m))return a()}else{const i=new Date(l+u),g=Je(0);return g.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),g.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),g}return Je(l+u+m)}const be={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ma=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Aa=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,za=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Fa(r){const e={},a=r.split(be.dateTimeDelimiter);let n;if(a.length>2)return e;if(/:/.test(a[0])?n=a[0]:(e.date=a[0],n=a[1],be.timeZoneDelimiter.test(e.date)&&(e.date=r.split(be.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const o=be.timezone.exec(n);o?(e.time=n.replace(o[1],""),e.timezone=o[1]):e.time=n}return e}function Ia(r,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(a);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?o:s*100,restDateString:r.slice((n[1]||n[2]).length)}}function Ua(r,e){if(e===null)return new Date(NaN);const a=r.match(Ma);if(!a)return new Date(NaN);const n=!!a[4],o=_e(a[1]),s=_e(a[2])-1,l=_e(a[3]),u=_e(a[4]),m=_e(a[5])-1;if(n)return ja(e,u,m)?Ba(e,u,m):new Date(NaN);{const i=new Date(0);return!Pa(e,s,l)||!$a(e,o)?new Date(NaN):(i.setUTCFullYear(e,s,Math.max(o,l)),i)}}function _e(r){return r?parseInt(r):1}function Ra(r){const e=r.match(Aa);if(!e)return NaN;const a=Ie(e[1]),n=Ie(e[2]),o=Ie(e[3]);return Va(a,n,o)?a*ct+n*it+o*1e3:NaN}function Ie(r){return r&&parseFloat(r.replace(",","."))||0}function Oa(r){if(r==="Z")return 0;const e=r.match(za);if(!e)return 0;const a=e[1]==="+"?-1:1,n=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return Ya(n,o)?a*(n*ct+o*it):NaN}function Ba(r,e,a){const n=new Date(0);n.setUTCFullYear(r,0,4);const o=n.getUTCDay()||7,s=(e-1)*7+a+1-o;return n.setUTCDate(n.getUTCDate()+s),n}const Ha=[31,null,31,30,31,30,31,31,30,31,30,31];function vt(r){return r%400===0||r%4===0&&r%100!==0}function Pa(r,e,a){return e>=0&&e<=11&&a>=1&&a<=(Ha[e]||(vt(r)?29:28))}function $a(r,e){return e>=1&&e<=(vt(r)?366:365)}function ja(r,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function Va(r,e,a){return r===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&r>=0&&r<25}function Ya(r,e){return e>=0&&e<=59}var Za=P('<label class="field-option svelte-130yogc"><input type="radio" name="filter" class="svelte-130yogc"/> </label>'),qa=P('<div class="date-range svelte-130yogc"><input type="date" class="svelte-130yogc"/> <input type="date" class="svelte-130yogc"/></div>'),Wa=P('<div class="field-grid mb-2 svelte-130yogc" style="gap: 0.25rem 0.70rem;"><label class="field-option svelte-130yogc"><input type="radio" name="status-filter" value="processed" class="svelte-130yogc"/> <span class="inline-block px-5 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#CFEED8] text-[#1E9F37]">Processed</span></label> <label class="field-option svelte-130yogc"><input type="radio" name="status-filter" value="unprocessed" class="svelte-130yogc"/> <span class="inline-block px-3 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#FED9DA] text-[#D7313E]">Unprocessed</span></label></div>'),Ga=P('<div class="filter-input svelte-130yogc"><input type="text" class="w-full px-2 py-1 border rounded mb-0.25"/></div>'),Ja=P('<div class="filter-tag svelte-130yogc"> <button class="svelte-130yogc">×</button></div>'),Ka=P('<div class="active-filters svelte-130yogc"></div>'),Xa=P('<div class="dropdown-panel svelte-130yogc"><button class="close-button svelte-130yogc">✕</button> <div class="field-grid svelte-130yogc"></div> <hr class="divider svelte-130yogc"/> <!> <!></div>'),Qa=P('<div class="dropdown svelte-130yogc"><button class="filter-button svelte-130yogc"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-130yogc"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"></path></svg> Filter</button> <!></div>');function er(r,e){he(e,!1);let a=Re(e,"employees",24,()=>[]);const n=Tt();let o=V(!1),s=V(""),l=V(""),u=V(""),m=V(""),i=V([]);const g=["Employee No.","Date Hired","Cost Center","Name","Position","Rank","Department","Last Day","Status"];function Y(){p(o,!t(o))}function y(N){p(s,N),p(l,""),p(u,""),p(m,"")}function L(){if(t(s)==="Date Hired"||t(s)==="Last Day"){if(t(u)&&t(m)){const N=new Date(t(u)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),C=new Date(t(m)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),J=`${N} to ${C}`;t(i).find(I=>I.field===t(s)&&I.value===J)||(p(i,[...t(i),{field:t(s),value:J}]),F()),p(s,""),p(u,""),p(m,"")}}else t(s)&&t(l)&&(t(i).find(C=>C.field===t(s)&&C.value===t(l))||(p(i,[...t(i),{field:t(s),value:t(l)}]),F()),p(s,""),p(l,""))}function h(N){p(i,t(i).filter((C,J)=>J!==N)),F()}function O(){p(o,!1),p(s,""),p(l,""),B()}function B(){p(i,[]),F()}function F(){let N=a();t(i).forEach(C=>{const J=Z(C.field);N=N.filter(q=>{var ae;const I=(ae=q[J])==null?void 0:ae.toString().toLowerCase(),ee=C.value.toLowerCase();if(C.field==="Employee No."||C.field==="Cost Center")return I===ee;if(C.field==="Date Hired"||C.field==="Last Day"){const[re,se]=C.value.split(" to ");try{const M=Na(q[J]);return M>=new Date(re)&&M<=new Date(se)}catch{return!1}}return C.field==="Status"?(I?"processed":"unprocessed")===ee.toLowerCase():I==null?void 0:I.toString().toLowerCase().includes(ee)})}),n("filter",{filtered:N})}function Z(N){return{"Employee No.":"employee_no","Date Hired":"date_hired","Cost Center":"cost_center",Name:"name",Position:"position_title",Rank:"rank",Department:"department","Last Day":"last_day",Status:"processed_date_time"}[N]||N}xe();var H=Qa(),x=v(H),T=_(x,2);{var le=N=>{var C=Xa(),J=v(C),q=_(J,2);Oe(q,5,()=>g,qe,(M,U)=>{var $=Za(),W=v($);ce(W);var c=_(W);d($),de(()=>{Qt(W,t(U)),st(W,t(s)===t(U)),te(c,` ${t(U)??""}`)}),G("change",W,()=>y(t(U))),S(M,$)}),d(q);var I=_(q,4);{var ee=M=>{var U=qa(),$=v(U);ce($);var W=_($,2);ce(W),d(U),fe($,()=>t(u),c=>p(u,c)),G("change",$,()=>{t(u)&&t(m)&&(L(),p(o,!1))}),fe(W,()=>t(m),c=>p(m,c)),G("change",W,()=>{t(u)&&t(m)&&(L(),p(o,!1))}),S(M,U)},ae=(M,U)=>{{var $=c=>{var b=Wa(),k=v(b),E=v(k);Ue(2),d(k);var z=_(k,2),R=v(z);Ue(2),d(z),d(b),G("change",E,()=>{p(l,"Processed"),L()}),G("change",R,()=>{p(l,"Unprocessed"),L()}),S(c,b)},W=c=>{var b=Ga(),k=v(b);ce(k),d(b),de(()=>ea(k,"placeholder",`Enter ${t(s)}...`)),fe(k,()=>t(l),E=>p(l,E)),G("keydown",k,E=>{E.key==="Enter"&&L()}),S(c,b)};j(M,c=>{t(s)==="Status"?c($):c(W,!1)},U)}};j(I,M=>{t(s)==="Date Hired"||t(s)==="Last Day"?M(ee):M(ae,!1)})}var re=_(I,2);{var se=M=>{var U=Ka();Oe(U,5,()=>t(i),qe,($,W,c)=>{var b=Ja(),k=v(b),E=_(k);d(b),de(()=>te(k,`${t(W).field??""} = ${t(W).value??""} `)),G("click",E,()=>h(c)),S($,b)}),d(U),S(M,U)};j(re,M=>{t(i).length>0&&M(se)})}d(C),G("click",J,O),S(N,C)};j(T,N=>{t(o)&&N(le)})}d(H),G("click",x,Y),S(r,H),ge()}var tr=P('<div class="flex items-center gap-2"><label for="start-date" class="text-sm text-gray-600 font-[Open_Sans]">From:</label> <input id="start-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <label for="end-date" class="text-sm text-gray-600 font-[Open_Sans]">To:</label> <input id="end-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <button><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path></svg> Export</button></div>');function ar(r,e){he(e,!1);let a=V(""),n=V(""),o=V(!1);async function s(){if(!t(a)||!t(n)){alert("Please select both a start and end date.");return}try{const g=new Date(t(a)).toISOString(),Y=new Date(t(n)).toISOString(),y=await fetch(`${ue}/resignees/report?start_date=${g}&end_date=${Y}`,{credentials:"include"});if(!y.ok)throw new Error("Failed to fetch report from backend");const L=await y.blob(),h=URL.createObjectURL(L),O=document.createElement("a");O.href=h,O.download=`resignee_report_${t(a)}_to_${t(n)}.xlsx`,O.click(),URL.revokeObjectURL(h),p(o,!0)}catch(g){console.error("Error downloading backend report:",g),alert("No process dates were found within the specified date range")}}xe();var l=tr(),u=_(v(l),2);ce(u);var m=_(u,4);ce(m);var i=_(m,2);d(l),de(()=>lt(i,1,`flex items-center gap-2 px-4.25 py-1.75 rounded-md text-sm font-[Open_Sans] hover:bg-blue-600 transition ${t(o),"bg-blue-500 text-white"}`)),fe(u,()=>t(a),g=>p(a,g)),fe(m,()=>t(n),g=>p(n,g)),G("click",i,s),S(r,l),ge()}var rr=P('<button class="flex items-center gap-2 px-3 py-1.75 bg-red-500 text-white rounded-md hover:bg-red-600 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"></path></svg> Logout</button>');function sr(r,e){he(e,!1);async function a(){try{const o=await fetch(`${ue}/logout`,{method:"POST",credentials:"include"});if(!o.ok){const s=await o.text();console.error("Logout failed:",s);return}nt("/")}catch(o){console.error("Logout error:",o)}}xe();var n=rr();G("click",n,a),S(r,n),ge()}var nr=P('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600">Loading employees...</span></div>'),or=P('<div class="flex items-center justify-center py-12"><div class="text-red-600 bg-red-50 px-4 py-2 rounded-lg"> </div></div>'),lr=P('<div class="overflow-auto max-h-[500px]"><!></div>'),ir=P('<div class="mt-4 text-sm text-gray-600"> </div>'),cr=P('<p class="mt-2 text-sm text-gray-700"> </p>'),dr=P('<main class="min-h-screen bg-gray-50 p-6"><div class="max-w-7xl mx-auto"><div class="flex flex-wrap items-center justify-between gap-4 mb-6"><div class="flex items-center gap-4 flex-1"><!></div> <div class="flex gap-2"><!> <!></div></div> <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><!></div> <!></div> <form><div class="mt-4 max-w-7xl mx-auto mb-6"><textarea rows="5" class="block w-full p-4 text-gray-900 border border-gray-300 rounded-lg bg-white text-base resize-y" placeholder="Paste resignee details here..."></textarea> <div class="mt-4 flex justify-between items-center"><button type="submit" class="px-4.25 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition">Submit</button> <!></div> <!></div></form></main>');function yr(r,e){he(e,!1);let a=V([]),n=V([]),o=V(""),s=V(""),l="all",u=V(!0),m=V(""),i=V("");Ct(async()=>{(await fetch(`${ue}/check-auth`,{method:"GET",credentials:"include"})).ok||(console.log("Unauthorized. Redirecting to login."),nt("/")),await g()});async function g(){try{p(u,!0),p(o,""),console.log("Attempting to fetch from:",`${ue}/resignees`);const c=new AbortController,b=setTimeout(()=>c.abort(),1e4),k=await fetch(`${ue}/resignees`,{signal:c.signal,credentials:"include"});if(clearTimeout(b),console.log("Response status:",k.status),console.log("Response ok:",k.ok),!k.ok){const z=await k.text();throw console.log("Error response:",z),new Error(`HTTP ${k.status}: ${z}`)}const E=await k.json();console.log("Received data:",E),console.log("Data length:",E==null?void 0:E.length),p(a,E||[]),p(u,!1)}catch(c){console.error("Load employees error:",c),c instanceof Error?c.name==="AbortError"?p(o,"Request timed out. Please check if the server is running."):c.message.includes("fetch")?p(o,"Cannot connect to server. Please check if the server is running on http://localhost:8000"):p(o,c.message):p(o,"An unexpected error occurred"),p(u,!1)}}function Y(c){p(s,c.searchTerm)}function y(c){p(n,c.detail.filtered)}async function L(){if(t(m).trim())try{const c=await fetch(`${ue}/resignees`,{method:"POST",headers:{"Content-Type":"text/plain"},body:t(m),credentials:"include"});if(!c.ok){const b=await c.text();throw new Error(`HTTP error! status: ${c.status} - ${b}`)}await g(),p(m,"")}catch(c){c instanceof Error?p(i,`Error: ${c.message}`):p(i,`Error: ${String(c)}`)}}async function h(c){const{employee:b,action:k}=c.detail;try{let E,z;k?(E=k,z=k):b.processed_date_time?(E="unprocess",z="unprocess"):(E="process",z="process");const R=await fetch(`${ue}/resignees/${b.employee_no}/${E}`,{method:"PUT",credentials:"include"});if(!R.ok){const ve=await R.text();throw new Error(`Failed to ${z} employee: ${R.status} - ${ve}`)}await g();const ne=z==="process"?"processed":"unprocessed"}catch(E){const z=k||(b.processed_date_time?"unprocess":"process"),R=E instanceof Error?E.message:String(E);p(i,`Error ${z}ing employee: ${R}`)}}at(()=>(t(s),t(a)),()=>{const c={january:0,jan:0,february:1,feb:1,march:2,mar:2,april:3,apr:3,may:4,june:5,jun:5,july:6,jul:6,august:7,aug:7,september:8,sep:8,october:9,oct:9,november:10,nov:10,december:11,dec:11},b=t(s).toLowerCase().trim(),k=c[b];p(n,t(a).filter(E=>{E.processed_date_time;const z=l==="all",R=ke=>String(ke||"").toLowerCase().includes(b),ne=new Date(E.date_hired),ve=new Date(E.last_day),ye=k!==void 0&&(ne.getMonth()===k||ve.getMonth()===k);return(b===""||R(E.name)||R(E.employee_no)||R(E.department)||R(E.position_title)||ye)&&z}))}),rt(),xe();var O=dr();Kt(c=>{Gt.title="AUB Resignee Tracker"});var B=v(O),F=v(B),Z=v(F),H=v(Z);Ca(H,{onsearch:Y}),d(Z);var x=_(Z,2),T=v(x);er(T,{get employees(){return t(a)},$$events:{filter:y}});var le=_(T,2);ar(le,{}),d(x),d(F);var N=_(F,2),C=v(N);{var J=c=>{var b=nr();S(c,b)},q=(c,b)=>{{var k=z=>{var R=or(),ne=v(R),ve=v(ne);d(ne),d(R),de(()=>te(ve,`Error: ${t(o)??""}`)),S(z,R)},E=z=>{var R=lr(),ne=v(R);Sa(ne,{get employees(){return t(n)},onstatustoggle:h}),d(R),S(z,R)};j(c,z=>{t(o)?z(k):z(E,!1)},b)}};j(C,c=>{t(u)?c(J):c(q,!1)})}d(N);var I=_(N,2);{var ee=c=>{var b=ir(),k=v(b);d(b),de(()=>te(k,`Showing ${t(n).length??""} of ${t(a).length??""} employees`)),S(c,b)};j(I,c=>{!t(u)&&!t(o)&&c(ee)})}d(B);var ae=_(B,2),re=v(ae),se=v(re);Xt(se);var M=_(se,2),U=_(v(M),2);sr(U,{}),d(M);var $=_(M,2);{var W=c=>{var b=cr(),k=v(b,!0);d(b),de(()=>te(k,t(i))),S(c,b)};j($,c=>{t(i)&&c(W)})}d(re),d(ae),d(O),fe(se,()=>t(m),c=>p(m,c)),G("submit",ae,oa(L)),S(r,O),ge()}export{yr as component};
