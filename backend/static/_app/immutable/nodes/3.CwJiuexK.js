import{f as $,a as S,d as Q}from"../chunks/B5mZLFLJ.js";import{i as _e}from"../chunks/D6vZkVq1.js";import{c as Ct,o as Tt}from"../chunks/ZXQmN4nw.js";import{k as Me,h as oe,a8 as Nt,a7 as Mt,e as At,d as zt,g as t,P as Je,f as Ft,i as It,j as Pe,l as Ae,u as ge,an as Ut,n as Ke,o as Xe,q as Rt,aq as Qe,F as Ot,m as Z,aw as $e,ax as ze,aa as je,ay as Oe,az as Ve,aA as Bt,ad as Ht,aB as Pt,a6 as $t,aC as Be,aD as jt,ak as Vt,aE as et,L as Yt,aF as Zt,p as pe,aG as tt,b as p,B as qt,aH as at,c as v,s as _,r as c,aI as Ie,t as de,a as he,x as Wt,at as Ye,$ as Gt}from"../chunks/KKiNGECp.js";import{s as te,e as K,d as Jt,h as Kt,r as Xt}from"../chunks/CxMWnzkG.js";import{i as Y}from"../chunks/BOZlHw2i.js";import{r as ce,s as rt,b as fe,a as Qt,c as ea,B as ue}from"../chunks/Itg1Dbz2.js";import{g as st}from"../chunks/BBCAreqY.js";import{p as Ue,b as ta}from"../chunks/ZEJ93B6U.js";function Ze(r,e){return e}function aa(r,e,a,n){for(var o=[],s=e.length,l=0;l<s;l++)Bt(e[l].e,o,!0);var u=s>0&&o.length===0&&a!==null;if(u){var m=a.parentNode;Ht(m),m.append(a),n.clear(),ie(r,e[0].prev,e[s-1].next)}Pt(o,()=>{for(var i=0;i<s;i++){var g=e[i];u||(n.delete(g.k),ie(r,g.prev,g.next)),$t(g.e,!u)}})}function Re(r,e,a,n,o,s=null){var l=r,u={flags:e,items:new Map,first:null},m=(e&et)!==0;if(m){var i=r;l=oe?Me(Nt(i)):i.appendChild(Mt())}oe&&At();var g=null,q=!1,y=Je(()=>{var E=a();return Ot(E)?E:E==null?[]:Qe(E)});zt(()=>{var E=t(y),h=E.length;if(q&&h===0)return;q=h===0;let B=!1;if(oe){var H=Ft(l)===It;H!==(h===0)&&(l=Pe(),Me(l),Ae(!1),B=!0)}if(oe){for(var F=null,W,P=0;P<h;P++){if(ge.nodeType===8&&ge.data===Ut){l=ge,B=!0,Ae(!1);break}var x=E[P],C=n(x,P);W=nt(ge,u,F,null,x,C,P,o,e,a),u.items.set(C,W),F=W}h>0&&Me(Pe())}oe||ra(E,u,l,o,e,n,a),s!==null&&(h===0?g?Ke(g):g=Xe(()=>s(l)):g!==null&&Rt(g,()=>{g=null})),B&&Ae(!0),t(y)}),oe&&(l=ge)}function ra(r,e,a,n,o,s,l){var re,se,M,U;var u=(o&Zt)!==0,m=(o&(Be|Oe))!==0,i=r.length,g=e.items,q=e.first,y=q,E,h=null,B,H=[],F=[],W,P,x,C;if(u)for(C=0;C<i;C+=1)W=r[C],P=s(W,C),x=g.get(P),x!==void 0&&((re=x.a)==null||re.measure(),(B??(B=new Set)).add(x));for(C=0;C<i;C+=1){if(W=r[C],P=s(W,C),x=g.get(P),x===void 0){var le=y?y.e.nodes_start:a;h=nt(le,e,h,h===null?e.first:h.next,W,P,C,n,o,l),g.set(P,h),H=[],F=[],y=h.next;continue}if(m&&sa(x,W,C,o),(x.e.f&ze)!==0&&(Ke(x.e),u&&((se=x.a)==null||se.unfix(),(B??(B=new Set)).delete(x))),x!==y){if(E!==void 0&&E.has(x)){if(H.length<F.length){var N=F[0],T;h=N.prev;var X=H[0],G=H[H.length-1];for(T=0;T<H.length;T+=1)qe(H[T],N,a);for(T=0;T<F.length;T+=1)E.delete(F[T]);ie(e,X.prev,G.next),ie(e,h,X),ie(e,G,N),y=N,h=G,C-=1,H=[],F=[]}else E.delete(x),qe(x,y,a),ie(e,x.prev,x.next),ie(e,x,h===null?e.first:h.next),ie(e,h,x),h=x;continue}for(H=[],F=[];y!==null&&y.k!==P;)(y.e.f&ze)===0&&(E??(E=new Set)).add(y),F.push(y),y=y.next;if(y===null)continue;x=y}H.push(x),h=x,y=x.next}if(y!==null||E!==void 0){for(var I=E===void 0?[]:Qe(E);y!==null;)(y.e.f&ze)===0&&I.push(y),y=y.next;var ee=I.length;if(ee>0){var ae=(o&et)!==0&&i===0?a:null;if(u){for(C=0;C<ee;C+=1)(M=I[C].a)==null||M.measure();for(C=0;C<ee;C+=1)(U=I[C].a)==null||U.fix()}aa(e,I,ae,g)}}u&&Yt(()=>{var j;if(B!==void 0)for(x of B)(j=x.a)==null||j.apply()}),je.first=e.first&&e.first.e,je.last=h&&h.e}function sa(r,e,a,n){(n&Be)!==0&&Ve(r.v,e),(n&Oe)!==0?Ve(r.i,a):r.i=a}function nt(r,e,a,n,o,s,l,u,m,i){var g=(m&Be)!==0,q=(m&jt)===0,y=g?q?Z(o,!1,!1):$e(o):o,E=(m&Oe)===0?l:$e(l),h={i:E,v:y,k:s,a:null,e:null,prev:a,next:n};try{return h.e=Xe(()=>u(r,y,E,i),oe),h.e.prev=a&&a.e,h.e.next=n&&n.e,a===null?e.first=h:(a.next=h,a.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function qe(r,e,a){for(var n=r.next?r.next.e.nodes_start:a,o=e?e.e.nodes_start:a,s=r.e.nodes_start;s!==n;){var l=Vt(s);o.before(s),s=l}}function ie(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function na(r,e,a){var n=r==null?"":""+r;return n===""?null:n}function ot(r,e,a,n,o,s){var l=r.__className;if(oe||l!==a||l===void 0){var u=na(a);(!oe||u!==r.getAttribute("class"))&&(u==null?r.removeAttribute("class"):r.className=u),r.__className=a}return s}function oa(r){return function(...e){var a=e[0];return a.preventDefault(),r==null?void 0:r.apply(this,e)}}var la=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),ia=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),ca=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),da=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),va=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),ua=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),fa=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),pa=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),ha=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),ga=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),ma=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),_a=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),xa=Q('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),ya=Q('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),wa=Q('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),ba=$('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><input type="checkbox" class="w-5 h-5 text-green-600 rounded border-gray-300 focus:ring-green-500"/></td></tr>'),ka=$('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No employees found</h3></div>'),Da=$('<div class="overflow-x-auto"><table class="min-w-full text-sm text-left text-gray-700 bg-white"><thead class="bg-gray-100 text-xs text-gray-500 uppercase"><tr><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Employee no. <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Date hired <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Cost center</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Name <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Position title</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Rank</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Department <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Last day <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Mark as Processed</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table> <!></div>');function Sa(r,e){pe(e,!1);const a=Z();let n=Ue(e,"employees",24,()=>[]),o=Ue(e,"onstatustoggle",8),s=Z(""),l=Z("asc");function u(f){t(s)==f?p(l,t(l)==="asc"?"desc":"asc"):(p(s,f),p(l,"asc"))}function m(f){return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function i(f){f.processed_date_time,o()&&o()({detail:{employee:f}})}tt(()=>(qt(n()),t(s),t(l)),()=>{p(a,[...n()].sort((f,k)=>{if(!t(s))return 0;let R=f[t(s)],O=k[t(s)];return t(s)==="date_hired"||t(s)==="last_day"?(R=new Date(R),O=new Date(O)):t(s)==="employee_no"?(R=String(R||"").padStart(10,"0"),O=String(O||"").padStart(10,"0")):(R=String(R||"").toLowerCase(),O=String(O||"").toLowerCase()),R<O?t(l)==="asc"?-1:1:R>O?t(l)==="asc"?1:-1:0}))}),at(),_e();var g=Da(),q=v(g),y=v(q),E=v(y),h=v(E),B=v(h),H=_(v(B)),F=v(H);{var W=f=>{var k=la();S(f,k)},P=(f,k)=>{{var R=D=>{var z=ia();S(D,z)},O=D=>{var z=ca();S(D,z)};Y(f,D=>{t(s)==="employee_no"&&t(l)==="desc"?D(R):D(O,!1)},k)}};Y(F,f=>{t(s)==="employee_no"&&t(l)==="asc"?f(W):f(P,!1)})}c(H),c(B),c(h);var x=_(h),C=v(x),le=_(v(C)),N=v(le);{var T=f=>{var k=da();S(f,k)},X=(f,k)=>{{var R=D=>{var z=va();S(D,z)},O=D=>{var z=ua();S(D,z)};Y(f,D=>{t(s)==="date_hired"&&t(l)==="desc"?D(R):D(O,!1)},k)}};Y(N,f=>{t(s)==="date_hired"&&t(l)==="asc"?f(T):f(X,!1)})}c(le),c(C),c(x);var G=_(x,2),I=v(G),ee=_(v(I)),ae=v(ee);{var re=f=>{var k=fa();S(f,k)},se=(f,k)=>{{var R=D=>{var z=pa();S(D,z)},O=D=>{var z=ha();S(D,z)};Y(f,D=>{t(s)==="name"&&t(l)==="desc"?D(R):D(O,!1)},k)}};Y(ae,f=>{t(s)==="name"&&t(l)==="asc"?f(re):f(se,!1)})}c(ee),c(I),c(G);var M=_(G,3),U=v(M),j=_(v(U)),J=v(j);{var d=f=>{var k=ga();S(f,k)},w=(f,k)=>{{var R=D=>{var z=ma();S(D,z)},O=D=>{var z=_a();S(D,z)};Y(f,D=>{t(s)==="department"&&t(l)==="desc"?D(R):D(O,!1)},k)}};Y(J,f=>{t(s)==="department"&&t(l)==="asc"?f(d):f(w,!1)})}c(j),c(U),c(M);var b=_(M),L=v(b),A=_(v(L)),V=v(A);{var ne=f=>{var k=xa();S(f,k)},ve=(f,k)=>{{var R=D=>{var z=ya();S(D,z)},O=D=>{var z=wa();S(D,z)};Y(f,D=>{t(s)==="last_day"&&t(l)==="desc"?D(R):D(O,!1)},k)}};Y(V,f=>{t(s)==="last_day"&&t(l)==="asc"?f(ne):f(ve,!1)})}c(A),c(L),c(b),Ie(2),c(E),c(y);var xe=_(y);Re(xe,7,()=>t(a),f=>f.employee_no,(f,k)=>{var R=ba(),O=v(R),D=v(O,!0);c(O);var z=_(O),ut=v(z,!0);c(z);var be=_(z),ft=v(be,!0);c(be);var ke=_(be),pt=v(ke,!0);c(ke);var De=_(ke),ht=v(De,!0);c(De);var Se=_(De),gt=v(Se,!0);c(Se);var Ee=_(Se),mt=v(Ee,!0);c(Ee);var Le=_(Ee),_t=v(Le,!0);c(Le);var Ce=_(Le),Te=v(Ce),xt=v(Te,!0);c(Te),c(Ce);var He=_(Ce),Ne=v(He);ce(Ne),c(He),c(R),de((yt,wt,bt,kt,Dt,St,Et,Lt)=>{te(D,yt),te(ut,wt),te(ft,bt),te(pt,kt),te(ht,Dt),te(gt,St),te(mt,Et),te(_t,Lt),ot(Te,1,`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t(k).processed_date_time?"bg-[#CFEED8] text-[#1E9F37]":"bg-[#FED9DA] text-[#D7313E]"}`),te(xt,t(k).processed_date_time?"Processed":"Unprocessed"),rt(Ne,t(k).processed_date_time!==null)},[()=>String(t(k).employee_no||""),()=>m(t(k).date_hired),()=>String(t(k).cost_center||""),()=>String(t(k).name||""),()=>String(t(k).position_title||""),()=>String(t(k).rank||""),()=>String(t(k).department||""),()=>m(t(k).last_day)],Je),K("change",Ne,()=>i(t(k))),S(f,R)}),c(xe),c(q);var we=_(q,2);{var vt=f=>{var k=ka();S(f,k)};Y(we,f=>{t(a).length===0&&f(vt)})}c(g),K("click",h,()=>u("employee_no")),K("click",x,()=>u("date_hired")),K("click",G,()=>u("name")),K("click",M,()=>u("department")),K("click",b,()=>u("last_day")),S(r,g),he()}function Ea(r,e,a,n){var o;p(e,""),a(),(o=t(n))==null||o.focus()}var La=$('<div class="absolute inset-y-0 right-0 pr-3 flex items-center"><button class="text-gray-400 hover:text-gray-600 focus:outline-none transition-colors" aria-label="Clear search"><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ca=$('<div class="relative flex-1 min-w-[200px] max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-3xl"/> <!></div>');function Ta(r,e){pe(e,!0);let a=Ye(""),n=Ye(void 0);function o(){var i;(i=e.onsearch)==null||i.call(e,{searchTerm:t(a)})}Wt(()=>{o()});var s=Ca(),l=_(v(s),2);ce(l),l.__input=o,ta(l,i=>p(n,i),()=>t(n));var u=_(l,2);{var m=i=>{var g=La(),q=v(g);q.__click=[Ea,a,o,n],c(g),S(i,g)};Y(u,i=>{t(a)&&i(m)})}c(s),fe(l,()=>t(a),i=>p(a,i)),S(r,s),he()}Jt(["input","click"]);const lt=6e4,it=36e5,We=Symbol.for("constructDateFrom");function ct(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&We in r?r[We](e):r instanceof Date?new r.constructor(e):new Date(e)}function Ge(r,e){return ct(r,r)}function Na(r,e){const a=()=>ct(e==null?void 0:e.in,NaN),o=Fa(r);let s;if(o.date){const i=Ia(o.date,2);s=Ua(i.restDateString,i.year)}if(!s||isNaN(+s))return a();const l=+s;let u=0,m;if(o.time&&(u=Ra(o.time),isNaN(u)))return a();if(o.timezone){if(m=Oa(o.timezone),isNaN(m))return a()}else{const i=new Date(l+u),g=Ge(0);return g.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),g.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),g}return Ge(l+u+m)}const ye={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ma=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Aa=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,za=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Fa(r){const e={},a=r.split(ye.dateTimeDelimiter);let n;if(a.length>2)return e;if(/:/.test(a[0])?n=a[0]:(e.date=a[0],n=a[1],ye.timeZoneDelimiter.test(e.date)&&(e.date=r.split(ye.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const o=ye.timezone.exec(n);o?(e.time=n.replace(o[1],""),e.timezone=o[1]):e.time=n}return e}function Ia(r,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(a);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?o:s*100,restDateString:r.slice((n[1]||n[2]).length)}}function Ua(r,e){if(e===null)return new Date(NaN);const a=r.match(Ma);if(!a)return new Date(NaN);const n=!!a[4],o=me(a[1]),s=me(a[2])-1,l=me(a[3]),u=me(a[4]),m=me(a[5])-1;if(n)return ja(e,u,m)?Ba(e,u,m):new Date(NaN);{const i=new Date(0);return!Pa(e,s,l)||!$a(e,o)?new Date(NaN):(i.setUTCFullYear(e,s,Math.max(o,l)),i)}}function me(r){return r?parseInt(r):1}function Ra(r){const e=r.match(Aa);if(!e)return NaN;const a=Fe(e[1]),n=Fe(e[2]),o=Fe(e[3]);return Va(a,n,o)?a*it+n*lt+o*1e3:NaN}function Fe(r){return r&&parseFloat(r.replace(",","."))||0}function Oa(r){if(r==="Z")return 0;const e=r.match(za);if(!e)return 0;const a=e[1]==="+"?-1:1,n=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return Ya(n,o)?a*(n*it+o*lt):NaN}function Ba(r,e,a){const n=new Date(0);n.setUTCFullYear(r,0,4);const o=n.getUTCDay()||7,s=(e-1)*7+a+1-o;return n.setUTCDate(n.getUTCDate()+s),n}const Ha=[31,null,31,30,31,30,31,31,30,31,30,31];function dt(r){return r%400===0||r%4===0&&r%100!==0}function Pa(r,e,a){return e>=0&&e<=11&&a>=1&&a<=(Ha[e]||(dt(r)?29:28))}function $a(r,e){return e>=1&&e<=(dt(r)?366:365)}function ja(r,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function Va(r,e,a){return r===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&r>=0&&r<25}function Ya(r,e){return e>=0&&e<=59}var Za=$('<label class="field-option svelte-130yogc"><input type="radio" name="filter" class="svelte-130yogc"/> </label>'),qa=$('<div class="date-range svelte-130yogc"><input type="date" class="svelte-130yogc"/> <input type="date" class="svelte-130yogc"/></div>'),Wa=$('<div class="field-grid mb-2 svelte-130yogc" style="gap: 0.25rem 0.70rem;"><label class="field-option svelte-130yogc"><input type="radio" name="status-filter" value="processed" class="svelte-130yogc"/> <span class="inline-block px-5 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#CFEED8] text-[#1E9F37]">Processed</span></label> <label class="field-option svelte-130yogc"><input type="radio" name="status-filter" value="unprocessed" class="svelte-130yogc"/> <span class="inline-block px-3 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#FED9DA] text-[#D7313E]">Unprocessed</span></label></div>'),Ga=$('<div class="filter-input svelte-130yogc"><input type="text" class="w-full px-2 py-1 border rounded mb-0.25"/></div>'),Ja=$('<div class="filter-tag svelte-130yogc"> <button class="svelte-130yogc">×</button></div>'),Ka=$('<div class="active-filters svelte-130yogc"></div>'),Xa=$('<div class="dropdown-panel svelte-130yogc"><button class="close-button svelte-130yogc">✕</button> <div class="field-grid svelte-130yogc"></div> <hr class="divider svelte-130yogc"/> <!> <!></div>'),Qa=$('<div class="dropdown svelte-130yogc"><button class="filter-button svelte-130yogc"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-130yogc"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"></path></svg> Filter</button> <!></div>');function er(r,e){pe(e,!1);let a=Ue(e,"employees",24,()=>[]);const n=Ct();let o=Z(!1),s=Z(""),l=Z(""),u=Z(""),m=Z(""),i=Z([]);const g=["Employee No.","Date Hired","Cost Center","Name","Position","Rank","Department","Last Day","Status"];function q(){p(o,!t(o))}function y(N){p(s,N),p(l,""),p(u,""),p(m,"")}function E(){if(t(s)==="Date Hired"||t(s)==="Last Day"){if(t(u)&&t(m)){const N=new Date(t(u)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),T=new Date(t(m)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),X=`${N} to ${T}`;t(i).find(I=>I.field===t(s)&&I.value===X)||(p(i,[...t(i),{field:t(s),value:X}]),F()),p(s,""),p(u,""),p(m,"")}}else t(s)&&t(l)&&(t(i).find(T=>T.field===t(s)&&T.value===t(l))||(p(i,[...t(i),{field:t(s),value:t(l)}]),F()),p(s,""),p(l,""))}function h(N){p(i,t(i).filter((T,X)=>X!==N)),F()}function B(){p(o,!1),p(s,""),p(l,""),H()}function H(){p(i,[]),F()}function F(){let N=a();t(i).forEach(T=>{const X=W(T.field);N=N.filter(G=>{var ae;const I=(ae=G[X])==null?void 0:ae.toString().toLowerCase(),ee=T.value.toLowerCase();if(T.field==="Employee No."||T.field==="Cost Center")return I===ee;if(T.field==="Date Hired"||T.field==="Last Day"){const[re,se]=T.value.split(" to ");try{const M=Na(G[X]);return M>=new Date(re)&&M<=new Date(se)}catch{return!1}}return T.field==="Status"?(I?"processed":"unprocessed")===ee.toLowerCase():I==null?void 0:I.toString().toLowerCase().includes(ee)})}),n("filter",{filtered:N})}function W(N){return{"Employee No.":"employee_no","Date Hired":"date_hired","Cost Center":"cost_center",Name:"name",Position:"position_title",Rank:"rank",Department:"department","Last Day":"last_day",Status:"processed_date_time"}[N]||N}_e();var P=Qa(),x=v(P),C=_(x,2);{var le=N=>{var T=Xa(),X=v(T),G=_(X,2);Re(G,5,()=>g,Ze,(M,U)=>{var j=Za(),J=v(j);ce(J);var d=_(J);c(j),de(()=>{Qt(J,t(U)),rt(J,t(s)===t(U)),te(d,` ${t(U)??""}`)}),K("change",J,()=>y(t(U))),S(M,j)}),c(G);var I=_(G,4);{var ee=M=>{var U=qa(),j=v(U);ce(j);var J=_(j,2);ce(J),c(U),fe(j,()=>t(u),d=>p(u,d)),K("change",j,()=>{t(u)&&t(m)&&(E(),p(o,!1))}),fe(J,()=>t(m),d=>p(m,d)),K("change",J,()=>{t(u)&&t(m)&&(E(),p(o,!1))}),S(M,U)},ae=(M,U)=>{{var j=d=>{var w=Wa(),b=v(w),L=v(b);Ie(2),c(b);var A=_(b,2),V=v(A);Ie(2),c(A),c(w),K("change",L,()=>{p(l,"Processed"),E()}),K("change",V,()=>{p(l,"Unprocessed"),E()}),S(d,w)},J=d=>{var w=Ga(),b=v(w);ce(b),c(w),de(()=>ea(b,"placeholder",`Enter ${t(s)}...`)),fe(b,()=>t(l),L=>p(l,L)),K("keydown",b,L=>{L.key==="Enter"&&E()}),S(d,w)};Y(M,d=>{t(s)==="Status"?d(j):d(J,!1)},U)}};Y(I,M=>{t(s)==="Date Hired"||t(s)==="Last Day"?M(ee):M(ae,!1)})}var re=_(I,2);{var se=M=>{var U=Ka();Re(U,5,()=>t(i),Ze,(j,J,d)=>{var w=Ja(),b=v(w),L=_(b);c(w),de(()=>te(b,`${t(J).field??""} = ${t(J).value??""} `)),K("click",L,()=>h(d)),S(j,w)}),c(U),S(M,U)};Y(re,M=>{t(i).length>0&&M(se)})}c(T),K("click",X,B),S(N,T)};Y(C,N=>{t(o)&&N(le)})}c(P),K("click",x,q),S(r,P),he()}var tr=$('<div class="flex items-center gap-2"><label for="start-date" class="text-sm text-gray-600 font-[Open_Sans]">From:</label> <input id="start-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <label for="end-date" class="text-sm text-gray-600 font-[Open_Sans]">To:</label> <input id="end-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <button><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path></svg> Export</button></div>');function ar(r,e){pe(e,!1);let a=Z(""),n=Z(""),o=Z(!1);async function s(){if(!t(a)||!t(n)){alert("Please select both a start and end date.");return}try{const g=new Date(t(a)).toISOString(),q=new Date(t(n)).toISOString(),y=await fetch(`${ue}/resignees/report?start_date=${g}&end_date=${q}`,{credentials:"include"});if(!y.ok)throw new Error("Failed to fetch report from backend");const E=await y.blob(),h=URL.createObjectURL(E),B=document.createElement("a");B.href=h,B.download=`resignee_report_${t(a)}_to_${t(n)}.xlsx`,B.click(),URL.revokeObjectURL(h),p(o,!0)}catch(g){console.error("Error downloading backend report:",g),alert("No process dates were found within the specified date range")}}_e();var l=tr(),u=_(v(l),2);ce(u);var m=_(u,4);ce(m);var i=_(m,2);c(l),de(()=>ot(i,1,`flex items-center gap-2 px-4.25 py-1.75 rounded-md text-sm font-[Open_Sans] hover:bg-blue-600 transition ${t(o),"bg-blue-500 text-white"}`)),fe(u,()=>t(a),g=>p(a,g)),fe(m,()=>t(n),g=>p(n,g)),K("click",i,s),S(r,l),he()}var rr=$('<button class="flex items-center gap-2 px-3 py-1.75 bg-red-500 text-white rounded-md hover:bg-red-600 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"></path></svg> Logout</button>');function sr(r,e){pe(e,!1);async function a(){try{const o=await fetch(`${ue}/logout`,{method:"POST",credentials:"include"});if(!o.ok){const s=await o.text();console.error("Logout failed:",s);return}st("/")}catch(o){console.error("Logout error:",o)}}_e();var n=rr();K("click",n,a),S(r,n),he()}var nr=$('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600">Loading employees...</span></div>'),or=$('<div class="flex items-center justify-center py-12"><div class="text-red-600 bg-red-50 px-4 py-2 rounded-lg"> </div></div>'),lr=$('<div class="overflow-auto max-h-[500px]"><!></div>'),ir=$('<div class="mt-4 text-sm text-gray-600"> </div>'),cr=$('<p class="mt-2 text-sm text-gray-700"> </p>'),dr=$('<main class="min-h-screen bg-gray-50 p-6"><div class="max-w-7xl mx-auto"><div class="flex flex-wrap items-center justify-between gap-4 mb-6"><div class="flex items-center gap-4 flex-1"><!></div> <div class="flex gap-2"><!> <!></div></div> <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><!></div> <!></div> <form><div class="mt-4 max-w-7xl mx-auto mb-6"><textarea rows="5" class="block w-full p-4 text-gray-900 border border-gray-300 rounded-lg bg-white text-base resize-y" placeholder="Paste resignee details here..."></textarea> <div class="mt-4 flex justify-between items-center"><button type="submit" class="px-4.25 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition">Submit</button> <!></div> <!></div></form></main>');function yr(r,e){pe(e,!1);let a=Z([]),n=Z([]),o=Z(""),s=Z(""),l="all",u=Z(!0),m=Z(""),i=Z("");Tt(async()=>{(await fetch(`${ue}/check-auth`,{method:"GET",credentials:"include"})).ok||(console.log("Unauthorized. Redirecting to login."),st("/")),await g()});async function g(){try{p(u,!0),p(o,""),console.log("Attempting to fetch from:",`${ue}/resignees`);const d=new AbortController,w=setTimeout(()=>d.abort(),1e4),b=await fetch(`${ue}/resignees`,{signal:d.signal,credentials:"include"});if(clearTimeout(w),console.log("Response status:",b.status),console.log("Response ok:",b.ok),!b.ok){const A=await b.text();throw console.log("Error response:",A),new Error(`HTTP ${b.status}: ${A}`)}const L=await b.json();console.log("Received data:",L),console.log("Data length:",L==null?void 0:L.length),p(a,L||[]),p(u,!1)}catch(d){console.error("Load employees error:",d),d.name==="AbortError"?p(o,"Request timed out. Please check if the server is running."):d.message.includes("fetch")?p(o,"Cannot connect to server. Please check if the server is running on http://localhost:8000"):p(o,d.message),p(u,!1)}}function q(d){p(s,d.searchTerm)}function y(d){p(n,d.detail.filtered)}async function E(){if(t(m).trim())try{const d=await fetch(`${ue}/resignees`,{method:"POST",headers:{"Content-Type":"text/plain"},body:t(m),credentials:"include"});if(!d.ok){const w=await d.text();throw new Error(`HTTP error! status: ${d.status} - ${w}`)}await g(),p(m,"")}catch(d){p(i,`Error: ${d.message}`)}}async function h(d){const{employee:w,action:b}=d.detail;try{let L,A;b?(L=b,A=b):w.processed_date_time?(L="unprocess",A="unprocess"):(L="process",A="process");const V=await fetch(`${ue}/resignees/${w.employee_no}/${L}`,{method:"PUT",credentials:"include"});if(!V.ok){const ve=await V.text();throw new Error(`Failed to ${A} employee: ${V.status} - ${ve}`)}await g();const ne=A==="process"?"processed":"unprocessed"}catch(L){const A=b||(w.processed_date_time?"unprocess":"process");p(i,`Error ${A}ing employee: ${L.message}`)}}tt(()=>(t(s),t(a)),()=>{const d={january:0,jan:0,february:1,feb:1,march:2,mar:2,april:3,apr:3,may:4,june:5,jun:5,july:6,jul:6,august:7,aug:7,september:8,sep:8,october:9,oct:9,november:10,nov:10,december:11,dec:11},w=t(s).toLowerCase().trim(),b=d[w];p(n,t(a).filter(L=>{L.processed_date_time;const A=l==="all",V=we=>String(we||"").toLowerCase().includes(w),ne=new Date(L.date_hired),ve=new Date(L.last_day),xe=b!==void 0&&(ne.getMonth()===b||ve.getMonth()===b);return(w===""||V(L.name)||V(L.employee_no)||V(L.department)||V(L.position_title)||xe)&&A}))}),at(),_e();var B=dr();Kt(d=>{Gt.title="AUB Resignee Tracker"});var H=v(B),F=v(H),W=v(F),P=v(W);Ta(P,{onsearch:q}),c(W);var x=_(W,2),C=v(x);er(C,{get employees(){return t(a)},$$events:{filter:y}});var le=_(C,2);ar(le,{get data(){return t(a)}}),c(x),c(F);var N=_(F,2),T=v(N);{var X=d=>{var w=nr();S(d,w)},G=(d,w)=>{{var b=A=>{var V=or(),ne=v(V),ve=v(ne);c(ne),c(V),de(()=>te(ve,`Error: ${t(o)??""}`)),S(A,V)},L=A=>{var V=lr(),ne=v(V);Sa(ne,{get employees(){return t(n)},onstatustoggle:h}),c(V),S(A,V)};Y(d,A=>{t(o)?A(b):A(L,!1)},w)}};Y(T,d=>{t(u)?d(X):d(G,!1)})}c(N);var I=_(N,2);{var ee=d=>{var w=ir(),b=v(w);c(w),de(()=>te(b,`Showing ${t(n).length??""} of ${t(a).length??""} employees`)),S(d,w)};Y(I,d=>{!t(u)&&!t(o)&&d(ee)})}c(H);var ae=_(H,2),re=v(ae),se=v(re);Xt(se);var M=_(se,2),U=_(v(M),2);sr(U,{}),c(M);var j=_(M,2);{var J=d=>{var w=cr(),b=v(w,!0);c(w),de(()=>te(b,t(i))),S(d,w)};Y(j,d=>{t(i)&&d(J)})}c(re),c(ae),c(B),fe(se,()=>t(m),d=>p(m,d)),K("submit",ae,oa(E)),S(r,B),he()}export{yr as component};
