import{f as I,a as x,c as Pe,t as _a,d as se}from"../chunks/-YDB1Qrx.js";import{i as ze}from"../chunks/mf5nRAlo.js";import{d as ya,g as rt,w as It,a as Ft,o as ct,c as ba}from"../chunks/x0cCCebV.js";import{k as $e,h as ke,a6 as xa,a5 as wa,e as ka,d as Da,g as r,R as st,f as Sa,i as Ea,j as wt,l as et,u as Le,an as Ta,n as Rt,o as Ut,q as La,aq as Pt,a4 as Ca,m as Z,aB as kt,aC as tt,a8 as Dt,aD as dt,aE as St,aF as za,af as Ma,aG as Na,I as Aa,aH as ut,aI as Ia,ak as Fa,aJ as Ht,L as Ra,aK as Ua,t as $,p as de,F as ye,ae,a as ue,c as m,r as p,s as k,V as Pa,G as Ot,aL as Ha,ac as nt,b as y,aM as ot,B as Et,aN as Bt,aO as Oa,aP as it,aQ as Tt,x as Ba,$ as ja}from"../chunks/BPGgEwod.js";import{s as ee,e as Y,d as Va,h as Ya,r as Wa}from"../chunks/C82ULeJa.js";import{i as H}from"../chunks/BTp-HuKB.js";import{s as Ee,a as qa,c as Me,r as pe,d as jt,b as be,B as _e,e as Za,f as Qa}from"../chunks/CEf9J8Eu.js";import{g as lt}from"../chunks/DoC_fWcv.js";import{p as ie,c as vt,s as Re,b as He,a as Ga,d as Ka}from"../chunks/DOO-nbdg.js";function Lt(t,e){return e}function Ja(t,e,a,s){for(var n=[],o=e.length,l=0;l<o;l++)za(e[l].e,n,!0);var u=o>0&&n.length===0&&a!==null;if(u){var v=a.parentNode;Ma(v),v.append(a),s.clear(),ge(t,e[0].prev,e[o-1].next)}Na(n,()=>{for(var i=0;i<o;i++){var d=e[i];u||(s.delete(d.k),ge(t,d.prev,d.next)),Aa(d.e,!u)}})}function Oe(t,e,a,s,n,o=null){var l=t,u={flags:e,items:new Map,first:null},v=(e&Ht)!==0;if(v){var i=t;l=ke?$e(xa(i)):i.appendChild(wa())}ke&&ka();var d=null,w=!1,g=st(()=>{var c=a();return Ca(c)?c:c==null?[]:Pt(c)});Da(()=>{var c=r(g),h=c.length;if(w&&h===0)return;w=h===0;let S=!1;if(ke){var T=Sa(l)===Ea;T!==(h===0)&&(l=wt(),$e(l),et(!1),S=!0)}if(ke){for(var L=null,R,O=0;O<h;O++){if(Le.nodeType===8&&Le.data===Ta){l=Le,S=!0,et(!1);break}var E=c[O],C=s(E,O);R=Vt(Le,u,L,null,E,C,O,n,e,a),u.items.set(C,R),L=R}h>0&&$e(wt())}ke||Xa(c,u,l,n,e,s,a),o!==null&&(h===0?d?Rt(d):d=Ut(()=>o(l)):d!==null&&La(d,()=>{d=null})),S&&et(!0),r(g)}),ke&&(l=Le)}function Xa(t,e,a,s,n,o,l){var le,ce,q,K;var u=(n&Ua)!==0,v=(n&(ut|dt))!==0,i=t.length,d=e.items,w=e.first,g=w,c,h=null,S,T=[],L=[],R,O,E,C;if(u)for(C=0;C<i;C+=1)R=t[C],O=o(R,C),E=d.get(O),E!==void 0&&((le=E.a)==null||le.measure(),(S??(S=new Set)).add(E));for(C=0;C<i;C+=1){if(R=t[C],O=o(R,C),E=d.get(O),E===void 0){var ne=g?g.e.nodes_start:a;h=Vt(ne,e,h,h===null?e.first:h.next,R,O,C,s,n,l),d.set(O,h),T=[],L=[],g=h.next;continue}if(v&&$a(E,R,C,n),(E.e.f&tt)!==0&&(Rt(E.e),u&&((ce=E.a)==null||ce.unfix(),(S??(S=new Set)).delete(E))),E!==g){if(c!==void 0&&c.has(E)){if(T.length<L.length){var F=L[0],N;h=F.prev;var G=T[0],W=T[T.length-1];for(N=0;N<T.length;N+=1)Ct(T[N],F,a);for(N=0;N<L.length;N+=1)c.delete(L[N]);ge(e,G.prev,W.next),ge(e,h,G),ge(e,W,F),g=F,h=W,C-=1,T=[],L=[]}else c.delete(E),Ct(E,g,a),ge(e,E.prev,E.next),ge(e,E,h===null?e.first:h.next),ge(e,h,E),h=E;continue}for(T=[],L=[];g!==null&&g.k!==O;)(g.e.f&tt)===0&&(c??(c=new Set)).add(g),L.push(g),g=g.next;if(g===null)continue;E=g}T.push(E),h=E,g=E.next}if(g!==null||c!==void 0){for(var Q=c===void 0?[]:Pt(c);g!==null;)(g.e.f&tt)===0&&Q.push(g),g=g.next;var oe=Q.length;if(oe>0){var te=(n&Ht)!==0&&i===0?a:null;if(u){for(C=0;C<oe;C+=1)(q=Q[C].a)==null||q.measure();for(C=0;C<oe;C+=1)(K=Q[C].a)==null||K.fix()}Ja(e,Q,te,d)}}u&&Ra(()=>{var J;if(S!==void 0)for(E of S)(J=E.a)==null||J.apply()}),Dt.first=e.first&&e.first.e,Dt.last=h&&h.e}function $a(t,e,a,s){(s&ut)!==0&&St(t.v,e),(s&dt)!==0?St(t.i,a):t.i=a}function Vt(t,e,a,s,n,o,l,u,v,i){var d=(v&ut)!==0,w=(v&Ia)===0,g=d?w?Z(n,!1,!1):kt(n):n,c=(v&dt)===0?l:kt(l),h={i:c,v:g,k:o,a:null,e:null,prev:a,next:s};try{return h.e=Ut(()=>u(t,g,c,i),ke),h.e.prev=a&&a.e,h.e.next=s&&s.e,a===null?e.first=h:(a.next=h,a.e.next=h.e),s!==null&&(s.prev=h,s.e.prev=h.e),h}finally{}}function Ct(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,o=t.e.nodes_start;o!==s;){var l=Fa(o);n.before(o),o=l}}function ge(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function er(t){return function(...e){var a=e[0];return a.preventDefault(),t==null?void 0:t.apply(this,e)}}function tr(t,e,a,s){var n,o,l=!1,u=a.length>=2,v=(h,S,T)=>{if(n=S,u&&(o=h),!l){let L=e(h,S,T);if(e.length<2)S(L);else return L}l=!1},i=ya(t,v,s),d=!Array.isArray(t);function w(h){var S=a(h,o);d?(l=!0,t.set(S)):S.forEach((T,L)=>{l=!0,t[L].set(T)}),l=!1}var g=!1;function c(h){var S,T,L,R;if(g){R=h(rt(i)),n(R);return}var O=i.subscribe(E=>{g?S?T=!0:S=!0:L=E});R=h(L),g=!0,n(R),O(),g=!1,T&&(R=rt(i)),S&&w(R)}return{subscribe:i.subscribe,set(h){c(()=>h)},update:c}}const ar=20,De=It([]),ft=It(null),Ue=new Map,zt=t=>{if(Ue.has(t))return;const e=setTimeout(()=>{Ue.delete(t),Wt(t)},1e3);Ue.set(t,e)},rr=t=>{const e=Ue.get(t);e&&clearTimeout(e)};function Yt(t,e=!0){e&&t.id&&rr(t.id),De.update(a=>a.map(s=>s.id===t.id?{...s,...t}:s))}function sr(t){De.update(e=>[t,...e].slice(0,ar))}function nr(t){rt(De).find(e=>e.id===t.id)?Yt(t):sr(t)}function or(t){De.update(e=>(t?zt(t):e.forEach(a=>{zt(a.id)}),e.map(a=>a.id===t||t===void 0?{...a,visible:!1}:a)))}function Wt(t){De.update(e=>t===void 0?[]:e.filter(a=>a.id!==t))}function ir(t){ft.set(t)}function lr(t){let e;ft.update(a=>(e=t-(a||0),null)),De.update(a=>a.map(s=>({...s,pauseDuration:s.pauseDuration+e})))}const cr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function dr(t={}){return{toasts:tr(De,a=>a.map(s=>{var n,o;return{...t,...t[s.type],...s,duration:s.duration||((n=t[s.type])==null?void 0:n.duration)||(t==null?void 0:t.duration)||cr[s.type],style:[t.style,(o=t[s.type])==null?void 0:o.style,s.style].join(";")}}),a=>a),pausedAt:ft}}const ur=t=>typeof t=="function",Mt=(t,e)=>ur(t)?t(e):t,vr=(()=>{let t=0;return()=>(t+=1,t.toString())})(),qt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),fr=(t,e="blank",a)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,icon:a==null?void 0:a.icon,duration:a==null?void 0:a.duration,iconTheme:a==null?void 0:a.iconTheme,position:a==null?void 0:a.position,props:a==null?void 0:a.props,id:(a==null?void 0:a.id)||vr()}),Ne=t=>(e,a)=>{const s=fr(e,t,a);return nr(s),s.id},re=(t,e)=>Ne("blank")(t,e);re.error=Ne("error");re.success=Ne("success");re.loading=Ne("loading");re.custom=Ne("custom");re.dismiss=t=>{or(t)};re.remove=t=>Wt(t);re.promise=(t,e,a)=>{const s=re.loading(e.loading,{...a,...a==null?void 0:a.loading});return t.then(n=>(re.success(Mt(e.success,n),{id:s,...a,...a==null?void 0:a.success}),n)).catch(n=>{re.error(Mt(e.error,n),{id:s,...a,...a==null?void 0:a.error})}),t};function pr(t,e,a){const{reverseOrder:s,gutter:n=8,defaultPosition:o}=a||{},l=e.filter(d=>(d.position||o)===(t.position||o)&&d.height),u=l.findIndex(d=>d.id===t.id),v=l.filter((d,w)=>w<u&&d.visible).length;return l.filter(d=>d.visible).slice(...s?[v+1]:[0,v]).reduce((d,w)=>d+(w.height||0)+n,0)}const hr={startPause(){ir(Date.now())},endPause(){lr(Date.now())},updateHeight:(t,e)=>{Yt({id:t,height:e},!1)},calculateOffset:pr};function mr(t){const{toasts:e,pausedAt:a}=dr(t),s=new Map;let n;const o=[a.subscribe(l=>{if(l){for(const[,u]of s)clearTimeout(u);s.clear()}n=l}),e.subscribe(l=>{if(n)return;const u=Date.now();for(const v of l){if(s.has(v.id)||v.duration===1/0)continue;const i=(v.duration||0)+v.pauseDuration-(u-v.createdAt);if(i<0)return v.visible&&re.dismiss(v.id),null;s.set(v.id,setTimeout(()=>re.dismiss(v.id),i))}})];return Ft(()=>{for(const l of o)l()}),{toasts:e,handlers:hr}}var gr=I('<div class="svelte-11kvm4p"></div>');function _r(t,e){let a=ie(e,"primary",3,"#61d345"),s=ie(e,"secondary",3,"#fff");var n=gr();let o;$(()=>o=Ee(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var yr=I('<div class="svelte-1ee93ns"></div>');function br(t,e){let a=ie(e,"primary",3,"#ff4b4b"),s=ie(e,"secondary",3,"#fff");var n=yr();let o;$(()=>o=Ee(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var xr=I('<div class="svelte-1j7dflg"></div>');function wr(t,e){let a=ie(e,"primary",3,"#616161"),s=ie(e,"secondary",3,"#e0e0e0");var n=xr();let o;$(()=>o=Ee(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var kr=I('<div class="animated svelte-1kgeier"> </div>'),Dr=I('<div class="status svelte-1kgeier"><!></div>'),Sr=I('<div class="indicator svelte-1kgeier"><!> <!></div>');function Zt(t,e){de(e,!0);let a=ae(()=>e.toast.type),s=ae(()=>e.toast.icon),n=ae(()=>e.toast.iconTheme);var o=Pe(),l=ye(o);{var u=i=>{var d=kr(),w=m(d,!0);p(d),$(()=>ee(w,r(s))),x(i,d)},v=(i,d)=>{{var w=c=>{var h=Pe(),S=ye(h);vt(S,()=>r(s),(T,L)=>{L(T,{})}),x(c,h)},g=(c,h)=>{{var S=T=>{var L=Sr(),R=m(L);wr(R,Re(()=>r(n)));var O=k(R,2);{var E=C=>{var ne=Dr(),F=m(ne);{var N=W=>{br(W,Re(()=>r(n)))},G=W=>{_r(W,Re(()=>r(n)))};H(F,W=>{r(a)==="error"?W(N):W(G,!1)})}p(ne),x(C,ne)};H(O,C=>{r(a)!=="loading"&&C(E)})}p(L),x(T,L)};H(c,T=>{r(a)!=="blank"&&T(S)},h)}};H(i,c=>{typeof r(s)<"u"?c(w):c(g,!1)},d)}};H(l,i=>{typeof r(s)=="string"?i(u):i(v,!1)})}x(t,o),ue()}var Er=I("<div><!></div>");function pt(t,e){de(e,!0);let a=Pa(e.toast.message);var s=Er();qa(s,()=>({class:"message",...e.toast.ariaProps}),void 0,"svelte-1nauejd");var n=m(s);{var o=u=>{var v=_a();$(()=>ee(v,e.toast.message)),x(u,v)},l=u=>{var v=Pe(),i=ye(v);vt(i,()=>a,(d,w)=>{w(d,Re({get toast(){return e.toast}},()=>e.toast.props))}),x(u,v)};H(n,u=>{typeof e.toast.message=="string"?u(o):u(l,!1)})}p(s),x(t,s),ue()}const Tr=(t,e=Ot)=>{var a=Lr(),s=ye(a);Zt(s,{get toast(){return e().toast}});var n=k(s,2);pt(n,{get toast(){return e().toast}}),x(t,a)};var Lr=I("<!> <!>",1),Cr=I("<div><!></div>");function zr(t,e){de(e,!0);let a=ie(e,"position",3,void 0),s=ie(e,"Component",3,void 0),n=ae(()=>(e.toast.position||a()||"top-center").includes("top")),o=ae(()=>r(n)?1:-1);const l=ae(()=>qt()?["fadeIn","fadeOut"]:["enter","exit"]),u=ae(()=>Ha(r(l),2)),v=ae(()=>r(u)[0]),i=ae(()=>r(u)[1]);let d=ae(()=>e.toast.visible?r(v):r(i));var w=Cr();let g;var c=m(w);{var h=T=>{var L=Pe(),R=ye(L);vt(R,s,(O,E)=>{E(O,{$$slots:{icon:(C,ne)=>{Zt(C,{get toast(){return e.toast},slot:"icon"})},message:(C,ne)=>{pt(C,{get toast(){return e.toast},slot:"message"})}}})}),x(T,L)},S=T=>{Tr(T,()=>({toast:e.toast}))};H(c,T=>{s()?T(h):T(S,!1)})}p(w),$(()=>{Me(w,1,`base ${(e.toast.height?r(d):"transparent")??""} ${(e.toast.className||"")??""}`,"svelte-1c9srrs"),g=Ee(w,e.toast.style,g,{"--factor":r(o)})}),x(t,w),ue()}const Mr=(t,e=Ot)=>{zr(t,{get toast(){return e().toast},get position(){return e().toast.position}})};var Nr=I("<div><!></div>");function Ar(t,e){de(e,!0);let a=nt(void 0);ct(()=>{var c,h,S;(S=e.setHeight)==null||S.call(e,(h=(c=r(a))==null?void 0:c.getBoundingClientRect())==null?void 0:h.height)});let s=ae(()=>{var c;return(c=e.toast.position)!=null&&c.includes("top")?0:null}),n=ae(()=>{var c;return(c=e.toast.position)!=null&&c.includes("bottom")?0:null}),o=ae(()=>{var c;return(c=e.toast.position)!=null&&c.includes("top")?1:-1}),l=ae(()=>{var c,h,S;return((c=e.toast.position)==null?void 0:c.includes("center"))&&"center"||(((h=e.toast.position)==null?void 0:h.includes("right"))||((S=e.toast.position)==null?void 0:S.includes("end")))&&"flex-end"||null});var u=Nr();let v,i;var d=m(u);{var w=c=>{pt(c,{get toast(){return e.toast}})},g=c=>{Mr(c,()=>({toast:e.toast}))};H(d,c=>{e.toast.type==="custom"?c(w):c(g,!1)})}p(u),He(u,c=>y(a,c),()=>r(a)),$(c=>{v=Me(u,1,"wrapper svelte-v01oml",null,v,c),i=Ee(u,"",i,{"--factor":r(o),"--offset":e.toast.offset,top:r(s),bottom:r(n),"justify-content":r(l)})},[()=>({active:e.toast.visible,transition:!qt()})]),x(t,u),ue()}var Ir=I('<div role="alert"></div>');function Fr(t,e){de(e,!0);const[a,s]=Ga(),n=()=>Ka(v,"$toasts",a);let o=ie(e,"reverseOrder",3,!1),l=ie(e,"position",3,"top-center"),u=ie(e,"gutter",3,8);const{toasts:v,handlers:i}=mr(e.toastOptions);let d=ae(()=>n().map(g=>({...g,position:g.position||l(),offset:i.calculateOffset(g,n(),{reverseOrder:o(),gutter:u(),defaultPosition:l()})})));var w=Ir();Oe(w,21,()=>r(d),g=>g.id,(g,c)=>{Ar(g,{get toast(){return r(c)},setHeight:h=>i.updateHeight(r(c).id,h??0)})}),p(w),$(()=>{Me(w,1,`toaster ${(e.containerClassName||"")??""}`,"svelte-1phplh9"),Ee(w,e.containerStyle)}),Y("mouseenter",w,function(...g){var c;(c=i.startPause)==null||c.apply(this,g)}),Y("mouseleave",w,function(...g){var c;(c=i.endPause)==null||c.apply(this,g)}),x(t,w),ue(),s()}var Rr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Ur=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Pr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Hr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Or=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Br=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),jr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Vr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Yr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Wr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),qr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Zr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Qr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Gr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Kr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Jr=I('<input type="date" class="text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <button type="button" class="text-green-600 hover:text-green-800 transition-colors" title="Save changes"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></button>',1),Xr=I('<span class="flex-1"> </span> <button type="button" class="text-gray-400 hover:text-gray-600 transition-colors" title="Edit last day"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button>',1),$r=I('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><div class="flex items-center gap-2"><!></div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><input type="checkbox" class="w-5 h-5 text-green-600 rounded border-gray-300 focus:ring-green-500"/></td></tr>'),es=I('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No employees found</h3></div>'),ts=I('<!> <div class="relative"><div class="overflow-auto" style="scroll-behavior: auto;"><table class="min-w-full text-sm text-left text-gray-700 bg-white"><thead class="bg-gray-100 text-xs text-gray-500 uppercase"><tr><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Employee no. <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Date hired <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Cost center</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Name <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Position title</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Rank</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Department <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Last day <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Mark as Processed</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table> <!></div> <div class="sticky bottom-0 overflow-x-auto overflow-y-hidden bg-gray-50 border-t border-gray-300 h-5 scrollbar-container" style="scroll-behavior: auto;"><div class="h-5 w-full min-w-[800px]"></div></div></div>',1);function as(t,e){de(e,!1);const a=Z();let s=ie(e,"employees",28,()=>[]),n=ie(e,"onstatustoggle",8),o=Z(""),l=Z("asc"),u=Z(null),v=Z(""),i=Z(),d=Z(),w,g=null;function c(f){r(o)==f?y(l,r(l)==="asc"?"desc":"asc"):(y(o,f),y(l,"asc"))}function h(f){return f?new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function S(f){if(!f)return"";const b=new Date(f),P=b.getFullYear(),V=String(b.getMonth()+1).padStart(2,"0"),D=String(b.getDate()).padStart(2,"0");return`${P}-${V}-${D}`}function T(f){y(u,f.employee_no),y(v,S(f.last_day))}async function L(f){try{const b=r(v).trim(),P=new Date(b);if(!b||isNaN(P.getTime()))throw new Error("Invalid date format");const V=await fetch(`${_e}/resignees/${f.employee_no}/last_day/edit`,{method:"PUT",headers:{"Content-Type":"text/plain"},body:b,credentials:"include"});if(!V.ok){const U=await V.text();throw new Error(`Error ${V.status}: ${U}`)}const D=s().findIndex(U=>U.employee_no===f.employee_no);D!==-1&&(s(s()[D].last_day=P.toISOString(),!0),s([...s()]),re.success("Changes saved for employee no. "+f.employee_no))}catch(b){console.error("Error updating last day:",b);const P=b instanceof Error?b.message:"Unknown error";alert(`Failed to update last day: ${P}`)}finally{y(u,null),y(v,"")}}function R(){y(u,null),y(v,"")}function O(f){const P=(f.processed_date_time?"processed":"unprocessed")==="processed"?"unprocess":"process";n()&&n()({detail:{employee:f,action:P}}),setTimeout(()=>{P==="process"?re.success("Employee no. "+f.employee_no+" marked as processed"):re.success("Employee no. "+f.employee_no+" marked as unprocessed")},300)}function E(f){f.key==="Escape"&&R()}async function C(){if(r(i)&&r(d)){const f=()=>{r(d)&&Tt(d,r(d).scrollLeft=r(i).scrollLeft)},b=()=>{r(i)&&Tt(i,r(i).scrollLeft=r(d).scrollLeft)};r(i).addEventListener("scroll",f),r(d).addEventListener("scroll",b),w=()=>{var V;const P=(V=r(i))==null?void 0:V.querySelector("table");if(P&&r(d)){const D=r(d).querySelector("div");D&&(D.style.width=P.scrollWidth+"px")}},w(),g&&g.disconnect(),g=new MutationObserver(w),g.observe(r(i),{childList:!0,subtree:!0})}}ct(()=>(typeof window<"u"&&window.addEventListener("resize",()=>{w&&w()}),()=>{typeof window<"u"&&w&&window.removeEventListener("resize",w)})),Ft(()=>{g&&g.disconnect()}),ot(()=>(Et(s()),r(o),r(l)),()=>{y(a,[...s()].sort((f,b)=>{if(!r(o))return 0;let P=f[r(o)],V=b[r(o)];if(r(o)==="date_hired"||r(o)==="last_day"){const Ie=new Date(P||"1900-01-01"),Se=new Date(V||"1900-01-01");return Ie<Se?r(l)==="asc"?-1:1:Ie>Se?r(l)==="asc"?1:-1:0}const D=String(P||""),U=String(V||"");return D<U?r(l)==="asc"?-1:1:D>U?r(l)==="asc"?1:-1:0}))}),ot(()=>(Et(s()),r(i),r(d)),()=>{s()&&r(i)&&r(d)&&setTimeout(async()=>await C(),50)}),Bt(),ze();var ne=ts();Y("keydown",Oa,E);var F=ye(ne);Fr(F,{});var N=k(F,2),G=m(N),W=m(G),Q=m(W),oe=m(Q),te=m(oe),le=m(te),ce=k(m(le)),q=m(ce);{var K=f=>{var b=Rr();x(f,b)},J=(f,b)=>{{var P=D=>{var U=Ur();x(D,U)},V=D=>{var U=Pr();x(D,U)};H(f,D=>{r(o)==="employee_no"&&r(l)==="desc"?D(P):D(V,!1)},b)}};H(q,f=>{r(o)==="employee_no"&&r(l)==="asc"?f(K):f(J,!1)})}p(ce),p(le),p(te);var X=k(te),_=m(X),z=k(m(_)),A=m(z);{var M=f=>{var b=Hr();x(f,b)},B=(f,b)=>{{var P=D=>{var U=Or();x(D,U)},V=D=>{var U=Br();x(D,U)};H(f,D=>{r(o)==="date_hired"&&r(l)==="desc"?D(P):D(V,!1)},b)}};H(A,f=>{r(o)==="date_hired"&&r(l)==="asc"?f(M):f(B,!1)})}p(z),p(_),p(X);var j=k(X,2),ve=m(j),he=k(m(ve)),Be=m(he);{var je=f=>{var b=jr();x(f,b)},Xt=(f,b)=>{{var P=D=>{var U=Vr();x(D,U)},V=D=>{var U=Yr();x(D,U)};H(f,D=>{r(o)==="name"&&r(l)==="desc"?D(P):D(V,!1)},b)}};H(Be,f=>{r(o)==="name"&&r(l)==="asc"?f(je):f(Xt,!1)})}p(he),p(ve),p(j);var Ae=k(j,3),ht=m(Ae),mt=k(m(ht)),$t=m(mt);{var ea=f=>{var b=Wr();x(f,b)},ta=(f,b)=>{{var P=D=>{var U=qr();x(D,U)},V=D=>{var U=Zr();x(D,U)};H(f,D=>{r(o)==="department"&&r(l)==="desc"?D(P):D(V,!1)},b)}};H($t,f=>{r(o)==="department"&&r(l)==="asc"?f(ea):f(ta,!1)})}p(mt),p(ht),p(Ae);var Ve=k(Ae),gt=m(Ve),_t=k(m(gt)),aa=m(_t);{var ra=f=>{var b=Qr();x(f,b)},sa=(f,b)=>{{var P=D=>{var U=Gr();x(D,U)},V=D=>{var U=Kr();x(D,U)};H(f,D=>{r(o)==="last_day"&&r(l)==="desc"?D(P):D(V,!1)},b)}};H(aa,f=>{r(o)==="last_day"&&r(l)==="asc"?f(ra):f(sa,!1)})}p(_t),p(gt),p(Ve),it(2),p(oe),p(Q);var yt=k(Q);Oe(yt,7,()=>r(a),f=>f.employee_no,(f,b)=>{var P=$r(),V=m(P),D=m(V,!0);p(V);var U=k(V),Ie=m(U,!0);p(U);var Se=k(U),la=m(Se,!0);p(Se);var Ye=k(Se),ca=m(Ye,!0);p(Ye);var We=k(Ye),da=m(We,!0);p(We);var qe=k(We),ua=m(qe,!0);p(qe);var Ze=k(qe),va=m(Ze,!0);p(Ze);var Qe=k(Ze),bt=m(Qe),fa=m(bt);{var pa=me=>{var xe=Jr(),fe=ye(xe);pe(fe);var Te=k(fe,2);be(fe,()=>r(v),we=>y(v,we)),Y("keydown",fe,we=>{we.key==="Enter"&&L(r(b))}),Y("click",Te,()=>L(r(b))),x(me,xe)},ha=me=>{var xe=Xr(),fe=ye(xe),Te=m(fe,!0);p(fe);var we=k(fe,2);$(Xe=>ee(Te,Xe),[()=>h(r(b).last_day)],st),Y("click",we,()=>T(r(b))),x(me,xe)};H(fa,me=>{r(u)===r(b).employee_no?me(pa):me(ha,!1)})}p(bt),p(Qe);var Ge=k(Qe),Ke=m(Ge),ma=m(Ke,!0);p(Ke),p(Ge);var xt=k(Ge),Je=m(xt);pe(Je),p(xt),p(P),$((me,xe,fe,Te,we,Xe,ga)=>{ee(D,me),ee(Ie,xe),ee(la,fe),ee(ca,Te),ee(da,we),ee(ua,Xe),ee(va,ga),Me(Ke,1,`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(b).processed_date_time?"bg-[#CFEED8] text-[#1E9F37]":"bg-[#FED9DA] text-[#D7313E]"}`),ee(ma,r(b).processed_date_time?"Processed":"Unprocessed"),jt(Je,r(b).processed_date_time!==null)},[()=>String(r(b).employee_no||""),()=>h(r(b).date_hired),()=>String(r(b).cost_center||""),()=>String(r(b).name||""),()=>String(r(b).position_title||""),()=>String(r(b).rank||""),()=>String(r(b).department||"")],st),Y("change",Je,()=>O(r(b))),x(f,P)}),p(yt),p(W);var na=k(W,2);{var oa=f=>{var b=es();x(f,b)};H(na,f=>{r(a).length===0&&f(oa)})}p(G),He(G,f=>y(i,f),()=>r(i));var ia=k(G,2);He(ia,f=>y(d,f),()=>r(d)),p(N),Y("click",te,()=>c("employee_no")),Y("click",X,()=>c("date_hired")),Y("click",j,()=>c("name")),Y("click",Ae,()=>c("department")),Y("click",Ve,()=>c("last_day")),x(t,ne),ue()}function rs(t,e,a,s){var n;y(e,""),a(),(n=r(s))==null||n.focus()}var ss=I('<div class="absolute inset-y-0 right-0 pr-3 flex items-center"><button class="text-gray-400 hover:text-gray-600 focus:outline-none transition-colors" aria-label="Clear search"><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),ns=I('<div class="relative flex-1 min-w-[200px] max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-3xl"/> <!></div>');function os(t,e){de(e,!0);let a=nt(""),s=nt(void 0);function n(){var i;(i=e.onsearch)==null||i.call(e,{searchTerm:r(a)})}Ba(()=>{n()});var o=ns(),l=k(m(o),2);pe(l),l.__input=n,He(l,i=>y(s,i),()=>r(s));var u=k(l,2);{var v=i=>{var d=ss(),w=m(d);w.__click=[rs,a,n,s],p(d),x(i,d)};H(u,i=>{r(a)&&i(v)})}p(o),be(l,()=>r(a),i=>y(a,i)),x(t,o),ue()}Va(["input","click"]);const Qt=6e4,Gt=36e5,Nt=Symbol.for("constructDateFrom");function Kt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Nt in t?t[Nt](e):t instanceof Date?new t.constructor(e):new Date(e)}function At(t,e){return Kt(t,t)}function is(t,e){const a=()=>Kt(e==null?void 0:e.in,NaN),n=us(t);let o;if(n.date){const i=vs(n.date,2);o=fs(i.restDateString,i.year)}if(!o||isNaN(+o))return a();const l=+o;let u=0,v;if(n.time&&(u=ps(n.time),isNaN(u)))return a();if(n.timezone){if(v=hs(n.timezone),isNaN(v))return a()}else{const i=new Date(l+u),d=At(0);return d.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),d.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),d}return At(l+u+v)}const Fe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ls=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,cs=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ds=/^([+-])(\d{2})(?::?(\d{2}))?$/;function us(t){const e={},a=t.split(Fe.dateTimeDelimiter);let s;if(a.length>2)return e;if(/:/.test(a[0])?s=a[0]:(e.date=a[0],s=a[1],Fe.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Fe.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const n=Fe.timezone.exec(s);n?(e.time=s.replace(n[1],""),e.timezone=n[1]):e.time=s}return e}function vs(t,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(a);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?n:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function fs(t,e){if(e===null)return new Date(NaN);const a=t.match(ls);if(!a)return new Date(NaN);const s=!!a[4],n=Ce(a[1]),o=Ce(a[2])-1,l=Ce(a[3]),u=Ce(a[4]),v=Ce(a[5])-1;if(s)return bs(e,u,v)?ms(e,u,v):new Date(NaN);{const i=new Date(0);return!_s(e,o,l)||!ys(e,n)?new Date(NaN):(i.setUTCFullYear(e,o,Math.max(n,l)),i)}}function Ce(t){return t?parseInt(t):1}function ps(t){const e=t.match(cs);if(!e)return NaN;const a=at(e[1]),s=at(e[2]),n=at(e[3]);return xs(a,s,n)?a*Gt+s*Qt+n*1e3:NaN}function at(t){return t&&parseFloat(t.replace(",","."))||0}function hs(t){if(t==="Z")return 0;const e=t.match(ds);if(!e)return 0;const a=e[1]==="+"?-1:1,s=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return ws(s,n)?a*(s*Gt+n*Qt):NaN}function ms(t,e,a){const s=new Date(0);s.setUTCFullYear(t,0,4);const n=s.getUTCDay()||7,o=(e-1)*7+a+1-n;return s.setUTCDate(s.getUTCDate()+o),s}const gs=[31,null,31,30,31,30,31,31,30,31,30,31];function Jt(t){return t%400===0||t%4===0&&t%100!==0}function _s(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(gs[e]||(Jt(t)?29:28))}function ys(t,e){return e>=1&&e<=(Jt(t)?366:365)}function bs(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function xs(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function ws(t,e){return e>=0&&e<=59}var ks=I('<label class="field-option svelte-bp7ubz"><input type="radio" name="filter" class="svelte-bp7ubz"/> </label>'),Ds=I('<div class="date-range svelte-bp7ubz"><input type="date" class="svelte-bp7ubz"/> <input type="date" class="svelte-bp7ubz"/></div>'),Ss=I('<div class="field-grid mb-2 svelte-bp7ubz" style="gap: 0.25rem 0.70rem;"><label class="field-option svelte-bp7ubz"><input type="radio" name="status-filter" value="processed" class="svelte-bp7ubz"/> <span class="inline-block px-5 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#CFEED8] text-[#1E9F37]">Processed</span></label> <label class="field-option svelte-bp7ubz"><input type="radio" name="status-filter" value="unprocessed" class="svelte-bp7ubz"/> <span class="inline-block px-3 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#FED9DA] text-[#D7313E]">Unprocessed</span></label></div>'),Es=I('<div class="filter-input svelte-bp7ubz"><input type="text" class="w-full px-2 py-1 border rounded mb-0.25"/></div>'),Ts=I('<div class="filter-tag svelte-bp7ubz"> <button class="svelte-bp7ubz">×</button></div>'),Ls=I('<div class="active-filters svelte-bp7ubz"><!> <button class="clear-button svelte-bp7ubz">Clear All</button></div>'),Cs=I('<div class="dropdown-panel svelte-bp7ubz"><button class="close-button svelte-bp7ubz">✕</button> <div class="field-grid svelte-bp7ubz"></div> <hr class="divider svelte-bp7ubz"/> <!> <!></div>'),zs=I('<div class="dropdown svelte-bp7ubz"><button class="filter-button svelte-bp7ubz"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-bp7ubz"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"></path></svg> Filter</button> <!></div>');function Ms(t,e){de(e,!1);let a=ie(e,"employees",24,()=>[]);const s=ba();let n=Z(!1),o=Z(""),l=Z(""),u=Z(""),v=Z(""),i=Z([]);const d=["Employee No.","Date Hired","Cost Center","Name","Position","Rank","Department","Last Day","Status"];function w(){y(n,!r(n))}function g(F){y(o,F),y(l,""),y(u,""),y(v,"")}function c(){if(r(o)==="Date Hired"||r(o)==="Last Day"){if(r(u)&&r(v)){const F=new Date(r(u)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),N=new Date(r(v)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),G=`${F} to ${N}`;r(i).find(Q=>Q.field===r(o)&&Q.value===G)||(y(i,[...r(i),{field:r(o),value:G}]),L()),y(o,""),y(u,""),y(v,"")}}else r(o)&&r(l)&&(r(i).find(N=>N.field===r(o)&&N.value===r(l))||(y(i,[...r(i),{field:r(o),value:r(l)}]),L()),y(o,""),y(l,""))}function h(F){y(i,r(i).filter((N,G)=>G!==F)),L()}function S(){y(n,!1),y(o,""),y(l,"")}function T(){y(i,[]),L()}function L(){let F=a();r(i).forEach(N=>{const G=R(N.field);F=F.filter(W=>{var te;const Q=(te=W[G])==null?void 0:te.toString().toLowerCase(),oe=N.value.toLowerCase();if(N.field==="Employee No."||N.field==="Cost Center")return Q===oe;if(N.field==="Date Hired"||N.field==="Last Day"){const[le,ce]=N.value.split(" to ");try{const q=is(W[G]);return q>=new Date(le)&&q<=new Date(ce)}catch{return!1}}return N.field==="Status"?(Q?"processed":"unprocessed")===oe.toLowerCase():Q==null?void 0:Q.toString().toLowerCase().includes(oe)})}),s("filter",{filtered:F})}function R(F){return{"Employee No.":"employee_no","Date Hired":"date_hired","Cost Center":"cost_center",Name:"name",Position:"position_title",Rank:"rank",Department:"department","Last Day":"last_day",Status:"processed_date_time"}[F]||F}ze();var O=zs(),E=m(O),C=k(E,2);{var ne=F=>{var N=Cs(),G=m(N),W=k(G,2);Oe(W,5,()=>d,Lt,(q,K)=>{var J=ks(),X=m(J);pe(X);var _=k(X);p(J),$(()=>{Za(X,r(K)),jt(X,r(o)===r(K)),ee(_,` ${r(K)??""}`)}),Y("change",X,()=>g(r(K))),x(q,J)}),p(W);var Q=k(W,4);{var oe=q=>{var K=Ds(),J=m(K);pe(J);var X=k(J,2);pe(X),p(K),be(J,()=>r(u),_=>y(u,_)),Y("change",J,()=>{r(u)&&r(v)&&(c(),y(n,!1))}),be(X,()=>r(v),_=>y(v,_)),Y("change",X,()=>{r(u)&&r(v)&&(c(),y(n,!1))}),x(q,K)},te=(q,K)=>{{var J=_=>{var z=Ss(),A=m(z),M=m(A);it(2),p(A);var B=k(A,2),j=m(B);it(2),p(B),p(z),Y("change",M,()=>{y(l,"Processed"),c()}),Y("change",j,()=>{y(l,"Unprocessed"),c()}),x(_,z)},X=_=>{var z=Es(),A=m(z);pe(A),p(z),$(()=>Qa(A,"placeholder",`Enter ${r(o)}...`)),be(A,()=>r(l),M=>y(l,M)),Y("keydown",A,M=>{M.key==="Enter"&&c()}),x(_,z)};H(q,_=>{r(o)==="Status"?_(J):_(X,!1)},K)}};H(Q,q=>{r(o)==="Date Hired"||r(o)==="Last Day"?q(oe):q(te,!1)})}var le=k(Q,2);{var ce=q=>{var K=Ls(),J=m(K);Oe(J,1,()=>r(i),Lt,(_,z,A)=>{var M=Ts(),B=m(M),j=k(B);p(M),$(()=>ee(B,`${r(z).field??""} = ${r(z).value??""} `)),Y("click",j,()=>h(A)),x(_,M)});var X=k(J,2);p(K),Y("click",X,T),x(q,K)};H(le,q=>{r(i).length>0&&q(ce)})}p(N),Y("click",G,S),x(F,N)};H(C,F=>{r(n)&&F(ne)})}p(O),Y("click",E,w),x(t,O),ue()}var Ns=I('<div class="flex items-center gap-2"><label for="start-date" class="text-sm text-gray-600 font-[Open_Sans]">From:</label> <input id="start-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <label for="end-date" class="text-sm text-gray-600 font-[Open_Sans]">To:</label> <input id="end-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <button><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path></svg> Export</button></div>');function As(t,e){de(e,!1);let a=Z(""),s=Z(""),n=Z(!1);async function o(){if(!r(a)||!r(s)){alert("Please select both a start and end date.");return}try{const d=new Date(r(a)).toISOString(),w=new Date(r(s)).toISOString(),g=await fetch(`${_e}/resignees/report?start_date=${d}&end_date=${w}`,{credentials:"include"});if(!g.ok)throw new Error("Failed to fetch report from backend");const c=await g.blob(),h=URL.createObjectURL(c),S=document.createElement("a");S.href=h,S.download=`resignee_report_${r(a)}_to_${r(s)}.csv`,S.click(),URL.revokeObjectURL(h),y(n,!0)}catch(d){console.error("Error downloading backend report:",d),alert("No process dates were found within the specified date range")}}ze();var l=Ns(),u=k(m(l),2);pe(u);var v=k(u,4);pe(v);var i=k(v,2);p(l),$(()=>Me(i,1,`flex items-center gap-2 px-4.25 py-1.75 rounded-md text-sm font-[Open_Sans] hover:bg-blue-600 transition ${r(n),"bg-blue-500 text-white"}`)),be(u,()=>r(a),d=>y(a,d)),be(v,()=>r(s),d=>y(s,d)),Y("click",i,o),x(t,l),ue()}var Is=I('<button class="flex items-center gap-2 px-3 py-1.75 bg-red-500 text-white rounded-md hover:bg-red-600 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"></path></svg> Logout</button>');function Fs(t,e){de(e,!1);async function a(){try{const n=await fetch(`${_e}/logout`,{method:"POST",credentials:"include"});if(!n.ok){const o=await n.text();console.error("Logout failed:",o);return}lt("/")}catch(n){console.error("Logout error:",n)}}ze();var s=Is();Y("click",s,a),x(t,s),ue()}var Rs=I('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600">Loading employees...</span></div>'),Us=I('<div class="flex items-center justify-center py-12"><div class="text-red-600 bg-red-50 px-4 py-2 rounded-lg"> </div></div>'),Ps=I('<div class="overflow-auto max-h-[500px]"><!></div>'),Hs=I('<div class="mt-4 text-sm text-gray-600"> </div>'),Os=I('<p class="mt-2 text-sm text-gray-700"> </p>'),Bs=I('<main class="min-h-screen bg-gray-50 p-6"><div class="max-w-7xl mx-auto"><div class="flex flex-wrap items-center justify-between gap-4 mb-6"><div class="flex items-center gap-4 flex-1"><!></div> <div class="flex gap-2"><!> <!></div></div> <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><!></div> <!></div> <form><div class="mt-4 max-w-7xl mx-auto mb-6"><textarea rows="5" class="block w-full p-4 text-gray-900 border border-gray-300 rounded-lg bg-white text-base resize-y" placeholder="Paste resignee details here..."></textarea> <div class="mt-4 flex justify-between items-center"><button type="submit" class="px-4.25 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition">Submit</button> <!></div> <!></div></form></main>');function Js(t,e){de(e,!1);let a=Z([]),s=Z([]),n=Z(""),o=Z(""),l="all",u=Z(!0),v=Z(""),i=Z("");ct(async()=>{try{(await fetch(`${_e}/check-auth`,{method:"GET",credentials:"include"})).ok?await d():(console.log("Unauthorized. Redirecting to login."),lt("/"))}catch{console.error("Fetch failed (likely CORS or server down). Redirecting to login."),lt("/")}});async function d(){try{y(u,!0),y(n,""),console.log("Attempting to fetch from:",`${_e}/resignees`);const _=new AbortController,z=setTimeout(()=>_.abort(),1e4),A=await fetch(`${_e}/resignees`,{signal:_.signal,credentials:"include"});if(clearTimeout(z),console.log("Response status:",A.status),console.log("Response ok:",A.ok),!A.ok){const B=await A.text();throw console.log("Error response:",B),new Error(`HTTP ${A.status}: ${B}`)}const M=await A.json();console.log("Received data:",M),console.log("Data length:",M==null?void 0:M.length),y(a,M||[]),y(u,!1)}catch(_){console.error("Load employees error:",_),_ instanceof Error?_.name==="AbortError"?y(n,"Request timed out. Please check if the server is running."):_.message.includes("fetch")?y(n,"Cannot connect to server. Please check if the server is running on http://localhost:8000"):y(n,_.message):y(n,"An unexpected error occurred"),y(u,!1)}}function w(_){y(o,_.searchTerm)}function g(_){y(s,_.detail.filtered)}async function c(){if(r(v).trim())try{const _=await fetch(`${_e}/resignees`,{method:"POST",headers:{"Content-Type":"text/plain"},body:r(v),credentials:"include"});if(!_.ok){const z=await _.text();throw new Error(`HTTP error! status: ${_.status} - ${z}`)}await d(),y(v,"")}catch(_){_ instanceof Error?y(i,`Error: ${_.message}`):y(i,`Error: ${String(_)}`)}}async function h(_){const{employee:z,action:A}=_.detail;try{let M,B;A?(M=A,B=A):z.processed_date_time?(M="unprocess",B="unprocess"):(M="process",B="process");const j=await fetch(`${_e}/resignees/${z.employee_no}/${M}`,{method:"PUT",credentials:"include"});if(!j.ok){const he=await j.text();throw new Error(`Failed to ${B} employee: ${j.status} - ${he}`)}await d();const ve=B==="process"?"processed":"unprocessed"}catch(M){const B=A||(z.processed_date_time?"unprocess":"process"),j=M instanceof Error?M.message:String(M);y(i,`Error ${B}ing employee: ${j}`)}}ot(()=>(r(o),r(a)),()=>{const _={january:0,jan:0,february:1,feb:1,march:2,mar:2,april:3,apr:3,may:4,june:5,jun:5,july:6,jul:6,august:7,aug:7,september:8,sep:8,october:9,oct:9,november:10,nov:10,december:11,dec:11},z=r(o).toLowerCase().trim(),A=_[z];y(s,r(a).filter(M=>{M.processed_date_time;const B=l==="all",j=je=>String(je||"").toLowerCase().includes(z),ve=new Date(M.date_hired),he=new Date(M.last_day),Be=A!==void 0&&(ve.getMonth()===A||he.getMonth()===A);return(z===""||j(M.name)||j(M.employee_no)||j(M.department)||j(M.position_title)||Be)&&B}))}),Bt(),ze();var S=Bs();Ya(_=>{ja.title="AUB Resignee Tracker"});var T=m(S),L=m(T),R=m(L),O=m(R);os(O,{onsearch:w}),p(R);var E=k(R,2),C=m(E);Ms(C,{get employees(){return r(a)},$$events:{filter:g}});var ne=k(C,2);As(ne,{}),p(E),p(L);var F=k(L,2),N=m(F);{var G=_=>{var z=Rs();x(_,z)},W=(_,z)=>{{var A=B=>{var j=Us(),ve=m(j),he=m(ve);p(ve),p(j),$(()=>ee(he,`Error: ${r(n)??""}`)),x(B,j)},M=B=>{var j=Ps(),ve=m(j);as(ve,{get employees(){return r(s)},onstatustoggle:h}),p(j),x(B,j)};H(_,B=>{r(n)?B(A):B(M,!1)},z)}};H(N,_=>{r(u)?_(G):_(W,!1)})}p(F);var Q=k(F,2);{var oe=_=>{var z=Hs(),A=m(z);p(z),$(()=>ee(A,`Showing ${r(s).length??""} of ${r(a).length??""} employees`)),x(_,z)};H(Q,_=>{!r(u)&&!r(n)&&_(oe)})}p(T);var te=k(T,2),le=m(te),ce=m(le);Wa(ce);var q=k(ce,2),K=k(m(q),2);Fs(K,{}),p(q);var J=k(q,2);{var X=_=>{var z=Os(),A=m(z,!0);p(z),$(()=>ee(A,r(i))),x(_,z)};H(J,_=>{r(i)&&_(X)})}p(le),p(te),p(S),be(ce,()=>r(v),_=>y(v,_)),Y("submit",te,er(c)),x(t,S),ue()}export{Js as component};
