import{f as F,a as x,c as Be,t as ya,d as ne}from"../chunks/CO5X12ro.js";import{i as Ne}from"../chunks/BhebSDih.js";import{d as ba,g as rt,w as It,a as st,o as dt,c as xa}from"../chunks/hoQZN_2d.js";import{k as $e,h as Ee,a6 as wa,a5 as ka,e as Da,d as Ea,g as r,R as nt,f as Sa,i as Ta,j as kt,l as et,u as Ce,an as La,n as Ft,o as Rt,q as Ca,aq as Ut,a4 as za,m as q,aB as Dt,aC as tt,a8 as Et,aD as ut,aE as St,aF as Ma,af as Na,aG as Aa,I as Ia,aH as vt,aI as Fa,ak as Ra,aJ as Pt,L as Ua,aK as Pa,t as $,p as ue,F as xe,ae as re,a as ve,c as g,r as h,s as D,V as Ha,G as Ht,aL as Oa,ac as ot,b as _,aM as it,B as Tt,aN as Ot,aO as Ba,aP as lt,x as ja,$ as Va}from"../chunks/DZq78Ezw.js";import{s as ee,e as Y,d as Wa,h as Ya,r as qa}from"../chunks/sKjDUr9k.js";import{i as H}from"../chunks/BQGRK2Qk.js";import{s as Te,a as Za,c as Ae,r as ge,d as Bt,b as we,B as be,e as Ga,f as Ka}from"../chunks/CdqjsRcG.js";import{g as ct}from"../chunks/CbL16an2.js";import{p as ie,c as ft,s as He,b as Me,a as Qa,d as Ja}from"../chunks/Byz307Fg.js";function Lt(t,e){return e}function Xa(t,e,a,s){for(var n=[],o=e.length,i=0;i<o;i++)Ma(e[i].e,n,!0);var u=o>0&&n.length===0&&a!==null;if(u){var f=a.parentNode;Na(f),f.append(a),s.clear(),ye(t,e[0].prev,e[o-1].next)}Aa(n,()=>{for(var l=0;l<o;l++){var d=e[l];u||(s.delete(d.k),ye(t,d.prev,d.next)),Ia(d.e,!u)}})}function je(t,e,a,s,n,o=null){var i=t,u={flags:e,items:new Map,first:null},f=(e&Pt)!==0;if(f){var l=t;i=Ee?$e(wa(l)):l.appendChild(ka())}Ee&&Da();var d=null,w=!1,m=nt(()=>{var c=a();return za(c)?c:c==null?[]:Ut(c)});Ea(()=>{var c=r(m),p=c.length;if(w&&p===0)return;w=p===0;let E=!1;if(Ee){var T=Sa(i)===Ta;T!==(p===0)&&(i=kt(),$e(i),et(!1),E=!0)}if(Ee){for(var L=null,R,O=0;O<p;O++){if(Ce.nodeType===8&&Ce.data===La){i=Ce,E=!0,et(!1);break}var S=c[O],C=s(S,O);R=jt(Ce,u,L,null,S,C,O,n,e,a),u.items.set(C,R),L=R}p>0&&$e(kt())}Ee||$a(c,u,i,n,e,s,a),o!==null&&(p===0?d?Ft(d):d=Rt(()=>o(i)):d!==null&&Ca(d,()=>{d=null})),E&&et(!0),r(m)}),Ee&&(i=Ce)}function $a(t,e,a,s,n,o,i){var ce,ae,V,K;var u=(n&Pa)!==0,f=(n&(vt|ut))!==0,l=t.length,d=e.items,w=e.first,m=w,c,p=null,E,T=[],L=[],R,O,S,C;if(u)for(C=0;C<l;C+=1)R=t[C],O=o(R,C),S=d.get(O),S!==void 0&&((ce=S.a)==null||ce.measure(),(E??(E=new Set)).add(S));for(C=0;C<l;C+=1){if(R=t[C],O=o(R,C),S=d.get(O),S===void 0){var le=m?m.e.nodes_start:a;p=jt(le,e,p,p===null?e.first:p.next,R,O,C,s,n,i),d.set(O,p),T=[],L=[],m=p.next;continue}if(f&&er(S,R,C,n),(S.e.f&tt)!==0&&(Ft(S.e),u&&((ae=S.a)==null||ae.unfix(),(E??(E=new Set)).delete(S))),S!==m){if(c!==void 0&&c.has(S)){if(T.length<L.length){var U=L[0],A;p=U.prev;var Q=T[0],j=T[T.length-1];for(A=0;A<T.length;A+=1)Ct(T[A],U,a);for(A=0;A<L.length;A+=1)c.delete(L[A]);ye(e,Q.prev,j.next),ye(e,p,Q),ye(e,j,U),m=U,p=j,C-=1,T=[],L=[]}else c.delete(S),Ct(S,m,a),ye(e,S.prev,S.next),ye(e,S,p===null?e.first:p.next),ye(e,p,S),p=S;continue}for(T=[],L=[];m!==null&&m.k!==O;)(m.e.f&tt)===0&&(c??(c=new Set)).add(m),L.push(m),m=m.next;if(m===null)continue;S=m}T.push(S),p=S,m=S.next}if(m!==null||c!==void 0){for(var G=c===void 0?[]:Ut(c);m!==null;)(m.e.f&tt)===0&&G.push(m),m=m.next;var te=G.length;if(te>0){var oe=(n&Pt)!==0&&l===0?a:null;if(u){for(C=0;C<te;C+=1)(V=G[C].a)==null||V.measure();for(C=0;C<te;C+=1)(K=G[C].a)==null||K.fix()}Xa(e,G,oe,d)}}u&&Ua(()=>{var J;if(E!==void 0)for(S of E)(J=S.a)==null||J.apply()}),Et.first=e.first&&e.first.e,Et.last=p&&p.e}function er(t,e,a,s){(s&vt)!==0&&St(t.v,e),(s&ut)!==0?St(t.i,a):t.i=a}function jt(t,e,a,s,n,o,i,u,f,l){var d=(f&vt)!==0,w=(f&Fa)===0,m=d?w?q(n,!1,!1):Dt(n):n,c=(f&ut)===0?i:Dt(i),p={i:c,v:m,k:o,a:null,e:null,prev:a,next:s};try{return p.e=Rt(()=>u(t,m,c,l),Ee),p.e.prev=a&&a.e,p.e.next=s&&s.e,a===null?e.first=p:(a.next=p,a.e.next=p.e),s!==null&&(s.prev=p,s.e.prev=p.e),p}finally{}}function Ct(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,o=t.e.nodes_start;o!==s;){var i=Ra(o);n.before(o),o=i}}function ye(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function tr(t){return function(...e){var a=e[0];return a.preventDefault(),t==null?void 0:t.apply(this,e)}}function ar(t,e,a,s){var n,o,i=!1,u=a.length>=2,f=(p,E,T)=>{if(n=E,u&&(o=p),!i){let L=e(p,E,T);if(e.length<2)E(L);else return L}i=!1},l=ba(t,f,s),d=!Array.isArray(t);function w(p){var E=a(p,o);d?(i=!0,t.set(E)):E.forEach((T,L)=>{i=!0,t[L].set(T)}),i=!1}var m=!1;function c(p){var E,T,L,R;if(m){R=p(rt(l)),n(R);return}var O=l.subscribe(S=>{m?E?T=!0:E=!0:L=S});R=p(L),m=!0,n(R),O(),m=!1,T&&(R=rt(l)),E&&w(R)}return{subscribe:l.subscribe,set(p){c(()=>p)},update:c}}const rr=20,Se=It([]),pt=It(null),Oe=new Map,zt=t=>{if(Oe.has(t))return;const e=setTimeout(()=>{Oe.delete(t),Wt(t)},1e3);Oe.set(t,e)},sr=t=>{const e=Oe.get(t);e&&clearTimeout(e)};function Vt(t,e=!0){e&&t.id&&sr(t.id),Se.update(a=>a.map(s=>s.id===t.id?{...s,...t}:s))}function nr(t){Se.update(e=>[t,...e].slice(0,rr))}function or(t){rt(Se).find(e=>e.id===t.id)?Vt(t):nr(t)}function ir(t){Se.update(e=>(t?zt(t):e.forEach(a=>{zt(a.id)}),e.map(a=>a.id===t||t===void 0?{...a,visible:!1}:a)))}function Wt(t){Se.update(e=>t===void 0?[]:e.filter(a=>a.id!==t))}function lr(t){pt.set(t)}function cr(t){let e;pt.update(a=>(e=t-(a||0),null)),Se.update(a=>a.map(s=>({...s,pauseDuration:s.pauseDuration+e})))}const dr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function ur(t={}){return{toasts:ar(Se,a=>a.map(s=>{var n,o;return{...t,...t[s.type],...s,duration:s.duration||((n=t[s.type])==null?void 0:n.duration)||(t==null?void 0:t.duration)||dr[s.type],style:[t.style,(o=t[s.type])==null?void 0:o.style,s.style].join(";")}}),a=>a),pausedAt:pt}}const vr=t=>typeof t=="function",Mt=(t,e)=>vr(t)?t(e):t,fr=(()=>{let t=0;return()=>(t+=1,t.toString())})(),Yt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),pr=(t,e="blank",a)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,icon:a==null?void 0:a.icon,duration:a==null?void 0:a.duration,iconTheme:a==null?void 0:a.iconTheme,position:a==null?void 0:a.position,props:a==null?void 0:a.props,id:(a==null?void 0:a.id)||fr()}),Ie=t=>(e,a)=>{const s=pr(e,t,a);return or(s),s.id},se=(t,e)=>Ie("blank")(t,e);se.error=Ie("error");se.success=Ie("success");se.loading=Ie("loading");se.custom=Ie("custom");se.dismiss=t=>{ir(t)};se.remove=t=>Wt(t);se.promise=(t,e,a)=>{const s=se.loading(e.loading,{...a,...a==null?void 0:a.loading});return t.then(n=>(se.success(Mt(e.success,n),{id:s,...a,...a==null?void 0:a.success}),n)).catch(n=>{se.error(Mt(e.error,n),{id:s,...a,...a==null?void 0:a.error})}),t};function hr(t,e,a){const{reverseOrder:s,gutter:n=8,defaultPosition:o}=a||{},i=e.filter(d=>(d.position||o)===(t.position||o)&&d.height),u=i.findIndex(d=>d.id===t.id),f=i.filter((d,w)=>w<u&&d.visible).length;return i.filter(d=>d.visible).slice(...s?[f+1]:[0,f]).reduce((d,w)=>d+(w.height||0)+n,0)}const mr={startPause(){lr(Date.now())},endPause(){cr(Date.now())},updateHeight:(t,e)=>{Vt({id:t,height:e},!1)},calculateOffset:hr};function gr(t){const{toasts:e,pausedAt:a}=ur(t),s=new Map;let n;const o=[a.subscribe(i=>{if(i){for(const[,u]of s)clearTimeout(u);s.clear()}n=i}),e.subscribe(i=>{if(n)return;const u=Date.now();for(const f of i){if(s.has(f.id)||f.duration===1/0)continue;const l=(f.duration||0)+f.pauseDuration-(u-f.createdAt);if(l<0)return f.visible&&se.dismiss(f.id),null;s.set(f.id,setTimeout(()=>se.dismiss(f.id),l))}})];return st(()=>{for(const i of o)i()}),{toasts:e,handlers:mr}}var _r=F('<div class="svelte-11kvm4p"></div>');function yr(t,e){let a=ie(e,"primary",3,"#61d345"),s=ie(e,"secondary",3,"#fff");var n=_r();let o;$(()=>o=Te(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var br=F('<div class="svelte-1ee93ns"></div>');function xr(t,e){let a=ie(e,"primary",3,"#ff4b4b"),s=ie(e,"secondary",3,"#fff");var n=br();let o;$(()=>o=Te(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var wr=F('<div class="svelte-1j7dflg"></div>');function kr(t,e){let a=ie(e,"primary",3,"#616161"),s=ie(e,"secondary",3,"#e0e0e0");var n=wr();let o;$(()=>o=Te(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var Dr=F('<div class="animated svelte-1kgeier"> </div>'),Er=F('<div class="status svelte-1kgeier"><!></div>'),Sr=F('<div class="indicator svelte-1kgeier"><!> <!></div>');function qt(t,e){ue(e,!0);let a=re(()=>e.toast.type),s=re(()=>e.toast.icon),n=re(()=>e.toast.iconTheme);var o=Be(),i=xe(o);{var u=l=>{var d=Dr(),w=g(d,!0);h(d),$(()=>ee(w,r(s))),x(l,d)},f=(l,d)=>{{var w=c=>{var p=Be(),E=xe(p);ft(E,()=>r(s),(T,L)=>{L(T,{})}),x(c,p)},m=(c,p)=>{{var E=T=>{var L=Sr(),R=g(L);kr(R,He(()=>r(n)));var O=D(R,2);{var S=C=>{var le=Er(),U=g(le);{var A=j=>{xr(j,He(()=>r(n)))},Q=j=>{yr(j,He(()=>r(n)))};H(U,j=>{r(a)==="error"?j(A):j(Q,!1)})}h(le),x(C,le)};H(O,C=>{r(a)!=="loading"&&C(S)})}h(L),x(T,L)};H(c,T=>{r(a)!=="blank"&&T(E)},p)}};H(l,c=>{typeof r(s)<"u"?c(w):c(m,!1)},d)}};H(i,l=>{typeof r(s)=="string"?l(u):l(f,!1)})}x(t,o),ve()}var Tr=F("<div><!></div>");function ht(t,e){ue(e,!0);let a=Ha(e.toast.message);var s=Tr();Za(s,()=>({class:"message",...e.toast.ariaProps}),void 0,"svelte-1nauejd");var n=g(s);{var o=u=>{var f=ya();$(()=>ee(f,e.toast.message)),x(u,f)},i=u=>{var f=Be(),l=xe(f);ft(l,()=>a,(d,w)=>{w(d,He({get toast(){return e.toast}},()=>e.toast.props))}),x(u,f)};H(n,u=>{typeof e.toast.message=="string"?u(o):u(i,!1)})}h(s),x(t,s),ve()}const Lr=(t,e=Ht)=>{var a=Cr(),s=xe(a);qt(s,{get toast(){return e().toast}});var n=D(s,2);ht(n,{get toast(){return e().toast}}),x(t,a)};var Cr=F("<!> <!>",1),zr=F("<div><!></div>");function Mr(t,e){ue(e,!0);let a=ie(e,"position",3,void 0),s=ie(e,"Component",3,void 0),n=re(()=>(e.toast.position||a()||"top-center").includes("top")),o=re(()=>r(n)?1:-1);const i=re(()=>Yt()?["fadeIn","fadeOut"]:["enter","exit"]),u=re(()=>Oa(r(i),2)),f=re(()=>r(u)[0]),l=re(()=>r(u)[1]);let d=re(()=>e.toast.visible?r(f):r(l));var w=zr();let m;var c=g(w);{var p=T=>{var L=Be(),R=xe(L);ft(R,s,(O,S)=>{S(O,{$$slots:{icon:(C,le)=>{qt(C,{get toast(){return e.toast},slot:"icon"})},message:(C,le)=>{ht(C,{get toast(){return e.toast},slot:"message"})}}})}),x(T,L)},E=T=>{Lr(T,()=>({toast:e.toast}))};H(c,T=>{s()?T(p):T(E,!1)})}h(w),$(()=>{Ae(w,1,`base ${(e.toast.height?r(d):"transparent")??""} ${(e.toast.className||"")??""}`,"svelte-1c9srrs"),m=Te(w,e.toast.style,m,{"--factor":r(o)})}),x(t,w),ve()}const Nr=(t,e=Ht)=>{Mr(t,{get toast(){return e().toast},get position(){return e().toast.position}})};var Ar=F("<div><!></div>");function Ir(t,e){ue(e,!0);let a=ot(void 0);dt(()=>{var c,p,E;(E=e.setHeight)==null||E.call(e,(p=(c=r(a))==null?void 0:c.getBoundingClientRect())==null?void 0:p.height)});let s=re(()=>{var c;return(c=e.toast.position)!=null&&c.includes("top")?0:null}),n=re(()=>{var c;return(c=e.toast.position)!=null&&c.includes("bottom")?0:null}),o=re(()=>{var c;return(c=e.toast.position)!=null&&c.includes("top")?1:-1}),i=re(()=>{var c,p,E;return((c=e.toast.position)==null?void 0:c.includes("center"))&&"center"||(((p=e.toast.position)==null?void 0:p.includes("right"))||((E=e.toast.position)==null?void 0:E.includes("end")))&&"flex-end"||null});var u=Ar();let f,l;var d=g(u);{var w=c=>{ht(c,{get toast(){return e.toast}})},m=c=>{Nr(c,()=>({toast:e.toast}))};H(d,c=>{e.toast.type==="custom"?c(w):c(m,!1)})}h(u),Me(u,c=>_(a,c),()=>r(a)),$(c=>{f=Ae(u,1,"wrapper svelte-v01oml",null,f,c),l=Te(u,"",l,{"--factor":r(o),"--offset":e.toast.offset,top:r(s),bottom:r(n),"justify-content":r(i)})},[()=>({active:e.toast.visible,transition:!Yt()})]),x(t,u),ve()}var Fr=F('<div role="alert"></div>');function Rr(t,e){ue(e,!0);const[a,s]=Qa(),n=()=>Ja(f,"$toasts",a);let o=ie(e,"reverseOrder",3,!1),i=ie(e,"position",3,"top-center"),u=ie(e,"gutter",3,8);const{toasts:f,handlers:l}=gr(e.toastOptions);let d=re(()=>n().map(m=>({...m,position:m.position||i(),offset:l.calculateOffset(m,n(),{reverseOrder:o(),gutter:u(),defaultPosition:i()})})));var w=Fr();je(w,21,()=>r(d),m=>m.id,(m,c)=>{Ir(m,{get toast(){return r(c)},setHeight:p=>l.updateHeight(r(c).id,p??0)})}),h(w),$(()=>{Ae(w,1,`toaster ${(e.containerClassName||"")??""}`,"svelte-1phplh9"),Te(w,e.containerStyle)}),Y("mouseenter",w,function(...m){var c;(c=l.startPause)==null||c.apply(this,m)}),Y("mouseleave",w,function(...m){var c;(c=l.endPause)==null||c.apply(this,m)}),x(t,w),ve(),s()}var Ur=ne('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Pr=ne('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Hr=ne('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Or=ne('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Br=ne('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),jr=ne('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Vr=ne('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Wr=ne('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Yr=ne('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),qr=ne('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Zr=ne('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Gr=ne('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Kr=ne('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Qr=ne('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Jr=ne('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Xr=F('<input type="date" class="text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <button type="button" class="text-green-600 hover:text-green-800 transition-colors" title="Save changes"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></button>',1),$r=F('<span class="flex-1"> </span> <button type="button" class="text-gray-400 hover:text-gray-600 transition-colors" title="Edit last day"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button>',1),es=F('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><div class="flex items-center gap-2"><!></div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><input type="checkbox" class="w-5 h-5 text-green-600 rounded border-gray-300 focus:ring-green-500"/></td></tr>'),ts=F('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No employees found</h3></div>'),as=F('<!> <div class="relative"><div class="overflow-hidden"><div class="overflow-x-auto overflow-y-visible hide-main-scrollbar svelte-h362um"><table class="min-w-full text-sm text-left text-gray-700 bg-white"><thead class="bg-gray-100 text-xs text-gray-500 uppercase"><tr><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Employee no. <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Date hired <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Cost center</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Name <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Position title</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Rank</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Department <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Last day <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Mark as Processed</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table> <!></div></div> <div class="sticky-scrollbar-container bg-gray-50 border-t border-gray-300 h-5 z-10 svelte-h362um"><div class="h-5"></div></div></div>',1);function rs(t,e){ue(e,!1);const a=q();let s=ie(e,"employees",28,()=>[]),n=ie(e,"onstatustoggle",8),o=q(""),i=q("asc"),u=q(null),f=q(""),l=q(),d=q(),w,m=null,c=q();function p(v){r(o)==v?_(i,r(i)==="asc"?"desc":"asc"):(_(o,v),_(i,"asc"))}function E(v){return v?new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function T(v){if(!v)return"";const b=new Date(v),P=b.getFullYear(),W=String(b.getMonth()+1).padStart(2,"0"),k=String(b.getDate()).padStart(2,"0");return`${P}-${W}-${k}`}function L(v){_(u,v.employee_no),_(f,T(v.last_day))}async function R(v){try{const b=r(f).trim(),P=new Date(b);if(!b||isNaN(P.getTime()))throw new Error("Invalid date format");const W=await fetch(`${be}/resignees/${v.employee_no}/last_day/edit`,{method:"PUT",headers:{"Content-Type":"text/plain"},body:b,credentials:"include"});if(!W.ok){const N=await W.text();throw new Error(`Error ${W.status}: ${N}`)}const k=s().findIndex(N=>N.employee_no===v.employee_no);k!==-1&&(s(s()[k].last_day=P.toISOString(),!0),s([...s()]),se.success("Changes saved for employee no. "+v.employee_no))}catch(b){console.error("Error updating last day:",b);const P=b instanceof Error?b.message:"Unknown error";alert(`Failed to update last day: ${P}`)}finally{_(u,null),_(f,"")}}function O(){_(u,null),_(f,"")}function S(v){const P=(v.processed_date_time?"processed":"unprocessed")==="processed"?"unprocess":"process";n()&&n()({detail:{employee:v,action:P}}),setTimeout(()=>{P==="process"?se.success("Employee no. "+v.employee_no+" marked as processed"):se.success("Employee no. "+v.employee_no+" marked as unprocessed")},300)}function C(v){v.key==="Escape"&&O()}async function le(){if(!r(c)||!r(d))return;const v=r(d).querySelector("div"),b=(k,N)=>{let de=!1;return()=>{de||(window.requestAnimationFrame(()=>{N.scrollLeft!==k.scrollLeft&&(N.scrollLeft=k.scrollLeft),de=!1}),de=!0)}},P=b(r(c),r(d)),W=b(r(d),r(c));r(c).addEventListener("scroll",P),r(d).addEventListener("scroll",W),w=()=>{var N;const k=(N=r(c))==null?void 0:N.querySelector("table");if(k&&v){const de=k.scrollWidth,pe=r(c).clientWidth;de>pe?v.style.width=de+"px":v.style.width=pe+"px"}},w(),m&&m.disconnect(),m=new MutationObserver(w),m.observe(r(c),{childList:!0,subtree:!0}),st(()=>{r(c).removeEventListener("scroll",P),r(d).removeEventListener("scroll",W),m&&m.disconnect()})}dt(()=>(typeof window<"u"&&window.addEventListener("resize",()=>{w&&w()}),()=>{typeof window<"u"&&w&&window.removeEventListener("resize",w)})),st(()=>{m&&m.disconnect()}),it(()=>(Tt(s()),r(o),r(i)),()=>{_(a,[...s()].sort((v,b)=>{if(!r(o))return 0;let P=v[r(o)],W=b[r(o)];if(r(o)==="date_hired"||r(o)==="last_day"){const de=new Date(P||"1900-01-01"),pe=new Date(W||"1900-01-01");return de<pe?r(i)==="asc"?-1:1:de>pe?r(i)==="asc"?1:-1:0}const k=String(P||""),N=String(W||"");return k<N?r(i)==="asc"?-1:1:k>N?r(i)==="asc"?1:-1:0}))}),it(()=>(Tt(s()),r(l),r(d)),()=>{s()&&r(l)&&r(d)&&setTimeout(async()=>await le(),50)}),Ot(),Ne();var U=as();Y("keydown",Ba,C);var A=xe(U);Rr(A,{});var Q=D(A,2),j=g(Q),G=g(j),te=g(G),oe=g(te),ce=g(oe),ae=g(ce),V=g(ae),K=D(g(V)),J=g(K);{var X=v=>{var b=Ur();x(v,b)},y=(v,b)=>{{var P=k=>{var N=Pr();x(k,N)},W=k=>{var N=Hr();x(k,N)};H(v,k=>{r(o)==="employee_no"&&r(i)==="desc"?k(P):k(W,!1)},b)}};H(J,v=>{r(o)==="employee_no"&&r(i)==="asc"?v(X):v(y,!1)})}h(K),h(V),h(ae);var z=D(ae),I=g(z),M=D(g(I)),B=g(M);{var Z=v=>{var b=Or();x(v,b)},me=(v,b)=>{{var P=k=>{var N=Br();x(k,N)},W=k=>{var N=jr();x(k,N)};H(v,k=>{r(o)==="date_hired"&&r(i)==="desc"?k(P):k(W,!1)},b)}};H(B,v=>{r(o)==="date_hired"&&r(i)==="asc"?v(Z):v(me,!1)})}h(M),h(I),h(z);var fe=D(z,2),Fe=g(fe),Re=D(g(Fe)),Jt=g(Re);{var Xt=v=>{var b=Vr();x(v,b)},$t=(v,b)=>{{var P=k=>{var N=Wr();x(k,N)},W=k=>{var N=Yr();x(k,N)};H(v,k=>{r(o)==="name"&&r(i)==="desc"?k(P):k(W,!1)},b)}};H(Jt,v=>{r(o)==="name"&&r(i)==="asc"?v(Xt):v($t,!1)})}h(Re),h(Fe),h(fe);var Ue=D(fe,3),mt=g(Ue),gt=D(g(mt)),ea=g(gt);{var ta=v=>{var b=qr();x(v,b)},aa=(v,b)=>{{var P=k=>{var N=Zr();x(k,N)},W=k=>{var N=Gr();x(k,N)};H(v,k=>{r(o)==="department"&&r(i)==="desc"?k(P):k(W,!1)},b)}};H(ea,v=>{r(o)==="department"&&r(i)==="asc"?v(ta):v(aa,!1)})}h(gt),h(mt),h(Ue);var Ve=D(Ue),_t=g(Ve),yt=D(g(_t)),ra=g(yt);{var sa=v=>{var b=Kr();x(v,b)},na=(v,b)=>{{var P=k=>{var N=Qr();x(k,N)},W=k=>{var N=Jr();x(k,N)};H(v,k=>{r(o)==="last_day"&&r(i)==="desc"?k(P):k(W,!1)},b)}};H(ra,v=>{r(o)==="last_day"&&r(i)==="asc"?v(sa):v(na,!1)})}h(yt),h(_t),h(Ve),lt(2),h(ce),h(oe);var bt=D(oe);je(bt,7,()=>r(a),v=>v.employee_no,(v,b)=>{var P=es(),W=g(P),k=g(W,!0);h(W);var N=D(W),de=g(N,!0);h(N);var pe=D(N),ca=g(pe,!0);h(pe);var We=D(pe),da=g(We,!0);h(We);var Ye=D(We),ua=g(Ye,!0);h(Ye);var qe=D(Ye),va=g(qe,!0);h(qe);var Ze=D(qe),fa=g(Ze,!0);h(Ze);var Ge=D(Ze),xt=g(Ge),pa=g(xt);{var ha=_e=>{var ke=Xr(),he=xe(ke);ge(he);var Le=D(he,2);we(he,()=>r(f),De=>_(f,De)),Y("keydown",he,De=>{De.key==="Enter"&&R(r(b))}),Y("click",Le,()=>R(r(b))),x(_e,ke)},ma=_e=>{var ke=$r(),he=xe(ke),Le=g(he,!0);h(he);var De=D(he,2);$(Xe=>ee(Le,Xe),[()=>E(r(b).last_day)],nt),Y("click",De,()=>L(r(b))),x(_e,ke)};H(pa,_e=>{r(u)===r(b).employee_no?_e(ha):_e(ma,!1)})}h(xt),h(Ge);var Ke=D(Ge),Qe=g(Ke),ga=g(Qe,!0);h(Qe),h(Ke);var wt=D(Ke),Je=g(wt);ge(Je),h(wt),h(P),$((_e,ke,he,Le,De,Xe,_a)=>{ee(k,_e),ee(de,ke),ee(ca,he),ee(da,Le),ee(ua,De),ee(va,Xe),ee(fa,_a),Ae(Qe,1,`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(b).processed_date_time?"bg-[#CFEED8] text-[#1E9F37]":"bg-[#FED9DA] text-[#D7313E]"}`),ee(ga,r(b).processed_date_time?"Processed":"Unprocessed"),Bt(Je,r(b).processed_date_time!==null)},[()=>String(r(b).employee_no||""),()=>E(r(b).date_hired),()=>String(r(b).cost_center||""),()=>String(r(b).name||""),()=>String(r(b).position_title||""),()=>String(r(b).rank||""),()=>String(r(b).department||"")],nt),Y("change",Je,()=>S(r(b))),x(v,P)}),h(bt),h(te);var oa=D(te,2);{var ia=v=>{var b=ts();x(v,b)};H(oa,v=>{r(a).length===0&&v(ia)})}h(G),Me(G,v=>_(c,v),()=>r(c)),h(j),Me(j,v=>_(l,v),()=>r(l));var la=D(j,2);Me(la,v=>_(d,v),()=>r(d)),h(Q),Y("click",ae,()=>p("employee_no")),Y("click",z,()=>p("date_hired")),Y("click",fe,()=>p("name")),Y("click",Ue,()=>p("department")),Y("click",Ve,()=>p("last_day")),x(t,U),ve()}function ss(t,e,a,s){var n;_(e,""),a(),(n=r(s))==null||n.focus()}var ns=F('<div class="absolute inset-y-0 right-0 pr-3 flex items-center"><button class="text-gray-400 hover:text-gray-600 focus:outline-none transition-colors" aria-label="Clear search"><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),os=F('<div class="relative flex-1 min-w-[200px] max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-3xl"/> <!></div>');function is(t,e){ue(e,!0);let a=ot(""),s=ot(void 0);function n(){var l;(l=e.onsearch)==null||l.call(e,{searchTerm:r(a)})}ja(()=>{n()});var o=os(),i=D(g(o),2);ge(i),i.__input=n,Me(i,l=>_(s,l),()=>r(s));var u=D(i,2);{var f=l=>{var d=ns(),w=g(d);w.__click=[ss,a,n,s],h(d),x(l,d)};H(u,l=>{r(a)&&l(f)})}h(o),we(i,()=>r(a),l=>_(a,l)),x(t,o),ve()}Wa(["input","click"]);const Zt=6e4,Gt=36e5,Nt=Symbol.for("constructDateFrom");function Kt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Nt in t?t[Nt](e):t instanceof Date?new t.constructor(e):new Date(e)}function At(t,e){return Kt(t,t)}function ls(t,e){const a=()=>Kt(e==null?void 0:e.in,NaN),n=vs(t);let o;if(n.date){const l=fs(n.date,2);o=ps(l.restDateString,l.year)}if(!o||isNaN(+o))return a();const i=+o;let u=0,f;if(n.time&&(u=hs(n.time),isNaN(u)))return a();if(n.timezone){if(f=ms(n.timezone),isNaN(f))return a()}else{const l=new Date(i+u),d=At(0);return d.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),d.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),d}return At(i+u+f)}const Pe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},cs=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ds=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,us=/^([+-])(\d{2})(?::?(\d{2}))?$/;function vs(t){const e={},a=t.split(Pe.dateTimeDelimiter);let s;if(a.length>2)return e;if(/:/.test(a[0])?s=a[0]:(e.date=a[0],s=a[1],Pe.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Pe.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const n=Pe.timezone.exec(s);n?(e.time=s.replace(n[1],""),e.timezone=n[1]):e.time=s}return e}function fs(t,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(a);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?n:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function ps(t,e){if(e===null)return new Date(NaN);const a=t.match(cs);if(!a)return new Date(NaN);const s=!!a[4],n=ze(a[1]),o=ze(a[2])-1,i=ze(a[3]),u=ze(a[4]),f=ze(a[5])-1;if(s)return xs(e,u,f)?gs(e,u,f):new Date(NaN);{const l=new Date(0);return!ys(e,o,i)||!bs(e,n)?new Date(NaN):(l.setUTCFullYear(e,o,Math.max(n,i)),l)}}function ze(t){return t?parseInt(t):1}function hs(t){const e=t.match(ds);if(!e)return NaN;const a=at(e[1]),s=at(e[2]),n=at(e[3]);return ws(a,s,n)?a*Gt+s*Zt+n*1e3:NaN}function at(t){return t&&parseFloat(t.replace(",","."))||0}function ms(t){if(t==="Z")return 0;const e=t.match(us);if(!e)return 0;const a=e[1]==="+"?-1:1,s=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return ks(s,n)?a*(s*Gt+n*Zt):NaN}function gs(t,e,a){const s=new Date(0);s.setUTCFullYear(t,0,4);const n=s.getUTCDay()||7,o=(e-1)*7+a+1-n;return s.setUTCDate(s.getUTCDate()+o),s}const _s=[31,null,31,30,31,30,31,31,30,31,30,31];function Qt(t){return t%400===0||t%4===0&&t%100!==0}function ys(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(_s[e]||(Qt(t)?29:28))}function bs(t,e){return e>=1&&e<=(Qt(t)?366:365)}function xs(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function ws(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function ks(t,e){return e>=0&&e<=59}var Ds=F('<label class="field-option svelte-bp7ubz"><input type="radio" name="filter" class="svelte-bp7ubz"/> </label>'),Es=F('<div class="date-range svelte-bp7ubz"><input type="date" class="svelte-bp7ubz"/> <input type="date" class="svelte-bp7ubz"/></div>'),Ss=F('<div class="field-grid mb-2 svelte-bp7ubz" style="gap: 0.25rem 0.70rem;"><label class="field-option svelte-bp7ubz"><input type="radio" name="status-filter" value="processed" class="svelte-bp7ubz"/> <span class="inline-block px-5 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#CFEED8] text-[#1E9F37]">Processed</span></label> <label class="field-option svelte-bp7ubz"><input type="radio" name="status-filter" value="unprocessed" class="svelte-bp7ubz"/> <span class="inline-block px-3 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#FED9DA] text-[#D7313E]">Unprocessed</span></label></div>'),Ts=F('<div class="filter-input svelte-bp7ubz"><input type="text" class="w-full px-2 py-1 border rounded mb-0.25"/></div>'),Ls=F('<div class="filter-tag svelte-bp7ubz"> <button class="svelte-bp7ubz">×</button></div>'),Cs=F('<div class="active-filters svelte-bp7ubz"><!> <button class="clear-button svelte-bp7ubz">Clear All</button></div>'),zs=F('<div class="dropdown-panel svelte-bp7ubz"><button class="close-button svelte-bp7ubz">✕</button> <div class="field-grid svelte-bp7ubz"></div> <hr class="divider svelte-bp7ubz"/> <!> <!></div>'),Ms=F('<div class="dropdown svelte-bp7ubz"><button class="filter-button svelte-bp7ubz"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-bp7ubz"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"></path></svg> Filter</button> <!></div>');function Ns(t,e){ue(e,!1);let a=ie(e,"employees",24,()=>[]);const s=xa();let n=q(!1),o=q(""),i=q(""),u=q(""),f=q(""),l=q([]);const d=["Employee No.","Date Hired","Cost Center","Name","Position","Rank","Department","Last Day","Status"];function w(){_(n,!r(n))}function m(U){_(o,U),_(i,""),_(u,""),_(f,"")}function c(){if(r(o)==="Date Hired"||r(o)==="Last Day"){if(r(u)&&r(f)){const U=new Date(r(u)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),A=new Date(r(f)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),Q=`${U} to ${A}`;r(l).find(G=>G.field===r(o)&&G.value===Q)||(_(l,[...r(l),{field:r(o),value:Q}]),L()),_(o,""),_(u,""),_(f,"")}}else r(o)&&r(i)&&(r(l).find(A=>A.field===r(o)&&A.value===r(i))||(_(l,[...r(l),{field:r(o),value:r(i)}]),L()),_(o,""),_(i,""))}function p(U){_(l,r(l).filter((A,Q)=>Q!==U)),L()}function E(){_(n,!1),_(o,""),_(i,"")}function T(){_(l,[]),L()}function L(){let U=a();r(l).forEach(A=>{const Q=R(A.field);U=U.filter(j=>{var oe;const G=(oe=j[Q])==null?void 0:oe.toString().toLowerCase(),te=A.value.toLowerCase();if(A.field==="Employee No."||A.field==="Cost Center")return G===te;if(A.field==="Date Hired"||A.field==="Last Day"){const[ce,ae]=A.value.split(" to ");try{const V=ls(j[Q]);return V>=new Date(ce)&&V<=new Date(ae)}catch{return!1}}return A.field==="Status"?(G?"processed":"unprocessed")===te.toLowerCase():G==null?void 0:G.toString().toLowerCase().includes(te)})}),s("filter",{filtered:U})}function R(U){return{"Employee No.":"employee_no","Date Hired":"date_hired","Cost Center":"cost_center",Name:"name",Position:"position_title",Rank:"rank",Department:"department","Last Day":"last_day",Status:"processed_date_time"}[U]||U}Ne();var O=Ms(),S=g(O),C=D(S,2);{var le=U=>{var A=zs(),Q=g(A),j=D(Q,2);je(j,5,()=>d,Lt,(V,K)=>{var J=Ds(),X=g(J);ge(X);var y=D(X);h(J),$(()=>{Ga(X,r(K)),Bt(X,r(o)===r(K)),ee(y,` ${r(K)??""}`)}),Y("change",X,()=>m(r(K))),x(V,J)}),h(j);var G=D(j,4);{var te=V=>{var K=Es(),J=g(K);ge(J);var X=D(J,2);ge(X),h(K),we(J,()=>r(u),y=>_(u,y)),Y("change",J,()=>{r(u)&&r(f)&&(c(),_(n,!1))}),we(X,()=>r(f),y=>_(f,y)),Y("change",X,()=>{r(u)&&r(f)&&(c(),_(n,!1))}),x(V,K)},oe=(V,K)=>{{var J=y=>{var z=Ss(),I=g(z),M=g(I);lt(2),h(I);var B=D(I,2),Z=g(B);lt(2),h(B),h(z),Y("change",M,()=>{_(i,"Processed"),c()}),Y("change",Z,()=>{_(i,"Unprocessed"),c()}),x(y,z)},X=y=>{var z=Ts(),I=g(z);ge(I),h(z),$(()=>Ka(I,"placeholder",`Enter ${r(o)}...`)),we(I,()=>r(i),M=>_(i,M)),Y("keydown",I,M=>{M.key==="Enter"&&c()}),x(y,z)};H(V,y=>{r(o)==="Status"?y(J):y(X,!1)},K)}};H(G,V=>{r(o)==="Date Hired"||r(o)==="Last Day"?V(te):V(oe,!1)})}var ce=D(G,2);{var ae=V=>{var K=Cs(),J=g(K);je(J,1,()=>r(l),Lt,(y,z,I)=>{var M=Ls(),B=g(M),Z=D(B);h(M),$(()=>ee(B,`${r(z).field??""} = ${r(z).value??""} `)),Y("click",Z,()=>p(I)),x(y,M)});var X=D(J,2);h(K),Y("click",X,T),x(V,K)};H(ce,V=>{r(l).length>0&&V(ae)})}h(A),Y("click",Q,E),x(U,A)};H(C,U=>{r(n)&&U(le)})}h(O),Y("click",S,w),x(t,O),ve()}var As=F('<div class="flex items-center gap-2"><label for="start-date" class="text-sm text-gray-600 font-[Open_Sans]">From:</label> <input id="start-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <label for="end-date" class="text-sm text-gray-600 font-[Open_Sans]">To:</label> <input id="end-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <button><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path></svg> Export</button></div>');function Is(t,e){ue(e,!1);let a=q(""),s=q(""),n=q(!1);async function o(){if(!r(a)||!r(s)){alert("Please select both a start and end date.");return}try{const d=new Date(r(a)).toISOString(),w=new Date(r(s)).toISOString(),m=await fetch(`${be}/resignees/report?start_date=${d}&end_date=${w}`,{credentials:"include"});if(!m.ok)throw new Error("Failed to fetch report from backend");const c=await m.blob(),p=URL.createObjectURL(c),E=document.createElement("a");E.href=p,E.download=`resignee_report_${r(a)}_to_${r(s)}.csv`,E.click(),URL.revokeObjectURL(p),_(n,!0)}catch(d){console.error("Error downloading backend report:",d),alert("No process dates were found within the specified date range")}}Ne();var i=As(),u=D(g(i),2);ge(u);var f=D(u,4);ge(f);var l=D(f,2);h(i),$(()=>Ae(l,1,`flex items-center gap-2 px-4.25 py-1.75 rounded-md text-sm font-[Open_Sans] hover:bg-blue-600 transition ${r(n),"bg-blue-500 text-white"}`)),we(u,()=>r(a),d=>_(a,d)),we(f,()=>r(s),d=>_(s,d)),Y("click",l,o),x(t,i),ve()}var Fs=F('<button class="flex items-center gap-2 px-3 py-1.75 bg-red-500 text-white rounded-md hover:bg-red-600 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"></path></svg> Logout</button>');function Rs(t,e){ue(e,!1);async function a(){try{const n=await fetch(`${be}/logout`,{method:"POST",credentials:"include"});if(!n.ok){const o=await n.text();console.error("Logout failed:",o);return}ct("/")}catch(n){console.error("Logout error:",n)}}Ne();var s=Fs();Y("click",s,a),x(t,s),ve()}var Us=F('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600">Loading employees...</span></div>'),Ps=F('<div class="flex items-center justify-center py-12"><div class="text-red-600 bg-red-50 px-4 py-2 rounded-lg"> </div></div>'),Hs=F('<div class="overflow-auto max-h-[500px]"><!></div>'),Os=F('<div class="mt-4 text-sm text-gray-600"> </div>'),Bs=F('<p class="mt-2 text-sm text-gray-700"> </p>'),js=F('<main class="min-h-screen bg-gray-50 p-6"><div class="max-w-7xl mx-auto"><div class="flex flex-wrap items-center justify-between gap-4 mb-6"><div class="flex items-center gap-4 flex-1"><!></div> <div class="flex gap-2"><!> <!></div></div> <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><!></div> <!></div> <form><div class="mt-4 max-w-7xl mx-auto mb-6"><textarea rows="5" class="block w-full p-4 text-gray-900 border border-gray-300 rounded-lg bg-white text-base resize-y" placeholder="Paste resignee details here..."></textarea> <div class="mt-4 flex justify-between items-center"><button type="submit" class="px-4.25 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition">Submit</button> <!></div> <!></div></form></main>');function Xs(t,e){ue(e,!1);let a=q([]),s=q([]),n=q(""),o=q(""),i="all",u=q(!0),f=q(""),l=q("");dt(async()=>{try{(await fetch(`${be}/check-auth`,{method:"GET",credentials:"include"})).ok?await d():(console.log("Unauthorized. Redirecting to login."),ct("/"))}catch{console.error("Fetch failed (likely CORS or server down). Redirecting to login."),ct("/")}});async function d(){try{_(u,!0),_(n,""),console.log("Attempting to fetch from:",`${be}/resignees`);const y=new AbortController,z=setTimeout(()=>y.abort(),1e4),I=await fetch(`${be}/resignees`,{signal:y.signal,credentials:"include"});if(clearTimeout(z),console.log("Response status:",I.status),console.log("Response ok:",I.ok),!I.ok){const B=await I.text();throw console.log("Error response:",B),new Error(`HTTP ${I.status}: ${B}`)}const M=await I.json();console.log("Received data:",M),console.log("Data length:",M==null?void 0:M.length),_(a,M||[]),_(u,!1)}catch(y){console.error("Load employees error:",y),y instanceof Error?y.name==="AbortError"?_(n,"Request timed out. Please check if the server is running."):y.message.includes("fetch")?_(n,"Cannot connect to server. Please check if the server is running on http://localhost:8000"):_(n,y.message):_(n,"An unexpected error occurred"),_(u,!1)}}function w(y){_(o,y.searchTerm)}function m(y){_(s,y.detail.filtered)}async function c(){if(r(f).trim())try{const y=await fetch(`${be}/resignees`,{method:"POST",headers:{"Content-Type":"text/plain"},body:r(f),credentials:"include"});if(!y.ok){const z=await y.text();throw new Error(`HTTP error! status: ${y.status} - ${z}`)}await d(),_(f,"")}catch(y){y instanceof Error?_(l,`Error: ${y.message}`):_(l,`Error: ${String(y)}`)}}async function p(y){const{employee:z,action:I}=y.detail;try{let M,B;I?(M=I,B=I):z.processed_date_time?(M="unprocess",B="unprocess"):(M="process",B="process");const Z=await fetch(`${be}/resignees/${z.employee_no}/${M}`,{method:"PUT",credentials:"include"});if(!Z.ok){const fe=await Z.text();throw new Error(`Failed to ${B} employee: ${Z.status} - ${fe}`)}await d();const me=B==="process"?"processed":"unprocessed"}catch(M){const B=I||(z.processed_date_time?"unprocess":"process"),Z=M instanceof Error?M.message:String(M);_(l,`Error ${B}ing employee: ${Z}`)}}it(()=>(r(o),r(a)),()=>{const y={january:0,jan:0,february:1,feb:1,march:2,mar:2,april:3,apr:3,may:4,june:5,jun:5,july:6,jul:6,august:7,aug:7,september:8,sep:8,october:9,oct:9,november:10,nov:10,december:11,dec:11},z=r(o).toLowerCase().trim(),I=y[z];_(s,r(a).filter(M=>{M.processed_date_time;const B=i==="all",Z=Re=>String(Re||"").toLowerCase().includes(z),me=new Date(M.date_hired),fe=new Date(M.last_day),Fe=I!==void 0&&(me.getMonth()===I||fe.getMonth()===I);return(z===""||Z(M.name)||Z(M.employee_no)||Z(M.department)||Z(M.position_title)||Fe)&&B}))}),Ot(),Ne();var E=js();Ya(y=>{Va.title="AUB Resignee Tracker"});var T=g(E),L=g(T),R=g(L),O=g(R);is(O,{onsearch:w}),h(R);var S=D(R,2),C=g(S);Ns(C,{get employees(){return r(a)},$$events:{filter:m}});var le=D(C,2);Is(le,{}),h(S),h(L);var U=D(L,2),A=g(U);{var Q=y=>{var z=Us();x(y,z)},j=(y,z)=>{{var I=B=>{var Z=Ps(),me=g(Z),fe=g(me);h(me),h(Z),$(()=>ee(fe,`Error: ${r(n)??""}`)),x(B,Z)},M=B=>{var Z=Hs(),me=g(Z);rs(me,{get employees(){return r(s)},onstatustoggle:p}),h(Z),x(B,Z)};H(y,B=>{r(n)?B(I):B(M,!1)},z)}};H(A,y=>{r(u)?y(Q):y(j,!1)})}h(U);var G=D(U,2);{var te=y=>{var z=Os(),I=g(z);h(z),$(()=>ee(I,`Showing ${r(s).length??""} of ${r(a).length??""} employees`)),x(y,z)};H(G,y=>{!r(u)&&!r(n)&&y(te)})}h(T);var oe=D(T,2),ce=g(oe),ae=g(ce);qa(ae);var V=D(ae,2),K=D(g(V),2);Rs(K,{}),h(V);var J=D(V,2);{var X=y=>{var z=Bs(),I=g(z,!0);h(z),$(()=>ee(I,r(l))),x(y,z)};H(J,y=>{r(l)&&y(X)})}h(ce),h(oe),h(E),we(ae,()=>r(f),y=>_(f,y)),Y("submit",oe,tr(c)),x(t,E),ve()}export{Xs as component};
