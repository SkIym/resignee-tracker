import{f as B,a as _}from"../chunks/CO5X12ro.js";import{i as j}from"../chunks/BhebSDih.js";import{o as q}from"../chunks/hoQZN_2d.js";import{p as M,t as k,g as a,a as N,s as d,$ as C,c as t,r as o,m as c,b as s}from"../chunks/DZq78Ezw.js";import{h as G,e as O,s as L}from"../chunks/sKjDUr9k.js";import{i as z}from"../chunks/BQGRK2Qk.js";import{b as $,B as P,r as A}from"../chunks/CdqjsRcG.js";import{g as U}from"../chunks/BfkHpt_6.js";var F=B('<div class="text-red-red-600 text-sm text-center"> </div>'),H=B(`<div class="min-h-screen flex items-start justify-center bg-gray-100 px-4 pt-20"><div class="w-full max-w-sm"><div class="text-center"><img src="/assets/proj-1-logo.png" alt="AUB Logo" class="mx-auto h-40 w-auto mb-4"/> <h1 class="text-2xl font-bold text-gray-800">AUB Resignee Tracker</h1></div> <form class="space-y-4 pt-4"><div><label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label> <input id="username" name="username" type="text" required class="w-full px-3 py-2 bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-colors disabled:opacity-50 
						focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"/></div> <div><label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label> <input id="password" name="password" type="password" required class="w-full px-3 py-2 bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-colors disabled:opacity-50 
						focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"/></div> <!> <button type="submit" class="mt-6 w-full py-2 px-4 bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white font-medium rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"> </button></form></div></div>`);function ee(R,S){M(S,!1);let u=c(""),m=c(""),i=c(!1),n=c("");q(async()=>{try{(await fetch(`${P}/check-auth`,{method:"GET",credentials:"include"})).ok&&(console.log("Already logged in. Redirecting to dashboard..."),U("/dashboard"))}catch{console.warn("Auth check failed. Please Login.")}});const T=async e=>{e.preventDefault(),s(i,!0),s(n,"");try{const r=new URLSearchParams;r.append("username",a(u)),r.append("password",a(m));const l=await fetch(`${P}/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r,credentials:"include"});if(l.ok)U("/dashboard");else{const I=await l.text();s(n,`Login failed (${l.status}). Please check your credentials.`)}}catch(r){r instanceof Error?s(n,`Network error: ${r.message}. Please try again.`):s(n,"Network error: An unknown error occurred. Please try again.")}finally{s(i,!1)}};j();var f=H();G(e=>{C.title="Login"});var w=t(f),p=d(t(w),2),g=t(p),b=d(t(g),2);A(b),o(g);var v=d(g,2),h=d(t(v),2);A(h),o(v);var x=d(v,2);{var D=e=>{var r=F(),l=t(r,!0);o(r),k(()=>L(l,a(n))),_(e,r)};z(x,e=>{a(n)&&e(D)})}var y=d(x,2),E=t(y,!0);o(y),o(p),o(w),o(f),k(()=>{b.disabled=a(i),h.disabled=a(i),y.disabled=a(i),L(E,a(i)?"Logging in...":"Login")}),$(b,()=>a(u),e=>s(u,e)),$(h,()=>a(m),e=>s(m,e)),O("submit",p,T),_(R,f),N()}export{ee as component};
