import{f as B,a as _}from"../chunks/CO5X12ro.js";import{i as q}from"../chunks/BhebSDih.js";import{o as M}from"../chunks/hoQZN_2d.js";import{p as N,t as k,g as a,a as C,$ as G,s as d,c as s,b as o,m as c,r as t}from"../chunks/DZq78Ezw.js";import{h as O,e as z,s as L}from"../chunks/sKjDUr9k.js";import{i as F}from"../chunks/BQGRK2Qk.js";import{b as $,r as A}from"../chunks/CnPbex1U.js";import{g as P}from"../chunks/BCRwIkSH.js";import{B as U}from"../chunks/QH1VciTq.js";var H=B('<div class="text-black text-sm text-center"> </div>'),I=B(`<div class="min-h-screen flex items-start justify-center bg-gray-100 px-4 pt-20"><div class="w-full max-w-sm"><div class="text-center"><img src="/assets/proj-1-logo.png" alt="AUB Logo" class="mx-auto h-40 w-auto mb-4"/> <h1 class="text-2xl font-bold text-gray-800">AUB Resignee Tracker</h1></div> <form class="space-y-4 pt-4"><div><label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label> <input id="username" name="username" type="text" required class="w-full px-3 py-2 bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-colors disabled:opacity-50 
						focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"/></div> <div><label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label> <input id="password" name="password" type="password" required class="w-full px-3 py-2 bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-colors disabled:opacity-50 
						focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"/></div> <!> <button type="submit" class="mt-6 w-full py-2 px-4 bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white font-medium rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"> </button></form></div></div>`);function re(R,S){N(S,!1);let m=c(""),u=c(""),i=c(!1),n=c("");M(async()=>{try{(await fetch(`${U}/check-auth`,{method:"GET",credentials:"include"})).ok&&(console.log("Already logged in. Redirecting to dashboard..."),P("/dashboard"))}catch{console.warn("Auth check failed. Please Login.")}});const T=async e=>{e.preventDefault(),o(i,!0),o(n,"");try{const r=new URLSearchParams;r.append("username",a(m)),r.append("password",a(u));const l=await fetch(`${U}/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r,credentials:"include"});if(l.ok)P("/dashboard");else{const E=await l.json();o(n,E.detail||`Login failed (${l.status})`)}}catch(r){r instanceof Error?o(n,`Network error: ${r.message}. Please try again.`):o(n,"Network error: An unknown error occurred. Please try again.")}finally{o(i,!1)}};q();var f=I();O(e=>{G.title="Login"});var y=s(f),p=d(s(y),2),g=s(p),b=d(s(g),2);A(b),t(g);var v=d(g,2),h=d(s(v),2);A(h),t(v);var x=d(v,2);{var j=e=>{var r=H(),l=s(r,!0);t(r),k(()=>L(l,a(n))),_(e,r)};F(x,e=>{a(n)&&e(j)})}var w=d(x,2),D=s(w,!0);t(w),t(p),t(y),t(f),k(()=>{b.disabled=a(i),h.disabled=a(i),w.disabled=a(i),L(D,a(i)?"Logging in...":"Login")}),$(b,()=>a(m),e=>o(m,e)),$(h,()=>a(u),e=>o(u,e)),z("submit",p,T),_(R,f),C()}export{re as component};
