import{f as I,a as x,c as Ue,t as la,d as se}from"../chunks/CO5X12ro.js";import{i as ze}from"../chunks/BhebSDih.js";import{d as ca,g as tt,w as Et,a as da,o as Tt,c as ua}from"../chunks/hoQZN_2d.js";import{k as Je,h as ke,a6 as va,a5 as fa,e as pa,d as ha,g as r,R as at,f as ma,i as ga,j as ht,l as Xe,u as Ce,an as _a,n as St,o as Ct,q as ya,aq as Lt,a4 as xa,m as q,aB as mt,aC as $e,a8 as gt,aD as nt,aE as _t,aF as ba,af as wa,aG as ka,I as Da,aH as ot,aI as Ea,ak as Ta,aJ as zt,L as Sa,aK as Ca,t as $,p as de,F as ye,ae as re,a as ue,c as m,r as f,s as w,V as La,G as Mt,aL as za,ac as rt,b as y,aM as Nt,B as Ma,aN as At,aO as Na,aP as st,x as Aa,$ as Ia}from"../chunks/DZq78Ezw.js";import{s as ee,e as V,d as Fa,h as Ra,r as Ua}from"../chunks/sKjDUr9k.js";import{i as P}from"../chunks/BQGRK2Qk.js";import{s as Te,a as Pa,c as Me,r as pe,d as It,b as xe,B as _e,e as Ha,f as Ba}from"../chunks/CdqjsRcG.js";import{g as Ft}from"../chunks/CBaeDeQn.js";import{p as oe,c as it,s as Fe,b as Rt,a as Oa,d as ja}from"../chunks/BgZpowm-.js";function yt(t,e){return e}function Va(t,e,a,s){for(var n=[],o=e.length,i=0;i<o;i++)ba(e[i].e,n,!0);var d=o>0&&n.length===0&&a!==null;if(d){var u=a.parentNode;wa(u),u.append(a),s.clear(),ge(t,e[0].prev,e[o-1].next)}ka(n,()=>{for(var l=0;l<o;l++){var v=e[l];d||(s.delete(v.k),ge(t,v.prev,v.next)),Da(v.e,!d)}})}function Pe(t,e,a,s,n,o=null){var i=t,d={flags:e,items:new Map,first:null},u=(e&zt)!==0;if(u){var l=t;i=ke?Je(va(l)):l.appendChild(fa())}ke&&pa();var v=null,D=!1,_=at(()=>{var c=a();return xa(c)?c:c==null?[]:Lt(c)});ha(()=>{var c=r(_),p=c.length;if(D&&p===0)return;D=p===0;let T=!1;if(ke){var L=ma(i)===ga;L!==(p===0)&&(i=ht(),Je(i),Xe(!1),T=!0)}if(ke){for(var z=null,R,H=0;H<p;H++){if(Ce.nodeType===8&&Ce.data===_a){i=Ce,T=!0,Xe(!1);break}var k=c[H],S=s(k,H);R=Ut(Ce,d,z,null,k,S,H,n,e,a),d.items.set(S,R),z=R}p>0&&Je(ht())}ke||Ya(c,d,i,n,e,s,a),o!==null&&(p===0?v?St(v):v=Ct(()=>o(i)):v!==null&&ya(v,()=>{v=null})),T&&Xe(!0),r(_)}),ke&&(i=Ce)}function Ya(t,e,a,s,n,o,i){var le,ce,Y,K;var d=(n&Ca)!==0,u=(n&(ot|nt))!==0,l=t.length,v=e.items,D=e.first,_=D,c,p=null,T,L=[],z=[],R,H,k,S;if(d)for(S=0;S<l;S+=1)R=t[S],H=o(R,S),k=v.get(H),k!==void 0&&((le=k.a)==null||le.measure(),(T??(T=new Set)).add(k));for(S=0;S<l;S+=1){if(R=t[S],H=o(R,S),k=v.get(H),k===void 0){var ne=_?_.e.nodes_start:a;p=Ut(ne,e,p,p===null?e.first:p.next,R,H,S,s,n,i),v.set(H,p),L=[],z=[],_=p.next;continue}if(u&&Wa(k,R,S,n),(k.e.f&$e)!==0&&(St(k.e),d&&((ce=k.a)==null||ce.unfix(),(T??(T=new Set)).delete(k))),k!==_){if(c!==void 0&&c.has(k)){if(L.length<z.length){var F=z[0],A;p=F.prev;var Q=L[0],W=L[L.length-1];for(A=0;A<L.length;A+=1)xt(L[A],F,a);for(A=0;A<z.length;A+=1)c.delete(z[A]);ge(e,Q.prev,W.next),ge(e,p,Q),ge(e,W,F),_=F,p=W,S-=1,L=[],z=[]}else c.delete(k),xt(k,_,a),ge(e,k.prev,k.next),ge(e,k,p===null?e.first:p.next),ge(e,p,k),p=k;continue}for(L=[],z=[];_!==null&&_.k!==H;)(_.e.f&$e)===0&&(c??(c=new Set)).add(_),z.push(_),_=_.next;if(_===null)continue;k=_}L.push(k),p=k,_=k.next}if(_!==null||c!==void 0){for(var G=c===void 0?[]:Lt(c);_!==null;)(_.e.f&$e)===0&&G.push(_),_=_.next;var ie=G.length;if(ie>0){var ae=(n&zt)!==0&&l===0?a:null;if(d){for(S=0;S<ie;S+=1)(Y=G[S].a)==null||Y.measure();for(S=0;S<ie;S+=1)(K=G[S].a)==null||K.fix()}Va(e,G,ae,v)}}d&&Sa(()=>{var J;if(T!==void 0)for(k of T)(J=k.a)==null||J.apply()}),gt.first=e.first&&e.first.e,gt.last=p&&p.e}function Wa(t,e,a,s){(s&ot)!==0&&_t(t.v,e),(s&nt)!==0?_t(t.i,a):t.i=a}function Ut(t,e,a,s,n,o,i,d,u,l){var v=(u&ot)!==0,D=(u&Ea)===0,_=v?D?q(n,!1,!1):mt(n):n,c=(u&nt)===0?i:mt(i),p={i:c,v:_,k:o,a:null,e:null,prev:a,next:s};try{return p.e=Ct(()=>d(t,_,c,l),ke),p.e.prev=a&&a.e,p.e.next=s&&s.e,a===null?e.first=p:(a.next=p,a.e.next=p.e),s!==null&&(s.prev=p,s.e.prev=p.e),p}finally{}}function xt(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,o=t.e.nodes_start;o!==s;){var i=Ta(o);n.before(o),o=i}}function ge(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Za(t){return function(...e){var a=e[0];return a.preventDefault(),t==null?void 0:t.apply(this,e)}}function qa(t,e,a,s){var n,o,i=!1,d=a.length>=2,u=(p,T,L)=>{if(n=T,d&&(o=p),!i){let z=e(p,T,L);if(e.length<2)T(z);else return z}i=!1},l=ca(t,u,s),v=!Array.isArray(t);function D(p){var T=a(p,o);v?(i=!0,t.set(T)):T.forEach((L,z)=>{i=!0,t[z].set(L)}),i=!1}var _=!1;function c(p){var T,L,z,R;if(_){R=p(tt(l)),n(R);return}var H=l.subscribe(k=>{_?T?L=!0:T=!0:z=k});R=p(z),_=!0,n(R),H(),_=!1,L&&(R=tt(l)),T&&D(R)}return{subscribe:l.subscribe,set(p){c(()=>p)},update:c}}const Ga=20,De=Et([]),lt=Et(null),Re=new Map,bt=t=>{if(Re.has(t))return;const e=setTimeout(()=>{Re.delete(t),Ht(t)},1e3);Re.set(t,e)},Ka=t=>{const e=Re.get(t);e&&clearTimeout(e)};function Pt(t,e=!0){e&&t.id&&Ka(t.id),De.update(a=>a.map(s=>s.id===t.id?{...s,...t}:s))}function Qa(t){De.update(e=>[t,...e].slice(0,Ga))}function Ja(t){tt(De).find(e=>e.id===t.id)?Pt(t):Qa(t)}function Xa(t){De.update(e=>(t?bt(t):e.forEach(a=>{bt(a.id)}),e.map(a=>a.id===t||t===void 0?{...a,visible:!1}:a)))}function Ht(t){De.update(e=>t===void 0?[]:e.filter(a=>a.id!==t))}function $a(t){lt.set(t)}function er(t){let e;lt.update(a=>(e=t-(a||0),null)),De.update(a=>a.map(s=>({...s,pauseDuration:s.pauseDuration+e})))}const tr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function ar(t={}){return{toasts:qa(De,a=>a.map(s=>{var n,o;return{...t,...t[s.type],...s,duration:s.duration||((n=t[s.type])==null?void 0:n.duration)||(t==null?void 0:t.duration)||tr[s.type],style:[t.style,(o=t[s.type])==null?void 0:o.style,s.style].join(";")}}),a=>a),pausedAt:lt}}const rr=t=>typeof t=="function",wt=(t,e)=>rr(t)?t(e):t,sr=(()=>{let t=0;return()=>(t+=1,t.toString())})(),Bt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),nr=(t,e="blank",a)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,icon:a==null?void 0:a.icon,duration:a==null?void 0:a.duration,iconTheme:a==null?void 0:a.iconTheme,position:a==null?void 0:a.position,props:a==null?void 0:a.props,id:(a==null?void 0:a.id)||sr()}),Ne=t=>(e,a)=>{const s=nr(e,t,a);return Ja(s),s.id},te=(t,e)=>Ne("blank")(t,e);te.error=Ne("error");te.success=Ne("success");te.loading=Ne("loading");te.custom=Ne("custom");te.dismiss=t=>{Xa(t)};te.remove=t=>Ht(t);te.promise=(t,e,a)=>{const s=te.loading(e.loading,{...a,...a==null?void 0:a.loading});return t.then(n=>(te.success(wt(e.success,n),{id:s,...a,...a==null?void 0:a.success}),n)).catch(n=>{te.error(wt(e.error,n),{id:s,...a,...a==null?void 0:a.error})}),t};function or(t,e,a){const{reverseOrder:s,gutter:n=8,defaultPosition:o}=a||{},i=e.filter(v=>(v.position||o)===(t.position||o)&&v.height),d=i.findIndex(v=>v.id===t.id),u=i.filter((v,D)=>D<d&&v.visible).length;return i.filter(v=>v.visible).slice(...s?[u+1]:[0,u]).reduce((v,D)=>v+(D.height||0)+n,0)}const ir={startPause(){$a(Date.now())},endPause(){er(Date.now())},updateHeight:(t,e)=>{Pt({id:t,height:e},!1)},calculateOffset:or};function lr(t){const{toasts:e,pausedAt:a}=ar(t),s=new Map;let n;const o=[a.subscribe(i=>{if(i){for(const[,d]of s)clearTimeout(d);s.clear()}n=i}),e.subscribe(i=>{if(n)return;const d=Date.now();for(const u of i){if(s.has(u.id)||u.duration===1/0)continue;const l=(u.duration||0)+u.pauseDuration-(d-u.createdAt);if(l<0)return u.visible&&te.dismiss(u.id),null;s.set(u.id,setTimeout(()=>te.dismiss(u.id),l))}})];return da(()=>{for(const i of o)i()}),{toasts:e,handlers:ir}}var cr=I('<div class="svelte-11kvm4p"></div>');function dr(t,e){let a=oe(e,"primary",3,"#61d345"),s=oe(e,"secondary",3,"#fff");var n=cr();let o;$(()=>o=Te(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var ur=I('<div class="svelte-1ee93ns"></div>');function vr(t,e){let a=oe(e,"primary",3,"#ff4b4b"),s=oe(e,"secondary",3,"#fff");var n=ur();let o;$(()=>o=Te(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var fr=I('<div class="svelte-1j7dflg"></div>');function pr(t,e){let a=oe(e,"primary",3,"#616161"),s=oe(e,"secondary",3,"#e0e0e0");var n=fr();let o;$(()=>o=Te(n,"",o,{"--primary":a(),"--secondary":s()})),x(t,n)}var hr=I('<div class="animated svelte-1kgeier"> </div>'),mr=I('<div class="status svelte-1kgeier"><!></div>'),gr=I('<div class="indicator svelte-1kgeier"><!> <!></div>');function Ot(t,e){de(e,!0);let a=re(()=>e.toast.type),s=re(()=>e.toast.icon),n=re(()=>e.toast.iconTheme);var o=Ue(),i=ye(o);{var d=l=>{var v=hr(),D=m(v,!0);f(v),$(()=>ee(D,r(s))),x(l,v)},u=(l,v)=>{{var D=c=>{var p=Ue(),T=ye(p);it(T,()=>r(s),(L,z)=>{z(L,{})}),x(c,p)},_=(c,p)=>{{var T=L=>{var z=gr(),R=m(z);pr(R,Fe(()=>r(n)));var H=w(R,2);{var k=S=>{var ne=mr(),F=m(ne);{var A=W=>{vr(W,Fe(()=>r(n)))},Q=W=>{dr(W,Fe(()=>r(n)))};P(F,W=>{r(a)==="error"?W(A):W(Q,!1)})}f(ne),x(S,ne)};P(H,S=>{r(a)!=="loading"&&S(k)})}f(z),x(L,z)};P(c,L=>{r(a)!=="blank"&&L(T)},p)}};P(l,c=>{typeof r(s)<"u"?c(D):c(_,!1)},v)}};P(i,l=>{typeof r(s)=="string"?l(d):l(u,!1)})}x(t,o),ue()}var _r=I("<div><!></div>");function ct(t,e){de(e,!0);let a=La(e.toast.message);var s=_r();Pa(s,()=>({class:"message",...e.toast.ariaProps}),void 0,"svelte-1nauejd");var n=m(s);{var o=d=>{var u=la();$(()=>ee(u,e.toast.message)),x(d,u)},i=d=>{var u=Ue(),l=ye(u);it(l,()=>a,(v,D)=>{D(v,Fe({get toast(){return e.toast}},()=>e.toast.props))}),x(d,u)};P(n,d=>{typeof e.toast.message=="string"?d(o):d(i,!1)})}f(s),x(t,s),ue()}const yr=(t,e=Mt)=>{var a=xr(),s=ye(a);Ot(s,{get toast(){return e().toast}});var n=w(s,2);ct(n,{get toast(){return e().toast}}),x(t,a)};var xr=I("<!> <!>",1),br=I("<div><!></div>");function wr(t,e){de(e,!0);let a=oe(e,"position",3,void 0),s=oe(e,"Component",3,void 0),n=re(()=>(e.toast.position||a()||"top-center").includes("top")),o=re(()=>r(n)?1:-1);const i=re(()=>Bt()?["fadeIn","fadeOut"]:["enter","exit"]),d=re(()=>za(r(i),2)),u=re(()=>r(d)[0]),l=re(()=>r(d)[1]);let v=re(()=>e.toast.visible?r(u):r(l));var D=br();let _;var c=m(D);{var p=L=>{var z=Ue(),R=ye(z);it(R,s,(H,k)=>{k(H,{$$slots:{icon:(S,ne)=>{Ot(S,{get toast(){return e.toast},slot:"icon"})},message:(S,ne)=>{ct(S,{get toast(){return e.toast},slot:"message"})}}})}),x(L,z)},T=L=>{yr(L,()=>({toast:e.toast}))};P(c,L=>{s()?L(p):L(T,!1)})}f(D),$(()=>{Me(D,1,`base ${(e.toast.height?r(v):"transparent")??""} ${(e.toast.className||"")??""}`,"svelte-1c9srrs"),_=Te(D,e.toast.style,_,{"--factor":r(o)})}),x(t,D),ue()}const kr=(t,e=Mt)=>{wr(t,{get toast(){return e().toast},get position(){return e().toast.position}})};var Dr=I("<div><!></div>");function Er(t,e){de(e,!0);let a=rt(void 0);Tt(()=>{var c,p,T;(T=e.setHeight)==null||T.call(e,(p=(c=r(a))==null?void 0:c.getBoundingClientRect())==null?void 0:p.height)});let s=re(()=>{var c;return(c=e.toast.position)!=null&&c.includes("top")?0:null}),n=re(()=>{var c;return(c=e.toast.position)!=null&&c.includes("bottom")?0:null}),o=re(()=>{var c;return(c=e.toast.position)!=null&&c.includes("top")?1:-1}),i=re(()=>{var c,p,T;return((c=e.toast.position)==null?void 0:c.includes("center"))&&"center"||(((p=e.toast.position)==null?void 0:p.includes("right"))||((T=e.toast.position)==null?void 0:T.includes("end")))&&"flex-end"||null});var d=Dr();let u,l;var v=m(d);{var D=c=>{ct(c,{get toast(){return e.toast}})},_=c=>{kr(c,()=>({toast:e.toast}))};P(v,c=>{e.toast.type==="custom"?c(D):c(_,!1)})}f(d),Rt(d,c=>y(a,c),()=>r(a)),$(c=>{u=Me(d,1,"wrapper svelte-v01oml",null,u,c),l=Te(d,"",l,{"--factor":r(o),"--offset":e.toast.offset,top:r(s),bottom:r(n),"justify-content":r(i)})},[()=>({active:e.toast.visible,transition:!Bt()})]),x(t,d),ue()}var Tr=I('<div role="alert"></div>');function Sr(t,e){de(e,!0);const[a,s]=Oa(),n=()=>ja(u,"$toasts",a);let o=oe(e,"reverseOrder",3,!1),i=oe(e,"position",3,"top-center"),d=oe(e,"gutter",3,8);const{toasts:u,handlers:l}=lr(e.toastOptions);let v=re(()=>n().map(_=>({..._,position:_.position||i(),offset:l.calculateOffset(_,n(),{reverseOrder:o(),gutter:d(),defaultPosition:i()})})));var D=Tr();Pe(D,21,()=>r(v),_=>_.id,(_,c)=>{Er(_,{get toast(){return r(c)},setHeight:p=>l.updateHeight(r(c).id,p??0)})}),f(D),$(()=>{Me(D,1,`toaster ${(e.containerClassName||"")??""}`,"svelte-1phplh9"),Te(D,e.containerStyle)}),V("mouseenter",D,function(..._){var c;(c=l.startPause)==null||c.apply(this,_)}),V("mouseleave",D,function(..._){var c;(c=l.endPause)==null||c.apply(this,_)}),x(t,D),ue(),s()}var Cr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Lr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),zr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Mr=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Nr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Ar=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Ir=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Fr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Rr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Ur=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Pr=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),Hr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Br=se('<path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"></path>'),Or=se('<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>'),jr=se('<path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>'),Vr=I('<input type="date" class="text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <button type="button" class="text-green-600 hover:text-green-800 transition-colors" title="Save changes"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></button>',1),Yr=I('<span class="flex-1"> </span> <button type="button" class="text-gray-400 hover:text-gray-600 transition-colors" title="Edit last day"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button>',1),Wr=I('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><div class="flex items-center gap-2"><!></div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><input type="checkbox" class="w-5 h-5 text-green-600 rounded border-gray-300 focus:ring-green-500"/></td></tr>'),Zr=I('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No employees found</h3></div>'),qr=I('<!> <div class="overflow-x-auto"><table class="min-w-full text-sm text-left text-gray-700 bg-white"><thead class="bg-gray-100 text-xs text-gray-500 uppercase"><tr><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Employee no. <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Date hired <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Cost center</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Name <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Position title</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Rank</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Department <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors"><div class="flex items-center gap-1">Last day <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 20 20"><!></svg></div></th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Mark as Processed</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table> <!></div>',1);function Gr(t,e){de(e,!1);const a=q();let s=oe(e,"employees",28,()=>[]),n=oe(e,"onstatustoggle",8),o=q(""),i=q("asc"),d=q(null),u=q("");function l(h){r(o)==h?y(i,r(i)==="asc"?"desc":"asc"):(y(o,h),y(i,"asc"))}function v(h){return h?new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function D(h){if(!h)return"";const b=new Date(h),j=b.getFullYear(),Z=String(b.getMonth()+1).padStart(2,"0"),E=String(b.getDate()).padStart(2,"0");return`${j}-${Z}-${E}`}function _(h){y(d,h.employee_no),y(u,D(h.last_day))}async function c(h){try{const b=r(u).trim(),j=new Date(b);if(!b||isNaN(j.getTime()))throw new Error("Invalid date format");const Z=await fetch(`${_e}/resignees/${h.employee_no}/last_day/edit`,{method:"PUT",headers:{"Content-Type":"text/plain"},body:b,credentials:"include"});if(!Z.ok){const U=await Z.text();throw new Error(`Error ${Z.status}: ${U}`)}const E=s().findIndex(U=>U.employee_no===h.employee_no);E!==-1&&(s(s()[E].last_day=j.toISOString(),!0),s([...s()]),te.success("Changes saved for employee no. "+h.employee_no))}catch(b){console.error("Error updating last day:",b);const j=b instanceof Error?b.message:"Unknown error";alert(`Failed to update last day: ${j}`)}finally{y(d,null),y(u,"")}}function p(){y(d,null),y(u,"")}function T(h){const j=(h.processed_date_time?"processed":"unprocessed")==="processed"?"unprocess":"process";n()&&n()({detail:{employee:h,action:j}}),setTimeout(()=>{j==="process"?te.success("Employee no. "+h.employee_no+" marked as processed"):te.success("Employee no. "+h.employee_no+" marked as unprocessed")},300)}function L(h){h.key==="Escape"&&p()}Nt(()=>(Ma(s()),r(o),r(i)),()=>{y(a,[...s()].sort((h,b)=>{if(!r(o))return 0;let j=h[r(o)],Z=b[r(o)];if(r(o)==="date_hired"||r(o)==="last_day"){const Ae=new Date(j||"1900-01-01"),Ee=new Date(Z||"1900-01-01");return Ae<Ee?r(i)==="asc"?-1:1:Ae>Ee?r(i)==="asc"?1:-1:0}const E=String(j||""),U=String(Z||"");return E<U?r(i)==="asc"?-1:1:E>U?r(i)==="asc"?1:-1:0}))}),At(),ze();var z=qr();V("keydown",Na,L);var R=ye(z);Sr(R,{});var H=w(R,2),k=m(H),S=m(k),ne=m(S),F=m(ne),A=m(F),Q=w(m(A)),W=m(Q);{var G=h=>{var b=Cr();x(h,b)},ie=(h,b)=>{{var j=E=>{var U=Lr();x(E,U)},Z=E=>{var U=zr();x(E,U)};P(h,E=>{r(o)==="employee_no"&&r(i)==="desc"?E(j):E(Z,!1)},b)}};P(W,h=>{r(o)==="employee_no"&&r(i)==="asc"?h(G):h(ie,!1)})}f(Q),f(A),f(F);var ae=w(F),le=m(ae),ce=w(m(le)),Y=m(ce);{var K=h=>{var b=Mr();x(h,b)},J=(h,b)=>{{var j=E=>{var U=Nr();x(E,U)},Z=E=>{var U=Ar();x(E,U)};P(h,E=>{r(o)==="date_hired"&&r(i)==="desc"?E(j):E(Z,!1)},b)}};P(Y,h=>{r(o)==="date_hired"&&r(i)==="asc"?h(K):h(J,!1)})}f(ce),f(le),f(ae);var X=w(ae,2),g=m(X),M=w(m(g)),N=m(M);{var C=h=>{var b=Ir();x(h,b)},B=(h,b)=>{{var j=E=>{var U=Fr();x(E,U)},Z=E=>{var U=Rr();x(E,U)};P(h,E=>{r(o)==="name"&&r(i)==="desc"?E(j):E(Z,!1)},b)}};P(N,h=>{r(o)==="name"&&r(i)==="asc"?h(C):h(B,!1)})}f(M),f(g),f(X);var O=w(X,3),ve=m(O),he=w(m(ve)),He=m(he);{var Be=h=>{var b=Ur();x(h,b)},Zt=(h,b)=>{{var j=E=>{var U=Pr();x(E,U)},Z=E=>{var U=Hr();x(E,U)};P(h,E=>{r(o)==="department"&&r(i)==="desc"?E(j):E(Z,!1)},b)}};P(He,h=>{r(o)==="department"&&r(i)==="asc"?h(Be):h(Zt,!1)})}f(he),f(ve),f(O);var Oe=w(O),dt=m(Oe),ut=w(m(dt)),qt=m(ut);{var Gt=h=>{var b=Br();x(h,b)},Kt=(h,b)=>{{var j=E=>{var U=Or();x(E,U)},Z=E=>{var U=jr();x(E,U)};P(h,E=>{r(o)==="last_day"&&r(i)==="desc"?E(j):E(Z,!1)},b)}};P(qt,h=>{r(o)==="last_day"&&r(i)==="asc"?h(Gt):h(Kt,!1)})}f(ut),f(dt),f(Oe),st(2),f(ne),f(S);var vt=w(S);Pe(vt,7,()=>r(a),h=>h.employee_no,(h,b)=>{var j=Wr(),Z=m(j),E=m(Z,!0);f(Z);var U=w(Z),Ae=m(U,!0);f(U);var Ee=w(U),Xt=m(Ee,!0);f(Ee);var je=w(Ee),$t=m(je,!0);f(je);var Ve=w(je),ea=m(Ve,!0);f(Ve);var Ye=w(Ve),ta=m(Ye,!0);f(Ye);var We=w(Ye),aa=m(We,!0);f(We);var Ze=w(We),ft=m(Ze),ra=m(ft);{var sa=me=>{var be=Vr(),fe=ye(be);pe(fe);var Se=w(fe,2);xe(fe,()=>r(u),we=>y(u,we)),V("keydown",fe,we=>{we.key==="Enter"&&c(r(b))}),V("click",Se,()=>c(r(b))),x(me,be)},na=me=>{var be=Yr(),fe=ye(be),Se=m(fe,!0);f(fe);var we=w(fe,2);$(Qe=>ee(Se,Qe),[()=>v(r(b).last_day)],at),V("click",we,()=>_(r(b))),x(me,be)};P(ra,me=>{r(d)===r(b).employee_no?me(sa):me(na,!1)})}f(ft),f(Ze);var qe=w(Ze),Ge=m(qe),oa=m(Ge,!0);f(Ge),f(qe);var pt=w(qe),Ke=m(pt);pe(Ke),f(pt),f(j),$((me,be,fe,Se,we,Qe,ia)=>{ee(E,me),ee(Ae,be),ee(Xt,fe),ee($t,Se),ee(ea,we),ee(ta,Qe),ee(aa,ia),Me(Ge,1,`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r(b).processed_date_time?"bg-[#CFEED8] text-[#1E9F37]":"bg-[#FED9DA] text-[#D7313E]"}`),ee(oa,r(b).processed_date_time?"Processed":"Unprocessed"),It(Ke,r(b).processed_date_time!==null)},[()=>String(r(b).employee_no||""),()=>v(r(b).date_hired),()=>String(r(b).cost_center||""),()=>String(r(b).name||""),()=>String(r(b).position_title||""),()=>String(r(b).rank||""),()=>String(r(b).department||"")],at),V("change",Ke,()=>T(r(b))),x(h,j)}),f(vt),f(k);var Qt=w(k,2);{var Jt=h=>{var b=Zr();x(h,b)};P(Qt,h=>{r(a).length===0&&h(Jt)})}f(H),V("click",F,()=>l("employee_no")),V("click",ae,()=>l("date_hired")),V("click",X,()=>l("name")),V("click",O,()=>l("department")),V("click",Oe,()=>l("last_day")),x(t,z),ue()}function Kr(t,e,a,s){var n;y(e,""),a(),(n=r(s))==null||n.focus()}var Qr=I('<div class="absolute inset-y-0 right-0 pr-3 flex items-center"><button class="text-gray-400 hover:text-gray-600 focus:outline-none transition-colors" aria-label="Clear search"><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Jr=I('<div class="relative flex-1 min-w-[200px] max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-3xl"/> <!></div>');function Xr(t,e){de(e,!0);let a=rt(""),s=rt(void 0);function n(){var l;(l=e.onsearch)==null||l.call(e,{searchTerm:r(a)})}Aa(()=>{n()});var o=Jr(),i=w(m(o),2);pe(i),i.__input=n,Rt(i,l=>y(s,l),()=>r(s));var d=w(i,2);{var u=l=>{var v=Qr(),D=m(v);D.__click=[Kr,a,n,s],f(v),x(l,v)};P(d,l=>{r(a)&&l(u)})}f(o),xe(i,()=>r(a),l=>y(a,l)),x(t,o),ue()}Fa(["input","click"]);const jt=6e4,Vt=36e5,kt=Symbol.for("constructDateFrom");function Yt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&kt in t?t[kt](e):t instanceof Date?new t.constructor(e):new Date(e)}function Dt(t,e){return Yt(t,t)}function $r(t,e){const a=()=>Yt(e==null?void 0:e.in,NaN),n=rs(t);let o;if(n.date){const l=ss(n.date,2);o=ns(l.restDateString,l.year)}if(!o||isNaN(+o))return a();const i=+o;let d=0,u;if(n.time&&(d=os(n.time),isNaN(d)))return a();if(n.timezone){if(u=is(n.timezone),isNaN(u))return a()}else{const l=new Date(i+d),v=Dt(0);return v.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),v.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),v}return Dt(i+d+u)}const Ie={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},es=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ts=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,as=/^([+-])(\d{2})(?::?(\d{2}))?$/;function rs(t){const e={},a=t.split(Ie.dateTimeDelimiter);let s;if(a.length>2)return e;if(/:/.test(a[0])?s=a[0]:(e.date=a[0],s=a[1],Ie.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Ie.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const n=Ie.timezone.exec(s);n?(e.time=s.replace(n[1],""),e.timezone=n[1]):e.time=s}return e}function ss(t,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(a);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?n:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function ns(t,e){if(e===null)return new Date(NaN);const a=t.match(es);if(!a)return new Date(NaN);const s=!!a[4],n=Le(a[1]),o=Le(a[2])-1,i=Le(a[3]),d=Le(a[4]),u=Le(a[5])-1;if(s)return vs(e,d,u)?ls(e,d,u):new Date(NaN);{const l=new Date(0);return!ds(e,o,i)||!us(e,n)?new Date(NaN):(l.setUTCFullYear(e,o,Math.max(n,i)),l)}}function Le(t){return t?parseInt(t):1}function os(t){const e=t.match(ts);if(!e)return NaN;const a=et(e[1]),s=et(e[2]),n=et(e[3]);return fs(a,s,n)?a*Vt+s*jt+n*1e3:NaN}function et(t){return t&&parseFloat(t.replace(",","."))||0}function is(t){if(t==="Z")return 0;const e=t.match(as);if(!e)return 0;const a=e[1]==="+"?-1:1,s=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return ps(s,n)?a*(s*Vt+n*jt):NaN}function ls(t,e,a){const s=new Date(0);s.setUTCFullYear(t,0,4);const n=s.getUTCDay()||7,o=(e-1)*7+a+1-n;return s.setUTCDate(s.getUTCDate()+o),s}const cs=[31,null,31,30,31,30,31,31,30,31,30,31];function Wt(t){return t%400===0||t%4===0&&t%100!==0}function ds(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(cs[e]||(Wt(t)?29:28))}function us(t,e){return e>=1&&e<=(Wt(t)?366:365)}function vs(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function fs(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function ps(t,e){return e>=0&&e<=59}var hs=I('<label class="field-option svelte-bp7ubz"><input type="radio" name="filter" class="svelte-bp7ubz"/> </label>'),ms=I('<div class="date-range svelte-bp7ubz"><input type="date" class="svelte-bp7ubz"/> <input type="date" class="svelte-bp7ubz"/></div>'),gs=I('<div class="field-grid mb-2 svelte-bp7ubz" style="gap: 0.25rem 0.70rem;"><label class="field-option svelte-bp7ubz"><input type="radio" name="status-filter" value="processed" class="svelte-bp7ubz"/> <span class="inline-block px-5 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#CFEED8] text-[#1E9F37]">Processed</span></label> <label class="field-option svelte-bp7ubz"><input type="radio" name="status-filter" value="unprocessed" class="svelte-bp7ubz"/> <span class="inline-block px-3 py-1.5 rounded-full text-sm font-[Open_Sans] font-550 bg-[#FED9DA] text-[#D7313E]">Unprocessed</span></label></div>'),_s=I('<div class="filter-input svelte-bp7ubz"><input type="text" class="w-full px-2 py-1 border rounded mb-0.25"/></div>'),ys=I('<div class="filter-tag svelte-bp7ubz"> <button class="svelte-bp7ubz">×</button></div>'),xs=I('<div class="active-filters svelte-bp7ubz"><!> <button class="clear-button svelte-bp7ubz">Clear All</button></div>'),bs=I('<div class="dropdown-panel svelte-bp7ubz"><button class="close-button svelte-bp7ubz">✕</button> <div class="field-grid svelte-bp7ubz"></div> <hr class="divider svelte-bp7ubz"/> <!> <!></div>'),ws=I('<div class="dropdown svelte-bp7ubz"><button class="filter-button svelte-bp7ubz"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-bp7ubz"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"></path></svg> Filter</button> <!></div>');function ks(t,e){de(e,!1);let a=oe(e,"employees",24,()=>[]);const s=ua();let n=q(!1),o=q(""),i=q(""),d=q(""),u=q(""),l=q([]);const v=["Employee No.","Date Hired","Cost Center","Name","Position","Rank","Department","Last Day","Status"];function D(){y(n,!r(n))}function _(F){y(o,F),y(i,""),y(d,""),y(u,"")}function c(){if(r(o)==="Date Hired"||r(o)==="Last Day"){if(r(d)&&r(u)){const F=new Date(r(d)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),A=new Date(r(u)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),Q=`${F} to ${A}`;r(l).find(G=>G.field===r(o)&&G.value===Q)||(y(l,[...r(l),{field:r(o),value:Q}]),z()),y(o,""),y(d,""),y(u,"")}}else r(o)&&r(i)&&(r(l).find(A=>A.field===r(o)&&A.value===r(i))||(y(l,[...r(l),{field:r(o),value:r(i)}]),z()),y(o,""),y(i,""))}function p(F){y(l,r(l).filter((A,Q)=>Q!==F)),z()}function T(){y(n,!1),y(o,""),y(i,"")}function L(){y(l,[]),z()}function z(){let F=a();r(l).forEach(A=>{const Q=R(A.field);F=F.filter(W=>{var ae;const G=(ae=W[Q])==null?void 0:ae.toString().toLowerCase(),ie=A.value.toLowerCase();if(A.field==="Employee No."||A.field==="Cost Center")return G===ie;if(A.field==="Date Hired"||A.field==="Last Day"){const[le,ce]=A.value.split(" to ");try{const Y=$r(W[Q]);return Y>=new Date(le)&&Y<=new Date(ce)}catch{return!1}}return A.field==="Status"?(G?"processed":"unprocessed")===ie.toLowerCase():G==null?void 0:G.toString().toLowerCase().includes(ie)})}),s("filter",{filtered:F})}function R(F){return{"Employee No.":"employee_no","Date Hired":"date_hired","Cost Center":"cost_center",Name:"name",Position:"position_title",Rank:"rank",Department:"department","Last Day":"last_day",Status:"processed_date_time"}[F]||F}ze();var H=ws(),k=m(H),S=w(k,2);{var ne=F=>{var A=bs(),Q=m(A),W=w(Q,2);Pe(W,5,()=>v,yt,(Y,K)=>{var J=hs(),X=m(J);pe(X);var g=w(X);f(J),$(()=>{Ha(X,r(K)),It(X,r(o)===r(K)),ee(g,` ${r(K)??""}`)}),V("change",X,()=>_(r(K))),x(Y,J)}),f(W);var G=w(W,4);{var ie=Y=>{var K=ms(),J=m(K);pe(J);var X=w(J,2);pe(X),f(K),xe(J,()=>r(d),g=>y(d,g)),V("change",J,()=>{r(d)&&r(u)&&(c(),y(n,!1))}),xe(X,()=>r(u),g=>y(u,g)),V("change",X,()=>{r(d)&&r(u)&&(c(),y(n,!1))}),x(Y,K)},ae=(Y,K)=>{{var J=g=>{var M=gs(),N=m(M),C=m(N);st(2),f(N);var B=w(N,2),O=m(B);st(2),f(B),f(M),V("change",C,()=>{y(i,"Processed"),c()}),V("change",O,()=>{y(i,"Unprocessed"),c()}),x(g,M)},X=g=>{var M=_s(),N=m(M);pe(N),f(M),$(()=>Ba(N,"placeholder",`Enter ${r(o)}...`)),xe(N,()=>r(i),C=>y(i,C)),V("keydown",N,C=>{C.key==="Enter"&&c()}),x(g,M)};P(Y,g=>{r(o)==="Status"?g(J):g(X,!1)},K)}};P(G,Y=>{r(o)==="Date Hired"||r(o)==="Last Day"?Y(ie):Y(ae,!1)})}var le=w(G,2);{var ce=Y=>{var K=xs(),J=m(K);Pe(J,1,()=>r(l),yt,(g,M,N)=>{var C=ys(),B=m(C),O=w(B);f(C),$(()=>ee(B,`${r(M).field??""} = ${r(M).value??""} `)),V("click",O,()=>p(N)),x(g,C)});var X=w(J,2);f(K),V("click",X,L),x(Y,K)};P(le,Y=>{r(l).length>0&&Y(ce)})}f(A),V("click",Q,T),x(F,A)};P(S,F=>{r(n)&&F(ne)})}f(H),V("click",k,D),x(t,H),ue()}var Ds=I('<div class="flex items-center gap-2"><label for="start-date" class="text-sm text-gray-600 font-[Open_Sans]">From:</label> <input id="start-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <label for="end-date" class="text-sm text-gray-600 font-[Open_Sans]">To:</label> <input id="end-date" type="date" class="border border-gray-300 px-3 py-1 rounded-full text-sm font-[Open_Sans] uppercase"/> <button><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path></svg> Export</button></div>');function Es(t,e){de(e,!1);let a=q(""),s=q(""),n=q(!1);async function o(){if(!r(a)||!r(s)){alert("Please select both a start and end date.");return}try{const v=new Date(r(a)).toISOString(),D=new Date(r(s)).toISOString(),_=await fetch(`${_e}/resignees/report?start_date=${v}&end_date=${D}`,{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch report from backend");const c=await _.blob(),p=URL.createObjectURL(c),T=document.createElement("a");T.href=p,T.download=`resignee_report_${r(a)}_to_${r(s)}.csv`,T.click(),URL.revokeObjectURL(p),y(n,!0)}catch(v){console.error("Error downloading backend report:",v),alert("No process dates were found within the specified date range")}}ze();var i=Ds(),d=w(m(i),2);pe(d);var u=w(d,4);pe(u);var l=w(u,2);f(i),$(()=>Me(l,1,`flex items-center gap-2 px-4.25 py-1.75 rounded-md text-sm font-[Open_Sans] hover:bg-blue-600 transition ${r(n),"bg-blue-500 text-white"}`)),xe(d,()=>r(a),v=>y(a,v)),xe(u,()=>r(s),v=>y(s,v)),V("click",l,o),x(t,i),ue()}var Ts=I('<button class="flex items-center gap-2 px-3 py-1.75 bg-red-500 text-white rounded-md hover:bg-red-600 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"></path></svg> Logout</button>');function Ss(t,e){de(e,!1);async function a(){try{const n=await fetch(`${_e}/logout`,{method:"POST",credentials:"include"});if(!n.ok){const o=await n.text();console.error("Logout failed:",o);return}Ft("/")}catch(n){console.error("Logout error:",n)}}ze();var s=Ts();V("click",s,a),x(t,s),ue()}var Cs=I('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600">Loading employees...</span></div>'),Ls=I('<div class="flex items-center justify-center py-12"><div class="text-red-600 bg-red-50 px-4 py-2 rounded-lg"> </div></div>'),zs=I('<div class="overflow-auto max-h-[500px]"><!></div>'),Ms=I('<div class="mt-4 text-sm text-gray-600"> </div>'),Ns=I('<p class="mt-2 text-sm text-gray-700"> </p>'),As=I('<main class="min-h-screen bg-gray-50 p-6"><div class="max-w-7xl mx-auto"><div class="flex flex-wrap items-center justify-between gap-4 mb-6"><div class="flex items-center gap-4 flex-1"><!></div> <div class="flex gap-2"><!> <!></div></div> <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><!></div> <!></div> <form><div class="mt-4 max-w-7xl mx-auto mb-6"><textarea rows="5" class="block w-full p-4 text-gray-900 border border-gray-300 rounded-lg bg-white text-base resize-y" placeholder="Paste resignee details here..."></textarea> <div class="mt-4 flex justify-between items-center"><button type="submit" class="px-4.25 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition">Submit</button> <!></div> <!></div></form></main>');function Vs(t,e){de(e,!1);let a=q([]),s=q([]),n=q(""),o=q(""),i="all",d=q(!0),u=q(""),l=q("");Tt(async()=>{(await fetch(`$${_e}/check-auth`,{method:"GET",credentials:"include"})).ok||(console.log("Unauthorized. Redirecting to login."),Ft("/")),await v()});async function v(){try{y(d,!0),y(n,""),console.log("Attempting to fetch from:",`${_e}/resignees`);const g=new AbortController,M=setTimeout(()=>g.abort(),1e4),N=await fetch(`${_e}/resignees`,{signal:g.signal,credentials:"include"});if(clearTimeout(M),console.log("Response status:",N.status),console.log("Response ok:",N.ok),!N.ok){const B=await N.text();throw console.log("Error response:",B),new Error(`HTTP ${N.status}: ${B}`)}const C=await N.json();console.log("Received data:",C),console.log("Data length:",C==null?void 0:C.length),y(a,C||[]),y(d,!1)}catch(g){console.error("Load employees error:",g),g instanceof Error?g.name==="AbortError"?y(n,"Request timed out. Please check if the server is running."):g.message.includes("fetch")?y(n,"Cannot connect to server. Please check if the server is running on http://localhost:8000"):y(n,g.message):y(n,"An unexpected error occurred"),y(d,!1)}}function D(g){y(o,g.searchTerm)}function _(g){y(s,g.detail.filtered)}async function c(){if(r(u).trim())try{const g=await fetch(`${_e}/resignees`,{method:"POST",headers:{"Content-Type":"text/plain"},body:r(u),credentials:"include"});if(!g.ok){const C=await g.text();throw new Error(`HTTP error! status: ${g.status} - ${C}`)}const M=await g.json();await v();const N=M.map(C=>`• ${C.employee_no} - ${C.name}`).join(`
`);te.success(`Added ${M.length} Entr${M.length===1?"y":"ies"}:
${N}`,{duration:3e3}),y(u,"")}catch(g){g instanceof Error?y(l,`Error: ${g.message}`):y(l,`Error: ${String(g)}`)}}async function p(g){const{employee:M,action:N}=g.detail;try{let C,B;N?(C=N,B=N):M.processed_date_time?(C="unprocess",B="unprocess"):(C="process",B="process");const O=await fetch(`${_e}/resignees/${M.employee_no}/${C}`,{method:"PUT",credentials:"include"});if(!O.ok){const he=await O.text();throw new Error(`Failed to ${B} employee: ${O.status} - ${he}`)}await v();const ve=B==="process"?"processed":"unprocessed"}catch(C){const B=N||(M.processed_date_time?"unprocess":"process"),O=C instanceof Error?C.message:String(C);y(l,`Error ${B}ing employee: ${O}`)}}Nt(()=>(r(o),r(a)),()=>{const g={january:0,jan:0,february:1,feb:1,march:2,mar:2,april:3,apr:3,may:4,june:5,jun:5,july:6,jul:6,august:7,aug:7,september:8,sep:8,october:9,oct:9,november:10,nov:10,december:11,dec:11},M=r(o).toLowerCase().trim(),N=g[M];y(s,r(a).filter(C=>{C.processed_date_time;const B=i==="all",O=Be=>String(Be||"").toLowerCase().includes(M),ve=new Date(C.date_hired),he=new Date(C.last_day),He=N!==void 0&&(ve.getMonth()===N||he.getMonth()===N);return(M===""||O(C.name)||O(C.employee_no)||O(C.department)||O(C.position_title)||He)&&B}))}),At(),ze();var T=As();Ra(g=>{Ia.title="AUB Resignee Tracker"});var L=m(T),z=m(L),R=m(z),H=m(R);Xr(H,{onsearch:D}),f(R);var k=w(R,2),S=m(k);ks(S,{get employees(){return r(a)},$$events:{filter:_}});var ne=w(S,2);Es(ne,{}),f(k),f(z);var F=w(z,2),A=m(F);{var Q=g=>{var M=Cs();x(g,M)},W=(g,M)=>{{var N=B=>{var O=Ls(),ve=m(O),he=m(ve);f(ve),f(O),$(()=>ee(he,`Error: ${r(n)??""}`)),x(B,O)},C=B=>{var O=zs(),ve=m(O);Gr(ve,{get employees(){return r(s)},onstatustoggle:p}),f(O),x(B,O)};P(g,B=>{r(n)?B(N):B(C,!1)},M)}};P(A,g=>{r(d)?g(Q):g(W,!1)})}f(F);var G=w(F,2);{var ie=g=>{var M=Ms(),N=m(M);f(M),$(()=>ee(N,`Showing ${r(s).length??""} of ${r(a).length??""} employees`)),x(g,M)};P(G,g=>{!r(d)&&!r(n)&&g(ie)})}f(L);var ae=w(L,2),le=m(ae),ce=m(le);Ua(ce);var Y=w(ce,2),K=w(m(Y),2);Ss(K,{}),f(Y);var J=w(Y,2);{var X=g=>{var M=Ns(),N=m(M,!0);f(M),$(()=>ee(N,r(l))),x(g,M)};P(J,g=>{r(l)&&g(X)})}f(le),f(ae),f(T),xe(ce,()=>r(u),g=>y(u,g)),V("submit",ae,Za(c)),x(t,T),ue()}export{Vs as component};
