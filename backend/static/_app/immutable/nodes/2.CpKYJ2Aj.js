import{f as h,a as f}from"../chunks/CO5X12ro.js";import{i as C}from"../chunks/BhebSDih.js";import{p as J,t as g,a as R,$ as j,c as r,s as n,g as s,m,r as i,b as t}from"../chunks/DZq78Ezw.js";import{h as B,e as T,s as u}from"../chunks/sKjDUr9k.js";import{i as y}from"../chunks/BQGRK2Qk.js";import{g as W}from"../chunks/CqTEfD8T.js";import{B as q}from"../chunks/QH1VciTq.js";var z=h('<div class="p-3 bg-green-50 border border-green-200 rounded-lg"><p class="text-sm text-green-800"><strong>Selected path:</strong> </p></div>'),G=h('<div class="p-3 bg-red-50 border border-red-200 rounded-lg"><p class="text-sm text-red-800"> </p></div>'),H=h('<div class="p-3 bg-green-50 border border-green-200 rounded-lg"><p class="text-sm text-green-800"> </p></div>'),I=h('<div class="min-h-screen flex items-center justify-center bg-gray-100 px-4 py-8"><div class="w-full max-w-md"><div class="bg-white rounded-lg shadow-md p-6"><h1 class="text-2xl font-bold text-gray-900 mb-6 text-center">Select Database File</h1> <div class="space-y-4"><button class="w-full py-2 px-4 bg-gray-500 hover:bg-gray-600 text-white rounded-md">Select .db File</button> <!> <!> <!> <button class="w-full py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg"> </button></div></div></div></div>');function K(_,w){J(w,!1);let d=m(""),p=m(!1),o=m(""),c=m("");const E=async()=>{try{const e=await window.pywebview.api.select_file();if(!e){t(o,"No file selected.");return}if(!e.endsWith(".db")){t(o,"Please select a valid .db file.");return}t(d,e),t(o,""),t(c,"")}catch(e){t(o,"File dialog failed. "+e)}},L=async()=>{if(!s(d)){t(o,"Please select a .db file first.");return}t(p,!0),t(o,""),t(c,"");try{const e=await fetch(`${q}/db-path`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s(d)}),credentials:"include"});if(e.ok)t(c,"Database path accepted!"),setTimeout(()=>W("/login"),1e3);else{const a=await e.text();t(o,`Failed (${e.status}). ${a}`)}}catch(e){t(o,`Network error: ${e instanceof Error?e.message:"Unknown error"}`)}finally{t(p,!1)}};C();var x=I();B(e=>{j.title="Select Database File"});var S=r(x),$=r(S),F=n(r($),2),k=r(F),D=n(k,2);{var M=e=>{var a=z(),l=r(a),v=n(r(l));i(l),i(a),g(()=>u(v,` ${s(d)??""}`)),f(e,a)};y(D,e=>{s(d)&&e(M)})}var P=n(D,2);{var O=e=>{var a=G(),l=r(a),v=r(l,!0);i(l),i(a),g(()=>u(v,s(o))),f(e,a)};y(P,e=>{s(o)&&e(O)})}var N=n(P,2);{var U=e=>{var a=H(),l=r(a),v=r(l,!0);i(l),i(a),g(()=>u(v,s(c))),f(e,a)};y(N,e=>{s(c)&&e(U)})}var b=n(N,2),A=r(b,!0);i(b),i(F),i($),i(S),i(x),g(()=>{b.disabled=!s(d)||s(p),u(A,s(p)?"Submitting...":"Submit Path")}),T("click",k,E),T("click",b,L),f(_,x),R()}function ae(_){B(w=>{j.title="Select Database File"}),K(_,{})}export{ae as component};
