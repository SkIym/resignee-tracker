import{f as U,a as _}from"../chunks/CO5X12ro.js";import{i as E}from"../chunks/BhebSDih.js";import{o as q}from"../chunks/hoQZN_2d.js";import{p as M,t as k,g as a,a as N,$ as C,s as d,c as t,b as o,m as c,r as s}from"../chunks/DZq78Ezw.js";import{h as G,e as O,s as L}from"../chunks/sKjDUr9k.js";import{i as z}from"../chunks/BQGRK2Qk.js";import{b as $,r as A}from"../chunks/CnPbex1U.js";import{g as P}from"../chunks/CqTEfD8T.js";import{B as F}from"../chunks/QH1VciTq.js";var H=U('<div class="text-black text-sm text-center"> </div>'),I=U(`<div class="min-h-screen flex items-start justify-center bg-gray-100 px-4 pt-20"><div class="w-full max-w-sm"><div class="text-center"><img src="/assets/proj-1-logo.png" alt="AUB Logo" class="mx-auto h-40 w-auto mb-4"/> <h1 class="text-2xl font-bold text-gray-800">AUB Resignee Tracker</h1></div> <form class="space-y-4 pt-4"><div><label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label> <input id="username" name="username" type="text" required class="w-full px-3 py-2 bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-colors disabled:opacity-50 
						focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"/></div> <div><label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label> <input id="password" name="password" type="password" required class="w-full px-3 py-2 bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-colors disabled:opacity-50 
						focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"/></div> <!> <button type="submit" class="mt-6 w-full py-2 px-4 bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white font-medium rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"> </button></form></div></div>`);function re(B,R){M(R,!1);let m=c(""),u=c(""),i=c(!1),n=c("");q(async()=>{try{(await fetch(`${F}/check-auth`,{method:"GET",credentials:"include"})).ok&&(console.log("Already logged in. Redirecting to dashboard..."),P("/dashboard"))}catch{console.warn("Auth check failed. Please Login.")}});const S=async e=>{e.preventDefault(),o(i,!0),o(n,"");try{const r=new URLSearchParams;r.append("username",a(m)),r.append("password",a(u));const l=await fetch("https://localhost:8000/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r,credentials:"include"});if(l.ok)P("/dashboard");else{const D=await l.json();o(n,D.detail||`Login failed (${l.status})`)}}catch(r){r instanceof Error?o(n,`Network error: ${r.message}. Please try again.`):o(n,"Network error: An unknown error occurred. Please try again.")}finally{o(i,!1)}};E();var f=I();G(e=>{C.title="Login"});var y=t(f),p=d(t(y),2),g=t(p),b=d(t(g),2);A(b),s(g);var v=d(g,2),h=d(t(v),2);A(h),s(v);var x=d(v,2);{var T=e=>{var r=H(),l=t(r,!0);s(r),k(()=>L(l,a(n))),_(e,r)};z(x,e=>{a(n)&&e(T)})}var w=d(x,2),j=t(w,!0);s(w),s(p),s(y),s(f),k(()=>{b.disabled=a(i),h.disabled=a(i),w.disabled=a(i),L(j,a(i)?"Logging in...":"Login")}),$(b,()=>a(m),e=>o(m,e)),$(h,()=>a(u),e=>o(u,e)),O("submit",p,S),_(B,f),N()}export{re as component};
